/*1346891741,178142493*/

if (window.CavalryLogger) { CavalryLogger.start_js(["wYiXB"]); }

__d("AsyncDOM",["CSS","DOM"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i={invoke:function(j,k){for(var l=0;l<j.length;++l){var m=j[l],n=m[0],o=m[1],p=m[2],q=m[3],r=(p&&k)||null;if(o)r=h.scry(r||document.documentElement,o)[0];switch(n){case 'eval':(new Function(q)).apply(r);break;case 'hide':g.hide(r);break;case 'show':g.show(r);break;case 'setContent':h.setContent(r,q);break;case 'appendContent':h.appendContent(r,q);break;case 'prependContent':h.prependContent(r,q);break;case 'insertAfter':h.insertAfter(r,q);break;case 'insertBefore':h.insertBefore(r,q);break;case 'remove':h.remove(r);break;case 'replace':h.replace(r,q);break;default:}}}};e.exports=i;});
__d("AsyncResponse",["Bootloader","Env","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('Env'),i=b('copyProperties'),j=b('tx');function k(l,m){i(this,{error:0,errorSummary:null,errorDescription:null,onload:null,replay:false,payload:m||null,request:l||null,silentError:false,is_last:true});return this;}i(k,{defaultErrorHandler:function(l){try{if(!l.silentError){k.verboseErrorHandler(l);}else l.logErrorByGroup('silent',10);}catch(m){alert(l);}},verboseErrorHandler:function(l){try{var n=l.getErrorSummary(),o=l.getErrorDescription();l.logErrorByGroup('popup',10);if(l.silentError&&o=='')o="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";g.loadModules(['Dialog'],function(p){new p().setTitle(n).setBody(o).setButtons([p.OK]).setModal(true).setCausalElement(this.relativeTo).show();});}catch(m){alert(l);}}});i(k.prototype,{getRequest:function(){return this.request;},getPayload:function(){return this.payload;},getError:function(){return this.error;},getErrorSummary:function(){return this.errorSummary;},setErrorSummary:function(l){l=(l===undefined?null:l);this.errorSummary=l;return this;},getErrorDescription:function(){return this.errorDescription;},getErrorIsWarning:function(){return this.errorIsWarning;},logError:function(l,m){if(window.send_error_signal){var n={err_code:this.error,vip:(h.vip||'-')};if(m){n.duration=m.duration;n.xfb_ip=m.xfb_ip;}var o=this.request.getURI();n.path=o||'-';n.aid=this.request.userActionID;if(o&&o.indexOf('scribe_endpoint.php')!=-1)l='async_error_double';send_error_signal(l,JSON.stringify(n));}},logErrorByGroup:function(l,m){if(Math.floor(Math.random()*m)==0)if(this.error==1357010||this.error<15000){this.logError('async_error_oops_'+l);}else this.logError('async_error_logic_'+l);}});e.exports=k;});
__d("HTTPErrors",[],function(a,b,c,d,e,f){var g={get:bagofholding,getAll:bagofholding};e.exports=g;});
__d("AsyncRequest",["event-extensions","Arbiter","AsyncDOM","AsyncResponse","Bootloader","CSS","Env","HTTPErrors","JSCC","Parent","Run","ServerJS","URI","UserAgent","XHR","bind","copyProperties","evalGlobal","ge","goURI","isEmpty","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('AsyncDOM'),i=b('AsyncResponse'),j=b('Bootloader'),k=b('CSS'),l=b('Env'),m=b('HTTPErrors'),n=b('JSCC'),o=b('Parent'),p=b('Run'),q=b('ServerJS'),r=b('URI'),s=b('UserAgent'),t=b('XHR'),u=b('bind'),v=b('copyProperties'),w=b('evalGlobal'),x=b('ge'),y=b('goURI'),z=b('isEmpty'),aa=b('tx');function ba(){try{return !window.loaded;}catch(ka){return true;}}function ca(ka){return ('upload' in ka)&&('onprogress' in ka.upload);}function da(ka){return 'withCredentials' in ka;}function ea(ka){return ka.status in {0:1,12029:1,12030:1,12031:1,12152:1};}function fa(ka){var la=!ka||typeof(ka)==='function';return la;}var ga=2,ha=ga;g.subscribe('page_transition',function(ka,la){ha=la.id;});function ia(ka){v(this,{transport:null,method:'POST',uri:'',timeout:null,timer:null,initialHandler:bagofholding,handler:null,uploadProgressHandler:null,errorHandler:null,transportErrorHandler:null,timeoutHandler:null,interceptHandler:bagofholding,finallyHandler:bagofholding,abortHandler:bagofholding,serverDialogCancelHandler:null,relativeTo:null,statusElement:null,statusClass:'',data:{},file:null,context:{},readOnly:false,writeRequiredParams:[],remainingRetries:0,userActionID:'-'});this.option={asynchronous:true,suppressErrorHandlerWarning:false,suppressEvaluation:false,suppressErrorAlerts:false,retries:0,jsonp:false,bundle:false,useIframeTransport:false,handleErrorAfterUnload:false};this.errorHandler=i.defaultErrorHandler;this.transportErrorHandler=u(this,'errorHandler');if(ka!==undefined)this.setURI(ka);}v(ia,{bootstrap:function(ka,la,ma){var na='GET',oa=true,pa={};if(ma||la&&(la.rel=='async-post'||la.getAttribute&&la.getAttribute('forcemethod')=='post')){na='POST';oa=false;if(ka){ka=r(ka);pa=ka.getQueryData();ka.setQueryData({});}}var qa=o.byClass(la,'stat_elem')||la;if(qa&&k.hasClass(qa,'async_saving'))return false;var ra=new ia(ka).setReadOnly(oa).setMethod(na).setData(pa).setNectarModuleDataSafe(la).setRelativeTo(la);if(la){ra.setHandler(function(ta){Event.fire(la,'success',{response:ta});});ra.setErrorHandler(function(ta){if(Event.fire(la,'error',{response:ta})!==false)i.defaultErrorHandler(ta);});}if(qa){ra.setStatusElement(qa);var sa=qa.getAttribute('data-status-class');sa&&ra.setStatusClass(sa);}if(la)Event.fire(la,'AsyncRequest/send',{request:ra});ra.send();return false;},post:function(ka,la){new ia(ka).setReadOnly(false).setMethod('POST').setData(la).send();return false;},getLastID:function(){return ga;},suppressOnloadToken:{},_inflight:[],_inflightCount:0,_inflightAdd:bagofholding,_inflightPurge:bagofholding,getInflightCount:function(){return this._inflightCount;},_inflightEnable:function(){if(s.ie()){v(ia,{_inflightAdd:function(ka){this._inflight.push(ka);},_inflightPurge:function(){ia._inflight=ia._inflight.filter(function(ka){return ka.transport&&ka.transport.readyState<4;});}});p.onUnload(function(){ia._inflight.forEach(function(ka){if(ka.transport&&ka.transport.readyState<4){ka.transport.abort();delete ka.transport;}});});}}});v(ia.prototype,{_dispatchResponse:function(ka){try{this.clearStatusIndicator();if(!this._isRelevant()){this._invokeErrorHandler(1010);return;}if(this.initialHandler(ka)===false)return;clearTimeout(this.timer);if(ka.jscc_map){var ma=(eval)(ka.jscc_map);n.init(ma);}var na;if(this.handler)try{na=this._shouldSuppressJS(this.handler(ka));}catch(oa){ka.is_last&&this.finallyHandler(ka);throw oa;}if(!na)this._handleJSResponse(ka);ka.is_last&&this.finallyHandler(ka);}catch(la){}},_shouldSuppressJS:function(ka){return ka===ia.suppressOnloadToken;},_handleJSResponse:function(ka){var la=this.getRelativeTo(),ma=ka.domops,na=ka.jsmods,oa=new q().setRelativeTo(la);if(na&&(na.define||na.instances||na.markup)){oa.handle({define:na.define,instances:na.instances,markup:na.markup});delete na.define;delete na.instances;delete na.markup;}if(ma)h.invoke(ma,la);if(na)oa.handle(na);this._handleJSRegisters(ka,'onload');if(this.lid)g.inform('tti_ajax',{s:this.lid,d:[this._sendTimeStamp||0,(this._sendTimeStamp&&this._responseTime)?(this._responseTime-this._sendTimeStamp):0]},g.BEHAVIOR_EVENT);this._handleJSRegisters(ka,'onafterload');},_handleJSRegisters:function(ka,la){var ma=ka[la];if(!ma)return;for(var na=0;na<ma.length;na++)try{(new Function(ma[na])).apply(this);}catch(oa){}},invokeResponseHandler:function(ka){if(typeof(ka.redirect)!=='undefined'){(function(){this.setURI(ka.redirect).send();}).bind(this).defer();return;}if(!this.handler&&!this.errorHandler&&!this.transportErrorHandler)return;if(typeof(ka.asyncResponse)!=='undefined'){if(!this._isRelevant()){this._invokeErrorHandler(1010);return;}var la=ka.asyncResponse;if(la.inlinejs)w(la.inlinejs);if(la.lid){this._responseTime=Date.now();if(a.CavalryLogger)this.cavalry=a.CavalryLogger.getInstance(la.lid);this.lid=la.lid;}j.setResourceMap(la.resource_map);if(la.bootloadable)j.enableBootload(la.bootloadable);var ma;if(la.getError()&&!la.getErrorIsWarning()){var na=this.errorHandler.bind(this);ma=this._dispatchErrorResponse.bind(this,la,na);}else ma=this._dispatchResponse.bind(this,la);ma=ma.defer.bind(ma);var oa=false;if(this.preBootloadHandler)oa=this.preBootloadHandler(la);la.css=la.css||[];la.js=la.js||[];j.loadResources(la.css.concat(la.js),ma,oa,this.getURI());}else if(typeof(ka.transportError)!=='undefined'){if(this._xFbServer){this._invokeErrorHandler(1008);}else this._invokeErrorHandler(1012);}else this._invokeErrorHandler(1007);},_invokeErrorHandler:function(ka){if(ba()&&!this.getOption('handleErrorAfterUnload'))return;var la;if(this.responseText===''){la=1002;}else if(this._requestAborted){la=1011;}else{try{la=ka||this.transport.status||1004;}catch(ma){la=1005;}if(false===navigator.onLine)la=1006;}if(!this.transportErrorHandler)return;var na=this.transportErrorHandler.bind(this),oa,pa,qa=true;if(la===1006){pa="No Network Connection";oa="Your browser appears to be offline. Please check your internet connection and try again.";}else if(la>=300&&la<=399){pa="Redirection";oa="Your access to Facebook was redirected or blocked by a third party at this time, please contact your ISP or reload. ";var ra=this.transport.getResponseHeader("Location");if(ra)y(ra,true);qa=true;}else{pa="Oops";oa="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";}!this.getOption('suppressErrorAlerts');var sa=new i(this);v(sa,{error:la,errorSummary:pa,errorDescription:oa,silentError:qa});this._dispatchErrorResponse(sa,na);},_dispatchErrorResponse:function(ka,la){var ma=ka.getError();try{this.clearStatusIndicator();var oa=this._sendTimeStamp&&{duration:Date.now()-this._sendTimeStamp,xfb_ip:this._xFbServer||'-'};ka.logError('async_error',oa);if(!this._isRelevant()||ma===1010){this.abort();return;}if(ma==1357008||ma==1357007||ma==1442002||ma==1357001){var pa=ma==1357008||ma==1357007;this.interceptHandler(ka);this._displayServerDialog(ka,pa);}else if(this.initialHandler(ka)!==false){clearTimeout(this.timer);try{la(ka);}catch(qa){this.finallyHandler(ka);throw qa;}this.finallyHandler(ka);}}catch(na){}},_displayServerDialog:function(ka,la){var ma=ka.getPayload();if(ma.__dialog!==undefined){this._displayServerLegacyDialog(ka,la);return;}var na=ma.__dialogx;new q().handle(na);j.loadModules(['ConfirmationDialog'],function(oa){oa.setupConfirmation(ka,this);}.bind(this));},_displayServerLegacyDialog:function(ka,la){var ma=ka.getPayload().__dialog;j.loadModules(['Dialog'],function(na){var oa=new na(ma);if(la)oa.setHandler(this._displayConfirmationHandler.bind(this,oa));oa.setCancelHandler(function(){var pa=this.getServerDialogCancelHandler();try{pa&&pa(ka);}catch(qa){throw qa;}finally{this.finallyHandler(ka);}}.bind(this)).setCausalElement(this.relativeTo).show();}.bind(this));},_displayConfirmationHandler:function(ka){this.data.confirmed=1;v(this.data,ka.getFormData());this.send();},_handleJSONPResponse:function(ka){this.is_first=(this.is_first===undefined);var la=this._interpretResponse(ka);la.asyncResponse.is_first=this.is_first;la.asyncResponse.is_last=this.transport.hasFinished();this.invokeResponseHandler(la);if(this.transport.hasFinished())delete this.transport;},_handleXHRResponse:function(ka){var la;if(this.getOption('suppressEvaluation')){la={asyncResponse:new i(this,ka)};}else{var ma=ka.responseText,na=null;try{var pa=this._unshieldResponseText(ma);try{var qa=(eval)('('+pa+')');la=this._interpretResponse(qa);}catch(oa){na='excep';la={transportError:'eval() failed on async to '+this.getURI()};}}catch(oa){na='empty';la={transportError:oa.message};}if(na)a.send_error_signal&&a.send_error_signal('async_xport_resp',[(this._xFbServer?'1008_':'1012_')+na,this._xFbServer||'-',this.getURI(),ma.length,ma.substr(0,1600)].join(':'));}this.invokeResponseHandler(la);},_unshieldResponseText:function(ka){var la="for (;;);",ma=la.length;if(ka.length<=ma)throw new Error('Response too short on async to '+this.getURI());var na=0;while(ka.charAt(na)==" "||ka.charAt(na)=="\n")na++;na&&ka.substring(na,na+ma)==la;return ka.substring(na+ma);},_interpretResponse:function(ka){if(ka.redirect)return {redirect:ka.redirect};var la=new i(this);if(ka.__ar!=1){la.payload=ka;}else v(la,ka);return {asyncResponse:la};},_onStateChange:function(){try{if(this.transport.readyState==4){ia._inflightCount--;ia._inflightPurge();try{if(typeof(this.transport.getResponseHeader)!=='undefined'&&this.transport.getResponseHeader('X-FB-Debug'))this._xFbServer=this.transport.getResponseHeader('X-FB-Debug');}catch(la){}if(this.transport.status>=200&&this.transport.status<300){ia.lastSuccessTime=Date.now();this._handleXHRResponse(this.transport);}else if(s.safari()&&(typeof(this.transport.status)=='undefined')){this._invokeErrorHandler(1002);}else if(l.retry_ajax_on_network_error&&ea(this.transport)&&this.remainingRetries>0){this.remainingRetries--;delete this.transport;this.send(true);return;}else this._invokeErrorHandler();if(this.getOption('asynchronous')!==false)delete this.transport;}}catch(ka){if(ba())return;delete this.transport;if(this.remainingRetries>0){this.remainingRetries--;this.send(true);}else{!this.getOption('suppressErrorAlerts');a.send_error_signal&&a.send_error_signal('async_xport_resp',[1007,this._xFbServer||'-',this.getURI(),ka.message].join(':'));this._invokeErrorHandler(1007);}}},_isMultiplexable:function(){if(this.getOption('jsonp')||this.getOption('useIframeTransport'))return false;if(!this.uri.isFacebookURI())return false;if(!this.getOption('asynchronous'))return false;return true;},handleResponse:function(ka){var la=this._interpretResponse(ka);this.invokeResponseHandler(la);},setMethod:function(ka){this.method=ka.toString().toUpperCase();return this;},getMethod:function(){return this.method;},setData:function(ka){this.data=ka;return this;},_setDataHash:function(){if(this.method!='POST'||this.data.phstamp)return;var ka=r.implodeQuery(this.data).length,la='';for(var ma=0;ma<this.data.fb_dtsg.length;ma++)la+=this.data.fb_dtsg.charCodeAt(ma);this.data.phstamp='1'+la+ka;},setRawData:function(ka){this.rawData=ka;return this;},getData:function(){return this.data;},setContextData:function(ka,la,ma){ma=ma===undefined?true:ma;if(ma)this.context['_log_'+ka]=la;return this;},_setUserActionID:function(){var ka=a.ArbiterMonitor&&a.ArbiterMonitor.getUE()||'-';this.userActionID=(a.EagleEye&&a.EagleEye.getSessionID()||'-')+'/'+ka;},setURI:function(ka){var la=r(ka);if(this.getOption('useIframeTransport')&&!la.isFacebookURI())return this;if(!this._allowCrossOrigin&&!this.getOption('jsonp')&&!this.getOption('useIframeTransport')&&!la.isSameOrigin())return this;this._setUserActionID();if(!ka||la.isEmpty()){if(a.send_error_signal&&a.get_error_stack){var ma={err_code:1013,vip:'-',duration:0,xfb_ip:'-',path:window.location.href,aid:this.userActionID};a.send_error_signal('async_error',JSON.stringify(ma));a.send_error_signal('async_xport_stack',[1013,window.location.href,null,a.get_error_stack()].join(':'));}return this;}this.uri=la;return this;},getURI:function(){return this.uri.toString();},setInitialHandler:function(ka){this.initialHandler=ka;return this;},setHandler:function(ka){if(fa(ka))this.handler=ka;return this;},getHandler:function(){return this.handler;},setUploadProgressHandler:function(ka){if(fa(ka))this.uploadProgressHandler=ka;return this;},setErrorHandler:function(ka){if(fa(ka))this.errorHandler=ka;return this;},setTransportErrorHandler:function(ka){this.transportErrorHandler=ka;return this;},getErrorHandler:function(){return this.errorHandler;},getTransportErrorHandler:function(){return this.transportErrorHandler;},setTimeoutHandler:function(ka,la){if(fa(la)){this.timeout=ka;this.timeoutHandler=la;}return this;},resetTimeout:function(ka){if(!(this.timeoutHandler===null))if(ka===null){this.timeout=null;clearTimeout(this.timer);this.timer=null;}else{var la=!this._allowCrossPageTransition;this.timeout=ka;clearTimeout(this.timer);this.timer=this._handleTimeout.bind(this).defer(this.timeout,la);}return this;},_handleTimeout:function(){this.abandon();this.timeoutHandler(this);},setNewSerial:function(){this.id=++ga;return this;},setInterceptHandler:function(ka){this.interceptHandler=ka;return this;},setFinallyHandler:function(ka){this.finallyHandler=ka;return this;},setAbortHandler:function(ka){this.abortHandler=ka;return this;},getServerDialogCancelHandler:function(){return this.serverDialogCancelHandler;},setServerDialogCancelHandler:function(ka){this.serverDialogCancelHandler=ka;return this;},setPreBootloadHandler:function(ka){this.preBootloadHandler=ka;return this;},setReadOnly:function(ka){if(!(typeof(ka)!='boolean'))this.readOnly=ka;return this;},setFBMLForm:function(){this.writeRequiredParams=["fb_sig"];return this;},getReadOnly:function(){return this.readOnly;},setRelativeTo:function(ka){this.relativeTo=ka;return this;},getRelativeTo:function(){return this.relativeTo;},setStatusClass:function(ka){this.statusClass=ka;return this;},setStatusElement:function(ka){this.statusElement=ka;return this;},getStatusElement:function(){return x(this.statusElement);},_isRelevant:function(){if(this._allowCrossPageTransition)return true;if(!this.id)return true;return this.id>ha;},clearStatusIndicator:function(){var ka=this.getStatusElement();if(ka){k.removeClass(ka,'async_saving');k.removeClass(ka,this.statusClass);}},addStatusIndicator:function(){var ka=this.getStatusElement();if(ka){k.addClass(ka,'async_saving');k.addClass(ka,this.statusClass);}},specifiesWriteRequiredParams:function(){return this.writeRequiredParams.every(function(ka){this.data[ka]=this.data[ka]||l[ka]||(x(ka)||{}).value;if(this.data[ka]!==undefined)return true;return false;},this);},setOption:function(ka,la){if(typeof(this.option[ka])!='undefined')this.option[ka]=la;return this;},getOption:function(ka){typeof(this.option[ka])=='undefined';return this.option[ka];},abort:function(){if(this.transport){var ka=this.getTransportErrorHandler();this.setOption('suppressErrorAlerts',true);this.setTransportErrorHandler(bagofholding);this._requestAborted=true;this.transport.abort();this.setTransportErrorHandler(ka);}this.abortHandler();},abandon:function(){clearTimeout(this.timer);this.setOption('suppressErrorAlerts',true).setHandler(bagofholding).setErrorHandler(bagofholding).setTransportErrorHandler(bagofholding);if(this.transport){this._requestAborted=true;this.transport.abort();}},setNectarData:function(ka){if(ka){if(this.data.nctr===undefined)this.data.nctr={};v(this.data.nctr,ka);}return this;},setNectarModuleDataSafe:function(ka){if(this.setNectarModuleData)this.setNectarModuleData(ka);return this;},setNectarImpressionIdSafe:function(){if(this.setNectarImpressionId)this.setNectarImpressionId();return this;},setAllowCrossPageTransition:function(ka){this._allowCrossPageTransition=!!ka;if(this.timer)this.resetTimeout(this.timeout);return this;},setAllowCrossOrigin:function(ka){this._allowCrossOrigin=!!ka;return this;},send:function(ka){ka=ka||false;if(!this.uri)return false;!this.errorHandler&&!this.getOption('suppressErrorHandlerWarning');if(this.getOption('jsonp')&&this.method!='GET')this.setMethod('GET');if(this.getOption('useIframeTransport')&&this.method!='GET')this.setMethod('GET');this.timeoutHandler!==null&&(this.getOption('jsonp')||this.getOption('useIframeTransport'));if(!this.getReadOnly()){this.specifiesWriteRequiredParams();if(this.method!='POST')return false;}v(this.data,t.getAsyncParams(this.method));if(!z(this.context)){v(this.data,this.context);this.data.ajax_log=1;}if(l.force_param)v(this.data,l.force_param);this._setUserActionID();if(this.getOption('bundle')&&this._isMultiplexable()){ja.schedule(this);return true;}this.setNewSerial();if(!this.getOption('asynchronous'))this.uri.addQueryData({__s:1});this.finallyHandler=a.async_callback(this.finallyHandler,'final');var la,ma;if(this.method=='GET'||this.rawData){la=this.uri.addQueryData(this.data).toString();ma=this.rawData||'';}else{la=this.uri.toString();this._setDataHash();ma=r.implodeQuery(this.data);}if(this.transport)return false;if(this.getOption('jsonp')||this.getOption('useIframeTransport')){d(['JSONPTransport'],function(qa){this.transport=new qa(this.getOption('jsonp')?'jsonp':'iframe',this.uri,this._handleJSONPResponse.bind(this));this.transport.send();}.bind(this));return true;}var na=t.create();if(!na)return false;na.onreadystatechange=a.async_callback(this._onStateChange.bind(this),'xhr');if(this.uploadProgressHandler&&ca(na))na.upload.onprogress=this.uploadProgressHandler.bind(this);if(!ka)this.remainingRetries=this.getOption('retries');if(a.send_error_signal||a.ArbiterMonitor)this._sendTimeStamp=this._sendTimeStamp||Date.now();this.transport=na;try{this.transport.open(this.method,la,this.getOption('asynchronous'));}catch(oa){return false;}var pa=l.svn_rev;if(pa)this.transport.setRequestHeader('X-SVN-Rev',String(pa));if(!this.uri.isSameOrigin()&&!this.getOption('jsonp')&&!this.getOption('useIframeTransport')){if(!da(this.transport))return false;if(this.uri.isFacebookURI())this.transport.withCredentials=true;}if(this.method=='POST'&&!this.rawData)this.transport.setRequestHeader('Content-Type','application/x-www-form-urlencoded');this.addStatusIndicator();this.transport.send(ma);if(this.timeout!==null)this.resetTimeout(this.timeout);ia._inflightCount++;ia._inflightAdd(this);return true;}});function ja(){this._requests=[];}v(ja,{multiplex:null,schedule:function(ka){if(!ja.multiplex){ja.multiplex=new ja();(function(){ja.multiplex.send();ja.multiplex=null;}).defer();}ja.multiplex.add(ka);}});v(ja.prototype,{add:function(ka){this._requests.push(ka);},send:function(){var ka=this._requests;if(!ka.length)return;var la;if(ka.length===1){la=ka[0];}else{var ma=ka.map(function(na){return [na.uri.getPath(),r.implodeQuery(na.data)];});la=new ia('/ajax/proxy.php').setAllowCrossPageTransition(true).setData({data:ma}).setHandler(this._handler.bind(this)).setTransportErrorHandler(this._transportErrorHandler.bind(this));}la.setOption('bundle',false).send();},_handler:function(ka){var la=ka.getPayload().responses;if(la.length!==this._requests.length)return;for(var ma=0;ma<this._requests.length;ma++){var na=this._requests[ma],oa=na.uri.getPath();na.id=this.id;if(la[ma][0]!==oa){na.invokeResponseHandler({transportError:'Wrong response order in bundled request to '+oa});continue;}na.handleResponse(la[ma][1]);}},_transportErrorHandler:function(ka){var la={transportError:ka.errorDescription},ma=this._requests.map(function(na){na.id=this.id;na.invokeResponseHandler(la);return na.uri.getPath();});}});e.exports=ia;});
__d("legacy:async",["AsyncRequest","AsyncResponse"],function(a,b,c,d){a.AsyncRequest=b('AsyncRequest');a.AsyncResponse=b('AsyncResponse');},3);
__d("legacy:css",["CSS"],function(a,b,c,d){a.CSS=b('CSS');},3);
__d("legacy:data-store",["DataStore"],function(a,b,c,d){a.DataStore=a.DataStore||b('DataStore');},3);
__d("legacy:dom",["DOM"],function(a,b,c,d){a.DOM=b('DOM');},3);
function EmuController(a,b){this.impression=b;this.containerId=a;DataStore.set($(a),'emuController',this);return this;}copyProperties(EmuController,{fromContainer:function(a){var b=ge(a);if(!b)return null;return DataStore.get(b,'emuController');},getEventClass:function(a){return "emuEvent"+String(a).trim();}});copyProperties(EmuController.prototype,{EVENT_HANDLER_PATH:'/ajax/emu/end.php',CLICK:1,FAN:"fad_fan",event:function(a,b,c,d){var e={eid:this.impression,f:0,ui:this.containerId,en:a,a:1};if(b)e.ed=JSON.stringify(b);if(!d)var d=bagofholding;var f=new AsyncRequest().setURI(this.EVENT_HANDLER_PATH).setData(e).setErrorHandler(d);if(c)f.setHandler(c);f.send();},redirect:function(){var a={eid:this.impression,f:0,ui:this.containerId,en:this.CLICK,a:0,sig:Math.floor(Math.random()*65535)+65536},b=new URI(this.EVENT_HANDLER_PATH);b.setQueryData(a);goURI(b);}});
var ShortClickHandlers={EVENT_NAME_CAME_BACK:'cameback',onclicked:function(a){if(this.onsite)return;if(a.button!==0||a.getModifiers().any)return;this.click_ts=(+new Date());if(this.listeners!==undefined)for(var b in this.listeners)this.listeners[b].remove();this.listeners={focus:Event.listen(window,'focus',ShortClickHandlers.oncameback.bind(this))};},oncameback:function(a){var b=(+new Date())-this.click_ts;this.listeners[a.type].remove();var c={click_ts:this.click_ts,length:b,trigger:a.type};this.sendData(ShortClickHandlers.EVENT_NAME_CAME_BACK,c);}};
function EmuTracker(a,b){this.base=EmuController.fromContainer(a);!this.base;this.onsite=b;var c=DOM.scry($(a),"a."+EmuController.getEventClass(EmuTracker.EVENT_CLICK));c.forEach(function(d){Event.listen(d,'click',ShortClickHandlers.onclicked.bind(this));}.bind(this));return this;}copyProperties(EmuTracker,{EVENT_CLICK:1});copyProperties(EmuTracker.prototype,{sendData:function(a,b){this.base.event(a,b);}});
__d("GenderConst",[],function(a,b,c,d,e,f){var g={UNKNOWN:0,FEMALE_SINGULAR:1,MALE_SINGULAR:2,FEMALE_SINGULAR_GUESS:3,MALE_SINGULAR_GUESS:4,MIXED_SINGULAR:5,MIXED_PLURAL:5,NEUTER_SINGULAR:6,UNKNOWN_SINGULAR:7,FEMALE_PLURAL:8,MALE_PLURAL:9,NEUTER_PLURAL:10,UNKNOWN_PLURAL:11};e.exports=g;});
__d("Button",["event-extensions","CSS","DataStore","DOM","Parent"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DataStore'),i=b('DOM'),j=b('Parent'),k='uiButtonDisabled',l='uiButtonDepressed',m='button:blocker',n='href',o='ajaxify';function p(t,u){var v=h.get(t,m);if(u){if(v){v.remove();h.remove(t,m);}}else if(!v)h.set(t,m,Event.listen(t,'click',bagof(false),Event.Priority.URGENT));}function q(t){var u=j.byClass(t,'uiButton');if(!u)throw new Error('invalid use case');return u;}function r(t){return i.isNodeOfType(t,'a');}var s={getInputElement:function(t){t=q(t);if(r(t))throw new Error('invalid use case');return i.find(t,'input');},isEnabled:function(t){return !g.hasClass(q(t),k);},setEnabled:function(t,u){t=q(t);g.conditionClass(t,k,!u);if(r(t)){var v=t.href,w=t.getAttribute('ajaxify'),x=h.get(t,n,'#'),y=h.get(t,o);if(u){if(!v)t.href=x;if(!w&&y)t.setAttribute('ajaxify',y);}else{if(v&&v!==x)h.set(t,n,v);if(w&&w!==y)h.set(t,o,w);t.removeAttribute('href');t.removeAttribute('ajaxify');}p(t,u);}else{var z=s.getInputElement(t);z.disabled=!u;p(z,u);}},setDepressed:function(t,u){g.conditionClass(q(t),l,u);},isDepressed:function(t){return g.hasClass(q(t),l);},setLabel:function(t,u){t=q(t);if(r(t)){var v=i.find(t,'span.uiButtonText');i.setContent(v,u);}else s.getInputElement(t).value=u;g.conditionClass(t,'uiButtonNoText',!u);},setIcon:function(t,u){if(u&&!i.isNode(u))return;t=q(t);var v=i.scry(t,'.img')[0];if(!u){v&&i.remove(v);return;}g.addClass(u,'customimg');if(v!=u)if(v){i.replace(v,u);}else i.prependContent(t,u);}};e.exports=s;});
__d("DOMControl",["DataStore","$","copyProperties"],function(a,b,c,d,e,f){var g=b('DataStore'),h=b('$'),i=b('copyProperties');function j(k){this.root=h(k);this.updating=false;g.set(k,'DOMControl',this);}i(j.prototype,{getRoot:function(){return this.root;},beginUpdate:function(){if(this.updating)return false;this.updating=true;return true;},endUpdate:function(){this.updating=false;},update:function(k){if(!this.beginUpdate())return this;this.onupdate(k);this.endUpdate();},onupdate:function(k){}});j.getInstance=function(k){return g.get(k,'DOMControl');};e.exports=j;});
__d("Input",["CSS","DOMQuery","DOMControl"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOMQuery'),i=b('DOMControl'),j=function(l){var m=l.getAttribute('maxlength');if(m&&m>0)d(['enforceMaxLength'],function(n){n(l,m);});},k={focus:function(l){try{l.focus();}catch(m){}},isEmpty:function(l){return !(/\S/).test(l.value||'')||g.hasClass(l,'DOMControl_placeholder');},getValue:function(l){return k.isEmpty(l)?'':l.value;},setValue:function(l,m){g.removeClass(l,'DOMControl_placeholder');l.value=m||'';j(l);var n=i.getInstance(l);n&&n.resetHeight&&n.resetHeight();},setPlaceholder:function(l,m){l.setAttribute('aria-label',m);l.setAttribute('placeholder',m);if(l==document.activeElement)return;if(k.isEmpty(l)){g.conditionClass(l,'DOMControl_placeholder',m);l.value=m||'';}},reset:function(l){var m=l!==document.activeElement?(l.getAttribute('placeholder')||''):'';l.value=m;g.conditionClass(l,'DOMControl_placeholder',m);l.style.height='';},setSubmitOnEnter:function(l,m){g.conditionClass(l,'enter_submit',m);},getSubmitOnEnter:function(l){return g.hasClass(l,'enter_submit');},setMaxLength:function(l,m){if(m>0){l.setAttribute('maxlength',m);j(l);}else l.removeAttribute('maxlength');}};e.exports=k;});
__d("Form",["event-extensions","AsyncRequest","AsyncResponse","CSS","DOM","DOMPosition","DOMQuery","DataStore","Env","Input","Parent","URI","createArrayFrom","trackReferrer"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('AsyncResponse'),i=b('CSS'),j=b('DOM'),k=b('DOMPosition'),l=b('DOMQuery'),m=b('DataStore'),n=b('Env'),o=b('Input'),p=b('Parent'),q=b('URI'),r=b('createArrayFrom'),s=b('trackReferrer'),t='FileList' in window,u='FormData' in window;function v(x){var y={};q.implodeQuery(x).split('&').forEach(function(z){if(z){var aa=/^([^=]*)(?:=(.*))?$/.exec(z),ba=q.decodeComponent(aa[1]),ca=aa[2]?q.decodeComponent(aa[2]):null;y[ba]=ca;}});return y;}var w={getInputs:function(x){x=x||document;return [].concat(r(l.scry(x,'input')),r(l.scry(x,'select')),r(l.scry(x,'textarea')),r(l.scry(x,'button')));},getSelectValue:function(x){return x.options[x.selectedIndex].value;},setSelectValue:function(x,y){for(var z=0;z<x.options.length;++z)if(x.options[z].value==y){x.selectedIndex=z;break;}},getRadioValue:function(x){for(var y=0;y<x.length;y++)if(x[y].checked)return x[y].value;return null;},getElements:function(x){return r(x.tagName=='FORM'?x.elements:w.getInputs(x));},getAttribute:function(x,y){return (x.getAttributeNode(y)||{}).value||null;},setDisabled:function(x,y){w.getElements(x).forEach(function(z){if(z.disabled!==undefined){var aa=m.get(z,'origDisabledState');if(y){if(aa===undefined)m.set(z,'origDisabledState',z.disabled);z.disabled=y;}else if(aa!==true)z.disabled=false;}});},bootstrap:function(x,y){var z=(w.getAttribute(x,'method')||'GET').toUpperCase();y=p.byTag(y,'button')||y;var aa=p.byClass(y,'stat_elem')||x;if(i.hasClass(aa,'async_saving'))return;if(y&&(y.form!==x||(y.nodeName!='INPUT'&&y.nodeName!='BUTTON')||y.type!='submit')){var ba=l.scry(x,'.enter_submit_target')[0];ba&&(y=ba);}var ca=w.serialize(x,y);w.setDisabled(x,true);var da=w.getAttribute(x,'ajaxify')||w.getAttribute(x,'action');s(x,da);var ea=new g(da);ea.setData(ca).setNectarModuleDataSafe(x).setReadOnly(z=='GET').setMethod(z).setRelativeTo(x).setStatusElement(aa).setInitialHandler(w.setDisabled.curry(x,false)).setHandler(function(fa){Event.fire(x,'success',{response:fa});}).setErrorHandler(function(fa){if(Event.fire(x,'error',{response:fa})!==false)h.defaultErrorHandler(fa);}).setFinallyHandler(w.setDisabled.curry(x,false)).send();},forEachValue:function(x,y,z){w.getElements(x).forEach(function(aa){if(aa.name&&!aa.disabled&&aa.type!=='submit')if(!aa.type||((aa.type==='radio'||aa.type==='checkbox')&&aa.checked)||aa.type==='text'||aa.type==='password'||aa.type==='hidden'||aa.nodeName==='TEXTAREA'){z(aa.type,aa.name,o.getValue(aa));}else if(aa.nodeName==='SELECT'){for(var ba=0,ca=aa.options.length;ba<ca;ba++){var da=aa.options[ba];if(da.selected)z('select',aa.name,da.value);}}else if(t&&aa.type==='file'){var ea=aa.files;for(var fa=0;fa<ea.length;fa++)z('file',aa.name,ea.item(fa));}});if(y&&y.name&&y.type==='submit'&&l.contains(x,y)&&l.isNodeOfType(y,['input','button']))z('submit',y.name,y.value);},createFormData:function(x,y){if(!u)return null;var z=new FormData();if(x)if(l.isNode(x)){w.forEachValue(x,y,function(ca,da,ea){z.append(da,ea);});}else{var aa=v(x);for(var ba in aa)z.append(ba,aa[ba]);}return z;},serialize:function(x,y){var z={};w.forEachValue(x,y,function(aa,ba,ca){if(aa==='file')return;w._serializeHelper(z,ba,ca);});return w._serializeFix(z);},_serializeHelper:function(x,y,z){var aa=Object.prototype.hasOwnProperty,ba=/([^\]]+)\[([^\]]*)\](.*)/.exec(y);if(ba){if(!x[ba[1]]||!aa.call(x,ba[1])){var ca;x[ba[1]]=ca={};if(x[ba[1]]!==ca)return;}var da=0;if(ba[2]===''){while(x[ba[1]][da]!==undefined)da++;}else da=ba[2];if(ba[3]===''){x[ba[1]][da]=z;}else w._serializeHelper(x[ba[1]],da.concat(ba[3]),z);}else x[y]=z;},_serializeFix:function(x){var y=[];for(var z in x){if(x[z] instanceof Object)x[z]=w._serializeFix(x[z]);y.push(z);}if(y.length>0){var aa=0,ba=true;y.sort().forEach(function(da){if(da!=aa++)ba=false;});if(ba){var ca=[];y.forEach(function(da){ca[da]=x[da];});return ca;}}return x;},post:function(x,y,z){var aa=document.createElement('form');aa.action=x.toString();aa.method='POST';aa.style.display='none';if(z)aa.target=z;y.fb_dtsg=n.fb_dtsg;w.createHiddenInputs(y,aa);l.getRootElement().appendChild(aa);aa.submit();return false;},createHiddenInputs:function(x,y,z,aa){z=z||{};var ba=v(x);for(var ca in ba){if(ba[ca]===null)continue;if(z[ca]&&aa){z[ca].value=ba[ca];}else{var da=j.create('input',{type:'hidden',name:ca,value:ba[ca]});z[ca]=da;y.appendChild(da);}}return z;},getFirstElement:function(x,y){y=y||['input[type="text"]','textarea','input[type="password"]','input[type="button"]','input[type="submit"]'];var z=[];for(var aa=0;aa<y.length;aa++){z=l.scry(x,y[aa]);for(var ba=0;ba<z.length;ba++){var ca=z[ba];try{var ea=k.getElementPosition(ca);if(ea.y>0&&ea.x>0)return ca;}catch(da){}}}return null;},focusFirst:function(x){var y=w.getFirstElement(x);if(y){y.focus();return true;}return false;}};e.exports=w;});
__d("AsyncUploadBase",["ArbiterMixin","AsyncRequest","AsyncResponse","Form","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('AsyncRequest'),i=b('AsyncResponse'),j=b('Form'),k=b('UserAgent'),l=b('copyProperties');function m(o){this.setURI(o);}m.isSupported=function(){if(k.safari()&&!k.chrome()&&k.windows())return false;return ('FileList' in window)&&('FormData' in window);};l(m.prototype,g,{_limit:10,setAllowCrossOrigin:function(o){this._allowCrossOrigin=!!o;return this;},setData:function(o){this._data=o;return this;},setLimit:function(o){this._limit=o;return this;},setRelativeTo:function(o){this._relativeTo=o;return this;},setStatusElement:function(o){this._statusElement=o;return this;},setURI:function(o){this._uri=o;return this;},_createFileUpload:function(o,p,q){return new n(o,p,q);},_parseFiles:function(o){var p={};for(var q in o){var r=o[q];if(Array.isArray(r)){p[q]=r;}else{p[q]=[];if(r instanceof window.FileList){for(var s=0;s<r.length;s++)p[q].push(r.item(s));}else if(r instanceof window.File||r instanceof window.Blob)p[q].push(r);}}return p;},_processQueue:function(){while(this._pending.length<this._limit){if(!this._waiting.length)break;var o=this._waiting.shift();this._processUpload(o);this._pending.push(o);}},_processUpload:function(o){this.inform('start',o);var p=j.createFormData(o.getData()||this._data);if(o.getFile())p.append(o.getName(),o.getFile());new h().setAllowCrossOrigin(this._allowCrossOrigin).setURI(this._uri).setRawData(p).setRelativeTo(this._relativeTo).setStatusElement(this._statusElement).setHandler(this._success.bind(this,o)).setErrorHandler(this._failure.bind(this,o)).setUploadProgressHandler(this._progress.bind(this,o)).setInitialHandler(this._initial.bind(this,o)).send();},_initial:function(o){this.inform('initial',o);},_success:function(o,p){this.inform('success',o.handleSuccess(p));this._complete(o);},_failure:function(o,p){if(this.inform('failure',o.handleFailure(p))!==false)i.defaultErrorHandler(p);this._complete(o);},_progress:function(o,event){this.inform('progress',o.handleProgress(event));},_complete:function(o){this._pending.remove(o);this._processQueue();if(!this._pending.length)this._inFlight=false;}});var n=function(o,p,q){this._name=o;this._file=p;this._data=q;this._success=null;this._response=null;this._progressEvent=null;};l(n.prototype,{getName:function(){return this._name;},getFile:function(){return this._file;},getData:function(){return this._data;},isComplete:function(){return this._success!==null;},isSuccess:function(){return this._success===true;},getResponse:function(){return this._response;},getProgressEvent:function(){return this._progressEvent;},handleSuccess:function(o){this._success=true;this._response=o;this._progressEvent=null;return this;},handleFailure:function(o){this._success=false;this._response=o;this._progressEvent=null;return this;},handleProgress:function(event){this._progressEvent=event;return this;}});e.exports=m;});
__d("AsyncUploadRequest",["AsyncUploadBase","Class","copyProperties"],function(a,b,c,d,e,f){var g=b('AsyncUploadBase'),h=b('Class'),i=b('copyProperties');function j(k){this.parent.construct(this,k);}j.isSupported=function(){return g.isSupported();};h.extend(j,g);i(j.prototype,{setFiles:function(k){this._files=this._parseFiles(k);return this;},send:function(){if(this._inFlight)return;this._inFlight=true;this._uploads=[];for(var k in this._files)this._files[k].forEach(function(l){this._uploads.push(this._createFileUpload(k,l));}.bind(this));if(this._uploads.length){this._waiting=this._uploads.slice(0);this._pending=[];this._processQueue();}else this._processUpload(this._createFileUpload(null,null));},_complete:function(k){this.parent._complete(k);if(!this._pending.length)this.inform('complete',this._uploads);}});e.exports=j;});
__d("BehaviorsMixin",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(l){this._behavior=l;this._enabled=false;}g(h.prototype,{enable:function(){if(!this._enabled){this._enabled=true;this._behavior.enable();}},disable:function(){if(this._enabled){this._enabled=false;this._behavior.disable();}}});var i=1;function j(l){if(!l.__BEHAVIOR_ID)l.__BEHAVIOR_ID=i++;return l.__BEHAVIOR_ID;}var k={enableBehavior:function(l){if(!this._behaviors)this._behaviors={};var m=j(l);if(!this._behaviors[m])this._behaviors[m]=new h(new l(this));this._behaviors[m].enable();return this;},disableBehavior:function(l){if(this._behaviors){var m=j(l);if(this._behaviors[m])this._behaviors[m].disable();}return this;},enableBehaviors:function(l){l.forEach(this.enableBehavior.bind(this));return this;},destroyBehaviors:function(){if(this._behaviors){for(var l in this._behaviors)this._behaviors[l].disable();this._behaviors={};}}};e.exports=k;});
__d("JSONPTransport",["DOM","HTML","URI","copyProperties"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('HTML'),i=b('URI'),j=b('copyProperties'),k={},l=2,m='jsonp',n='iframe';function o(p,q,r){this._type=p;this._uri=q;this._handler=r;k[this.getID()]=this;}j(o,{respond:function(p,q,r){var s=k[p];if(s){if(!r)delete k[p];if(s._type==n)q=JSON.parse(JSON.stringify(q));a.async_callback(s.handleResponse.bind(s),'json')(q);}else if(a.logJSError&&!r)a.logJSError('ajax',{error:'UnexpectedJsonResponse',extra:{id:p,uri:(q.payload&&q.payload.uri)||''}});}});j(o.prototype,{getID:function(){return this._id||(this._id=l++);},hasFinished:function(){return !(this.getID() in k);},getRequestURI:function(){return i(this._uri).addQueryData({__a:1,__adt:this.getID()});},createTransportFrame:function(){var p='transport_frame_'+this.getID(),q=h('<iframe class="hidden_elem" name="'+p+'" src="javascript:void(0)" />');return g.appendContent(document.body,q)[0];},send:function(){if(this._type===m){(function(){g.appendContent(document.body,g.create('script',{src:this.getRequestURI().toString(),type:'text/javascript'}));}).bind(this).defer();}else{this._iframe=this.createTransportFrame();this._iframe.src=this.getRequestURI().toString();}},handleResponse:function(p){if(!this._aborted)this._handler(p);if(this.hasFinished())if(this._iframe){g.remove.curry(this._iframe).defer();this._iframe=null;}},abort:function(){this._aborted=true;}});e.exports=o;});
__d("FileForm",["event-extensions","ArbiterMixin","AsyncRequest","AsyncUploadRequest","AsyncResponse","BehaviorsMixin","DataStore","DOMQuery","Env","Form","JSONPTransport","Parent","URI","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('AsyncRequest'),i=b('AsyncUploadRequest'),j=b('AsyncResponse'),k=b('BehaviorsMixin'),l=b('DataStore'),m=b('DOMQuery'),n=b('Env'),o=b('Form'),p=b('JSONPTransport'),q=b('Parent'),r=b('URI'),s=b('copyProperties');function t(v){var w={},x=m.scry(v,'input[type="file"]');x.forEach(function(y){w[y.name]=y.files;});return w;}function u(v,w,x){if(v.getAttribute('rel')==='async')throw new Error('FileForm cannot be used with Primer forms.');if(v.getAttribute('method').toUpperCase()!=='POST')throw new Error('FileForm must be used with POST forms.');this._form=v;this._previousEncoding=this._form.enctype;this._form.enctype=this._form.encoding='multipart/form-data';w&&this.enableBehaviors(w);this._options=x||{};this.setAllowCrossOrigin(this._options.allowCrossOrigin);this.setUploadInParallel(this._options.uploadInParallel);this._listener=Event.listen(this._form,'submit',this._submit.bind(this));l.set(this._form,'FileForm',this);}s(u,{EVENTS:['submit','initial','progress','success','failure'],getInstance:function(v){return l.get(v,'FileForm');}});s(u.prototype,g,k,{getRoot:function(){return this._form;},setAllowCrossOrigin:function(v){this._allowCrossOrigin=!!v;return this;},setUploadInParallel:function(v){this._uploadInParallel=!!v;return this;},_submit:function(event){if(this.inform('submit')===false){event.prevent();return;}var v='FormData' in window;if(v)if(!r(this._form.action).isSameOrigin()&&!this._allowCrossOrigin)v=false;return v?this._sendViaXHR(event):this._sendViaFrame(event);},_sendViaFrame:function(event){var v=new h();v.setStatusElement(this._getStatusElement());v.addStatusIndicator();v.setOption('useIframeTransport',true);var w=v.handleResponse.bind(v),x=new p('iframe',this._form.action,w),y=x.createTransportFrame(),z=x.getRequestURI().addQueryData({__iframe:true,__user:n.user});this._form.setAttribute('action',z.toString());this._form.setAttribute('target',y.name);v.setURI(z);v.setHandler(this.success.bind(this,null));v.setErrorHandler(this.failure.bind(this,null));v.setInitialHandler(this.initial.shield(this,null));},_sendViaXHR:function(event){var v;if(this._uploadInParallel&&i.isSupported()){v=new i().setData(o.serialize(this._form)).setFiles(t(this._form));var w=[v.subscribe('progress',function(x,y){this.progress(y,y.getProgressEvent());}.bind(this)),v.subscribe('initial',function(x,y){this.initial(y,y.getResponse());}.bind(this)),v.subscribe('success',function(x,y){this.success(y,y.getResponse());}.bind(this)),v.subscribe('failure',function(x,y){this.failure(y,y.getResponse());return false;}.bind(this)),v.subscribe('complete',function(){while(w.length)w.pop().unsubscribe();})];}else v=new h().setRawData(o.createFormData(this._form)).setHandler(this.success.bind(this,null)).setErrorHandler(this.failure.bind(this,null)).setUploadProgressHandler(this.progress.bind(this,null)).setInitialHandler(this.initial.shield(this,null));v.setAllowCrossOrigin(this._allowCrossOrigin).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send();event.prevent();},initial:function(v){return this.inform('initial',{upload:v});},success:function(v,w){var x={response:w,upload:v};if(this.inform('success',x)!==false)Event.fire(this._form,'success',x);},failure:function(v,w){var x={response:w,upload:v};if(this.inform('failure',x)!==false)if(Event.fire(this._form,'error',x)!==false)j.defaultErrorHandler(w);},progress:function(v,event){this.inform('progress',{event:event,upload:v});},destroy:function(){this._listener.remove();this._listener=null;this._form.enctype=this._form.encoding=this._previousEncoding;l.remove(this._form,'FileForm');},_getStatusElement:function(){return q.byClass(this._form,'stat_elem')||this._form;}});e.exports=u;});
__d("goOrReplace",["URI","UserAgent"],function(a,b,c,d,e,f){var g=b('URI'),h=b('UserAgent');function i(j,k,l){var m=new g(k);if(j.pathname=='/'&&m.getPath()!='/'&&m.isQuicklingEnabled()){var n=j.search?{}:{q:''};m=new g().setPath('/').setQueryData(n).setFragment(m.getUnqualifiedURI()).toString();k=m.toString();}if(l&&!(h.ie()<8)){j.replace(k);}else if(j.href==k){j.reload();}else j.href=k;}e.exports=i;});
__d("AjaxPipeRequest",["Arbiter","AsyncRequest","BigPipe","DOM","Env","JSCC","ScriptPathState","copyProperties","goOrReplace","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('BigPipe'),j=b('DOM'),k=b('Env'),l=b('JSCC'),m=b('ScriptPathState'),n=b('copyProperties'),o=b('goOrReplace'),p=b('ge'),q;function r(u,v){var w=p(u);if(w){if(!v)w.style.minHeight='600px';for(var x in i.pageletIDs)if(u!==x&&j.contains(w,x)){g.inform('ajaxpipe/clear_pagelet',{pagelet_id:x});l.clearForPagelet(x);delete i.pageletIDs[x];}j.empty(w);}}function s(u,v){var w=p(u);if(w)if(!v)w.style.minHeight='100px';}function t(u,v){this._uri=u;this._query_data=v;this._request=new h();this._canvas_id=null;this._allow_cross_page_transition=true;}n(t.prototype,{setCanvasId:function(u){this._canvas_id=u;return this;},setURI:function(u){this._uri=u;return this;},setData:function(u){this._query_data=u;return this;},getData:function(u){return this._query_data;},setAllowCrossPageTransition:function(u){this._allow_cross_page_transition=u;return this;},setAppend:function(u){this._append=u;return this;},send:function(){var u={ajaxpipe:1,ajaxpipe_token:k.ajaxpipe_token};n(u,m.getParams());m.reset();if(this._pageletCacheMiss)u.pcmiss=1;this._request.setOption('useIframeTransport',true).setURI(this._uri).setData(n(u,this._query_data)).setPreBootloadHandler(this._preBootloadHandler.bind(this)).setInitialHandler(this._onInitialResponse.bind(this)).setHandler(this._onResponse.bind(this)).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(this._allow_cross_page_transition);if(this._automatic){this._relevantRequest=q;}else q=this._request;this._request.send();return this;},_preBootloadFirstResponse:function(u){return false;},_fireDomContentCallback:function(){this._arbiter.inform('ajaxpipe/domcontent_callback',true,g.BEHAVIOR_STATE);},_fireOnloadCallback:function(){this._arbiter.inform('ajaxpipe/onload_callback',true,g.BEHAVIOR_STATE);},_isRelevant:function(u){return this._request==q||(this._automatic&&this._relevantRequest==q)||this._jsNonBlock||this._forceFinish;},_preBootloadHandler:function(u){var v=u.getPayload();if(!v||v.redirect||!this._isRelevant(u))return false;var w=false;if(u.is_first){!this._append&&!this._displayCallback&&r(this._canvas_id,this._constHeight);this._arbiter=new g();w=this._preBootloadFirstResponse(u);this.pipe=new i({arbiter:this._arbiter,rootNodeID:this._canvas_id,lid:this._request.lid,isAjax:true,domContentCallback:this._fireDomContentCallback.bind(this),onloadCallback:this._fireOnloadCallback.bind(this),domContentEvt:'ajaxpipe/domcontent_callback',onloadEvt:'ajaxpipe/onload_callback',jsNonBlock:this._jsNonBlock,forceFinish:this._forceFinish,automatic:this._automatic,displayCallback:this._displayCallback});}return w;},_redirect:function(u){if(u.redirect){if(u.force||!this.isPageActive(u.redirect)){var v=['ajaxpipe','ajaxpipe_token'].concat(this.getSanitizedParameters());o(window.location,URI(u.redirect).removeQueryData(v),true);}else PageTransitions.go(u.redirect,true);return true;}else return false;},isPageActive:function(u){return true;},getSanitizedParameters:function(){return [];},_versionCheck:function(u){return true;},_onInitialResponse:function(u){var v=u.getPayload();if(!this._isRelevant(u))return false;if(!v)return true;if(this._redirect(v)||!this._versionCheck(v))return false;return true;},_processFirstResponse:function(u){var v=u.getPayload();if(p(this._canvas_id)&&v.canvas_class!==null)CSS.setClass(this._canvas_id,v.canvas_class);},setFirstResponseCallback:function(u){this._firstResponseCallback=u;return this;},setFirstResponseHandler:function(u){this._processFirstResponse=u;return this;},_onResponse:function(u){var v=u.payload;if(!this._isRelevant(u))return h.suppressOnloadToken;if(u.is_first){this._processFirstResponse(u);this._firstResponseCallback&&this._firstResponseCallback();v.provides=v.provides||[];v.provides.push('uipage_onload');if(this._append)v.append=this._canvas_id;}if(v){if('content' in v.content&&this._canvas_id!==null&&this._canvas_id!='content'){v.content[this._canvas_id]=v.content.content;delete v.content.content;}if(this._pageletCacheMiss)if(u.is_first){v.id=this._pageletCacheMiss.id;v.cacheable=true;v.cache_controller=this._pageletCacheMiss.cache_controller;v.cache_type=this._pageletCacheMiss.cache_type;v.key=this._pageletCacheMiss.key;}else v.cache_parent=this._pageletCacheMiss.id;this.pipe.onPageletArrive(v);}if(u.is_last)s(this._canvas_id,this._constHeight);return h.suppressOnloadToken;},setNectarModuleDataSafe:function(u){this._request.setNectarModuleDataSafe(u);return this;},setFinallyHandler:function(u){this._request.setFinallyHandler(u);return this;},setErrorHandler:function(u){this._request.setErrorHandler(u);return this;},abort:function(){this._request.abort();if(q==this._request)q=null;this._request=null;return this;},setJSNonBlock:function(u){this._jsNonBlock=u;return this;},setForceFinish:function(u){this._forceFinish=u;return this;},setAutomatic:function(u){this._automatic=u;return this;},setDisplayCallback:function(u){this._displayCallback=u;return this;},setPageletCacheMiss:function(u){this._pageletCacheMiss=u;return this;},setConstHeight:function(u){this._constHeight=u;return this;},getAsyncRequest:function(){return this._request;}});n(t,{getCurrentRequest:function(){return q;},setCurrentRequest:function(u){q=u;}});e.exports=t;});
__d("Animation",["CSS","DOM","Style","UserAgent"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('Style'),j=b('UserAgent');function k(l){if(a==this){return new k(l);}else{this.obj=l;this._reset_state();this.queue=[];this.last_attr=null;}}k.resolution=20;k.offset=0;k.prototype._reset_state=function(){this.state={attrs:{},duration:500};};k.prototype.stop=function(){this._reset_state();this.queue=[];return this;};k.prototype._build_container=function(){if(this.container_div){this._refresh_container();return;}if(this.obj.firstChild&&this.obj.firstChild.__animation_refs){this.container_div=this.obj.firstChild;this.container_div.__animation_refs++;this._refresh_container();return;}var l=document.createElement('div');l.style.padding='0px';l.style.margin='0px';l.style.border='0px';l.__animation_refs=1;var m=this.obj.childNodes;while(m.length)l.appendChild(m[0]);this.obj.appendChild(l);this._orig_overflow=this.obj.style.overflow;this.obj.style.overflow='hidden';this.container_div=l;this._refresh_container();};k.prototype._refresh_container=function(){this.container_div.style.height='auto';this.container_div.style.width='auto';this.container_div.style.height=this.container_div.offsetHeight+'px';this.container_div.style.width=this.container_div.offsetWidth+'px';};k.prototype._destroy_container=function(){if(!this.container_div)return;if(!--this.container_div.__animation_refs){var l=this.container_div.childNodes;while(l.length)this.obj.appendChild(l[0]);this.obj.removeChild(this.container_div);}this.container_div=null;this.obj.style.overflow=this._orig_overflow;};k.ATTR_TO=1;k.ATTR_BY=2;k.ATTR_FROM=3;k.prototype._attr=function(l,m,n){l=l.replace(/-[a-z]/gi,function(p){return p.substring(1).toUpperCase();});var o=false;switch(l){case 'background':this._attr('backgroundColor',m,n);return this;case 'margin':m=k.parse_group(m);this._attr('marginBottom',m[0],n);this._attr('marginLeft',m[1],n);this._attr('marginRight',m[2],n);this._attr('marginTop',m[3],n);return this;case 'padding':m=k.parse_group(m);this._attr('paddingBottom',m[0],n);this._attr('paddingLeft',m[1],n);this._attr('paddingRight',m[2],n);this._attr('paddingTop',m[3],n);return this;case 'backgroundColor':case 'borderColor':case 'color':m=k.parse_color(m);break;case 'opacity':m=parseFloat(m,10);break;case 'height':case 'width':if(m=='auto'){o=true;}else m=parseInt(m,10);break;case 'borderWidth':case 'lineHeight':case 'fontSize':case 'marginBottom':case 'marginLeft':case 'marginRight':case 'marginTop':case 'paddingBottom':case 'paddingLeft':case 'paddingRight':case 'paddingTop':case 'bottom':case 'left':case 'right':case 'top':case 'scrollTop':case 'scrollLeft':m=parseInt(m,10);break;default:throw new Error(l+' is not a supported attribute!');}if(this.state.attrs[l]===undefined)this.state.attrs[l]={};if(o)this.state.attrs[l].auto=true;switch(n){case k.ATTR_FROM:this.state.attrs[l].start=m;break;case k.ATTR_BY:this.state.attrs[l].by=true;case k.ATTR_TO:this.state.attrs[l].value=m;break;}};k._get_box_width=function(l){var m=parseInt(i.get(l,'paddingLeft'),10),n=parseInt(i.get(l,'paddingRight'),10),o=parseInt(i.get(l,'borderLeftWidth'),10),p=parseInt(i.get(l,'borderRightWidth'),10);return l.offsetWidth-(m?m:0)-(n?n:0)-(o?o:0)-(p?p:0);};k._get_box_height=function(l){var m=parseInt(i.get(l,'paddingTop'),10),n=parseInt(i.get(l,'paddingBottom'),10),o=parseInt(i.get(l,'borderTopWidth'),10),p=parseInt(i.get(l,'borderBottomWidth'),10);return l.offsetHeight-(m?m:0)-(n?n:0)-(o?o:0)-(p?p:0);};k.prototype.to=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_TO);}else{this._attr(l,m,k.ATTR_TO);this.last_attr=l;}return this;};k.prototype.by=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_BY);}else{this._attr(l,m,k.ATTR_BY);this.last_attr=l;}return this;};k.prototype.from=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_FROM);}else{this._attr(l,m,k.ATTR_FROM);this.last_attr=l;}return this;};k.prototype.duration=function(l){this.state.duration=l?l:0;return this;};k.prototype.checkpoint=function(l,m){if(l===undefined)l=1;this.state.checkpoint=l;this.queue.push(this.state);this._reset_state();this.state.checkpointcb=m;return this;};k.prototype.blind=function(){this.state.blind=true;return this;};k.prototype.hide=function(){this.state.hide=true;return this;};k.prototype.show=function(){this.state.show=true;return this;};k.prototype.ease=function(l){this.state.ease=l;return this;};k.prototype.go=function(){var l=(new Date()).getTime();this.queue.push(this.state);for(var m=0;m<this.queue.length;m++){this.queue[m].start=l-k.offset;if(this.queue[m].checkpoint)l+=this.queue[m].checkpoint*this.queue[m].duration;}k.push(this);return this;};k.prototype._show=function(){g.show(this.obj);};k.prototype._hide=function(){g.hide(this.obj);};k.prototype._frame=function(l){var m=true,n=false,o=false,p;function q(aa){return document.documentElement[aa]||document.body[aa];}for(var r=0;r<this.queue.length;r++){var s=this.queue[r];if(s.start>l){m=false;continue;}if(s.checkpointcb){this._callback(s.checkpointcb,l-s.start);s.checkpointcb=null;}if(s.started===undefined){if(s.show)this._show();for(var t in s.attrs){if(s.attrs[t].start!==undefined)continue;switch(t){case 'backgroundColor':case 'borderColor':case 'color':p=k.parse_color(i.get(this.obj,t=='borderColor'?'borderLeftColor':t));if(s.attrs[t].by){s.attrs[t].value[0]=Math.min(255,Math.max(0,s.attrs[t].value[0]+p[0]));s.attrs[t].value[1]=Math.min(255,Math.max(0,s.attrs[t].value[1]+p[1]));s.attrs[t].value[2]=Math.min(255,Math.max(0,s.attrs[t].value[2]+p[2]));}break;case 'opacity':p=i.getOpacity(this.obj);if(s.attrs[t].by)s.attrs[t].value=Math.min(1,Math.max(0,s.attrs[t].value+p));break;case 'height':p=k._get_box_height(this.obj);if(s.attrs[t].by)s.attrs[t].value+=p;break;case 'width':p=k._get_box_width(this.obj);if(s.attrs[t].by)s.attrs[t].value+=p;break;case 'scrollLeft':case 'scrollTop':p=(this.obj===document.body)?q(t):this.obj[t];if(s.attrs[t].by)s.attrs[t].value+=p;s['last'+t]=p;break;default:p=parseInt(i.get(this.obj,t),10)||0;if(s.attrs[t].by)s.attrs[t].value+=p;break;}s.attrs[t].start=p;}if((s.attrs.height&&s.attrs.height.auto)||(s.attrs.width&&s.attrs.width.auto)){if(j.firefox()<3)o=true;this._destroy_container();for(var t in {height:1,width:1,fontSize:1,borderLeftWidth:1,borderRightWidth:1,borderTopWidth:1,borderBottomWidth:1,paddingLeft:1,paddingRight:1,paddingTop:1,paddingBottom:1})if(s.attrs[t])this.obj.style[t]=s.attrs[t].value+(typeof s.attrs[t].value=='number'?'px':'');if(s.attrs.height&&s.attrs.height.auto)s.attrs.height.value=k._get_box_height(this.obj);if(s.attrs.width&&s.attrs.width.auto)s.attrs.width.value=k._get_box_width(this.obj);}s.started=true;if(s.blind)this._build_container();}var u=(l-s.start)/s.duration;if(u>=1){u=1;if(s.hide)this._hide();}else m=false;var v=s.ease?s.ease(u):u;if(!n&&u!=1&&s.blind)n=true;if(o&&this.obj.parentNode){var w=this.obj.parentNode,x=this.obj.nextSibling;w.removeChild(this.obj);}for(var t in s.attrs)switch(t){case 'backgroundColor':case 'borderColor':case 'color':if(s.attrs[t].start[3]!=s.attrs[t].value[3]){this.obj.style[t]='rgba('+k.calc_tween(v,s.attrs[t].start[0],s.attrs[t].value[0],true)+','+k.calc_tween(v,s.attrs[t].start[1],s.attrs[t].value[1],true)+','+k.calc_tween(v,s.attrs[t].start[2],s.attrs[t].value[2],true)+','+k.calc_tween(v,s.attrs[t].start[3],s.attrs[t].value[3],false)+')';}else this.obj.style[t]='rgb('+k.calc_tween(v,s.attrs[t].start[0],s.attrs[t].value[0],true)+','+k.calc_tween(v,s.attrs[t].start[1],s.attrs[t].value[1],true)+','+k.calc_tween(v,s.attrs[t].start[2],s.attrs[t].value[2],true)+')';break;case 'opacity':i.set(this.obj,'opacity',k.calc_tween(v,s.attrs[t].start,s.attrs[t].value));break;case 'height':case 'width':this.obj.style[t]=v==1&&s.attrs[t].auto?'auto':k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true)+'px';break;case 'scrollLeft':case 'scrollTop':var y=this.obj===document.body;p=y?q(t):this.obj[t];if(s['last'+t]!==p){delete s.attrs[t];}else{var z=k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true);if(!y){z=this.obj[t]=z;}else{if(t=='scrollLeft'){a.scrollTo(z,q('scrollTop'));}else a.scrollTo(q('scrollLeft'),z);z=q(t);}s['last'+t]=z;}break;default:this.obj.style[t]=k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true)+'px';break;}if(u==1){this.queue.splice(r--,1);this._callback(s.ondone,l-s.start-s.duration);}}if(o)w[x?'insertBefore':'appendChild'](this.obj,x);if(!n&&this.container_div)this._destroy_container();return !m;};k.prototype.ondone=function(l){this.state.ondone=l;return this;};k.prototype._callback=function(l,m){if(l){k.offset=m;l.call(this);k.offset=0;}};k.calc_tween=function(l,m,n,o){return (o?parseInt:parseFloat)((n-m)*l+m,10);};k.parse_color=function(l){var m=/^#([a-f0-9]{1,2})([a-f0-9]{1,2})([a-f0-9]{1,2})$/i.exec(l);if(m){return [parseInt(m[1].length==1?m[1]+m[1]:m[1],16),parseInt(m[2].length==1?m[2]+m[2]:m[2],16),parseInt(m[3].length==1?m[3]+m[3]:m[3],16),1];}else{var n=/^rgba? *\(([0-9]+), *([0-9]+), *([0-9]+)(?:, *([0-9]+))?\)$/.exec(l);if(n){return [parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),n[4]?parseFloat(n[4]):1];}else if(l=='transparent'){return [255,255,255,0];}else throw 'Named color attributes are not supported.';}};k.parse_group=function(l){l=l.trim().split(/ +/);if(l.length==4){return l;}else if(l.length==3){return [l[0],l[1],l[2],l[1]];}else if(l.length==2){return [l[0],l[1],l[0],l[1]];}else return [l[0],l[0],l[0],l[0]];};k.push=function(l){if(!k.active)k.active=[];k.active.push(l);if(k.active.length===1){if(!k.requestAnimationFrame){var m=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame;if(m)k.requestAnimationFrame=m.bind(a);}if(k.requestAnimationFrame){k.requestAnimationFrame(k._animate);}else k.timeout=setInterval(k._animate,k.resolution,false);}if(k.requestAnimationFrame)k._updateEndingTimer();k._animate(Date.now(),true);};k._updateEndingTimer=function(){if(!k.requestAnimationFrame)throw new Error('Ending timer only valid with requestAnimationFrame');var l=0;for(var m=0;m<k.active.length;m++){var n=k.active[m];for(var o=0;o<n.queue.length;o++){var p=n.queue[o].start+n.queue[o].duration;if(p>l)l=p;}}if(k.timeout){clearTimeout(k.timeout);delete k.timeout;}var q=Date.now();if(l>q)k.timeout=setTimeout(k._animate.shield(),l-q,false);};k._animate=function(l,m){l=l||Date.now();for(var n=(m===true)?k.active.length-1:0;n<k.active.length;n++)try{if(!k.active[n]._frame(l))k.active.splice(n--,1);}catch(o){k.active.splice(n--,1);}if(k.active.length===0){if(k.timeout){if(k.requestAnimationFrame){clearTimeout(k.timeout);}else clearInterval(k.timeout);delete k.timeout;}}else if(k.requestAnimationFrame)k.requestAnimationFrame(k._animate);};k.ease={};k.ease.begin=function(l){return Math.sin(Math.PI/2*(l-1))+1;};k.ease.end=function(l){return Math.sin(.5*Math.PI*l);};k.ease.both=function(l){return .5*Math.sin(Math.PI*(l-.5))+.5;};k.prependInsert=function(l,m){k.insert(l,m,h.prependContent);};k.appendInsert=function(l,m){k.insert(l,m,h.appendContent);};k.insert=function(l,m,n){i.set(m,'opacity',0);n(l,m);new k(m).from('opacity',0).to('opacity',1).duration(400).go();};e.exports=k;});
__d("CSSSupport",[],function(a,b,c,d,e,f){var g={supportsBorderRadius:function(){var h=['KhtmlBorderRadius','OBorderRadius','MozBorderRadius','WebkitBorderRadius','msBorderRadius','borderRadius'],i=false,j=document.createElement('div');for(var k=h.length;k>=0;k--)if(i=j.style[h[k]]!==undefined)break;g.supportsBorderRadius=bagof(i);return i;}};e.exports=g;});
__d("Keys",[],function(a,b,c,d,e,f){var g={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188};e.exports=g;});
__d("Locale",["Style"],function(a,b,c,d,e,f){var g=b('Style'),h,i={isRTL:function(){if(h===undefined)h=('rtl'===g.get(document.body,'direction'));return h;}};e.exports=i;});
__d("Vector",["event-extensions","DOMDimensions","DOMPosition","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOMDimensions'),h=b('DOMPosition'),i=b('copyProperties');function j(k,l,m){i(this,{x:parseFloat(k),y:parseFloat(l),domain:m||'pure'});}i(j.prototype,{toString:function(){return '('+this.x+', '+this.y+')';},add:function(k,l){if(arguments.length==1){if(k.domain!='pure')k=k.convertTo(this.domain);return this.add(k.x,k.y);}var m=parseFloat(k),n=parseFloat(l);return new j(this.x+m,this.y+n,this.domain);},mul:function(k,l){if(typeof l=="undefined")l=k;return new j(this.x*k,this.y*l,this.domain);},sub:function(k,l){if(arguments.length==1){return this.add(k.mul(-1));}else return this.add(-k,-l);},distanceTo:function(k){return this.sub(k).magnitude();},magnitude:function(){return Math.sqrt((this.x*this.x)+(this.y*this.y));},convertTo:function(k){if(k!='pure'&&k!='viewport'&&k!='document')return new j(0,0);if(k==this.domain)return new j(this.x,this.y,this.domain);if(k=='pure')return new j(this.x,this.y);if(this.domain=='pure')return new j(0,0);var l=j.getScrollPosition('document'),m=this.x,n=this.y;if(this.domain=='document'){m-=l.x;n-=l.y;}else{m+=l.x;n+=l.y;}return new j(m,n,k);},setElementPosition:function(k){var l=this.convertTo('document');k.style.left=parseInt(l.x)+'px';k.style.top=parseInt(l.y)+'px';return this;},setElementDimensions:function(k){return this.setElementWidth(k).setElementHeight(k);},setElementWidth:function(k){k.style.width=parseInt(this.x,10)+'px';return this;},setElementHeight:function(k){k.style.height=parseInt(this.y,10)+'px';return this;},scrollElementBy:function(k){if(k==document.body){window.scrollBy(this.x,this.y);}else{k.scrollLeft+=this.x;k.scrollTop+=this.y;}return this;}});i(j,{getEventPosition:function(k,l){l=l||'document';var m=Event.getPosition(k),n=new j(m.x,m.y,'document');return n.convertTo(l);},getScrollPosition:function(k){k=k||'document';var l=h.getScrollPosition();return new j(l.x,l.y,'document').convertTo(k);},getElementPosition:function(k,l){l=l||'document';var m=h.getElementPosition(k);return new j(m.x,m.y,'viewport').convertTo(l);},getElementDimensions:function(k){var l=g.getElementDimensions(k);return new j(l.width,l.height);},getViewportDimensions:function(){var k=g.getViewportDimensions();return new j(k.width,k.height,'viewport');},getDocumentDimensions:function(k){var l=g.getDocumentDimensions(k);return new j(l.width,l.height,'document');},deserialize:function(k){var l=k.split(',');return new j(l[0],l[1]);}});e.exports=j;});
__d("getOverlayZIndex",["Style"],function(a,b,c,d,e,f){var g=b('Style');function h(i,j){j=j||document.body;var k=[];while(i&&i!==j){k.push(i);i=i.parentNode;}if(i!==j)return 0;for(var l=k.length-1;l>=0;l--){var m=k[l];if(g.get(m,'position')!='static'){var n=parseInt(g.get(m,'z-index'),10);if(!isNaN(n))return n;}}return 0;}e.exports=h;});
__d("Dialog",["array-extensions","event-extensions","AjaxPipeRequest","Animation","Arbiter","AsyncRequest","Bootloader","Button","CSS","CSSSupport","DOM","Form","HTML","Input","Keys","Locale","Parent","Run","Style","URI","UserAgent","Vector","bind","copyProperties","createArrayFrom","getObjectValues","getOverlayZIndex","tx"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('AjaxPipeRequest'),h=b('Animation'),i=b('Arbiter'),j=b('AsyncRequest'),k=b('Bootloader'),l=b('Button'),m=b('CSS'),n=b('CSSSupport'),o=b('DOM'),p=b('Form'),q=b('HTML'),r=b('Input'),s=b('Keys'),t=b('Locale'),u=b('Parent'),v=b('Run'),w=b('Style'),x=b('URI'),y=b('UserAgent'),z=b('Vector'),aa=b('bind'),ba=b('copyProperties'),ca=b('createArrayFrom'),da=b('getObjectValues'),ea=b('getOverlayZIndex'),fa=b('tx'),ga=function(){var ia=document.body,ja=document.createElement('div'),ka=document.createElement('div');ia.insertBefore(ja,ia.firstChild);ia.insertBefore(ka,ia.firstChild);ja.style.position='fixed';ja.style.top='20px';var la=ja.offsetTop!==ka.offsetTop;ia.removeChild(ja);ia.removeChild(ka);ga=bagof(la);return la;};function ha(ia){this._show_loading=true;this._auto_focus=true;this._submit_on_enter=false;this._fade_enabled=true;this._onload_handlers=[];this._top=125;this._uniqueID='dialog_'+ha._globalCount++;this._content=null;this._obj=null;this._popup=null;this._overlay=null;this._shim=null;this._causal_elem=null;this._previous_focus=null;this._buttons=[];this._buildDialog();if(ia)this._setFromModel(ia);ha._init();}ba(ha,{OK:{name:'ok',label:"Okay"},CANCEL:{name:'cancel',label:"Cancel",className:'inputaux'},CLOSE:{name:'close',label:"Close"},NEXT:{name:'next',label:"Next"},SAVE:{name:'save',label:"Save"},SUBMIT:{name:'submit',label:"Submit"},CONFIRM:{name:'confirm',label:"Confirm"},DELETE:{name:'delete',label:"Delete"},_globalCount:0,_bottoms:[0],max_bottom:0,_updateMaxBottom:function(){ha.max_bottom=Math.max.apply(Math,ha._bottoms);}});ba(ha,{OK_AND_CANCEL:[ha.OK,ha.CANCEL],_STANDARD_BUTTONS:[ha.OK,ha.CANCEL,ha.CLOSE,ha.SAVE,ha.SUBMIT,ha.CONFIRM,ha.DELETE],SIZE:{WIDE:555,STANDARD:445},_HALO_WIDTH:10,_BORDER_WIDTH:1,_PADDING_WIDTH:10,_PAGE_MARGIN:40,_stack:[],_isUsingCSSBorders:function(){return n.supportsBorderRadius()||y.ie()<7;},newButton:function(ia,ja,ka,la){var ma={name:ia,label:ja};if(ka)ma.className=ka;if(la)ma.handler=la;return ma;},getCurrent:function(){var ia=ha._stack;return ia.length?ia[ia.length-1]:null;},hideCurrent:function(){var ia=ha.getCurrent();ia&&ia.hide();},bootstrap:function(ia,ja,ka,la,ma,na){ja=ja||{};ba(ja,new x(ia).getQueryData());la=la||(ka?'GET':'POST');var oa=u.byClass(na,'stat_elem')||na;if(oa&&m.hasClass(oa,'async_saving'))return false;var pa=new j().setReadOnly(!!ka).setMethod(la).setRelativeTo(na).setStatusElement(oa).setURI(ia).setNectarModuleDataSafe(na).setData(ja),qa=new ha(ma).setCausalElement(na).setAsync(pa);qa.show();return false;},showFromModel:function(ia,ja){var ka=new ha(ia).setCausalElement(ja).show();if(ia.hiding)ka.hide();},_init:function(){this._init=bagofholding;v.onLeave(ha._tearDown.shield(null,false));i.subscribe('page_transition',ha._tearDown.shield(null,true));Event.listen(document.documentElement,'keydown',function(event){if(Event.getKeyCode(event)==s.ESC&&!event.getModifiers().any){if(ha._escape())event.kill();}else if(Event.getKeyCode(event)==s.RETURN&&!event.getModifiers().any)if(ha._enter())event.kill();});Event.listen(window,'resize',function(event){var ia=ha.getCurrent();ia&&ia._resetDialogObj();});},_findButton:function(ia,ja){if(ia)for(var ka=0;ka<ia.length;++ka)if(ia[ka].name==ja)return ia[ka];return null;},_tearDown:function(ia){var ja=ha._stack.slice();for(var ka=ja.length-1;ka>=0;ka--)if((ia&&!ja[ka]._cross_transition)||(!ia&&!ja[ka]._cross_quickling))ja[ka].hide();},_escape:function(){var ia=ha.getCurrent();if(!ia)return false;var ja=ia._semi_modal,ka=ia._buttons;if(!ka.length&&!ja)return false;if(ja&&!ka.length){ia.hide();return true;}var la,ma=ha._findButton(ka,'cancel');if(ia._cancelHandler){ia.cancel();return true;}else if(ma){la=ma;}else if(ka.length==1){la=ka[0];}else return false;ia._handleButton(la);return true;},_enter:function(){var ia=ha.getCurrent();if(!ia||!ia._submit_on_enter)return false;if(document.activeElement!=ia._frame)return false;var ja=ia._buttons;if(!ja)return false;ia._handleButton(ja[0]);return true;},call_or_eval:function(ia,ja,ka){if(!ja)return undefined;ka=ka||{};if(typeof ja=='string'){var la=Object.keys(ka).join(', ');ja=(eval)('({f: function('+la+') { '+ja+'}})').f;}return ja.apply(ia,da(ka));}});ba(ha.prototype,{_cross_quickling:false,_cross_transition:false,_loading:false,_showing:false,show:function(){this._showing=true;if(this._async_request){if(this._show_loading)this.showLoading();}else this._update();return this;},showLoading:function(){this._loading=true;m.addClass(this._frame,'dialog_loading_shown');this._renderDialog();return this;},hide:function(){if(!this._showing&&!this._loading)return this;this._showing=false;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}if(this._fade_enabled&&ha._stack.length<=1){this._fadeOut();}else this._hide();return this;},cancel:function(){if(!this._cancelHandler||this._cancelHandler()!==false)this.hide();},getRoot:function(){return this._obj;},getBody:function(){return o.scry(this._obj,'div.dialog_body')[0];},getButtonElement:function(ia){if(typeof ia=='string')ia=ha._findButton(this._buttons,ia);if(!ia||!ia.name)return null;var ja=o.scry(this._popup,'input'),ka=function(la){return la.name==ia.name;};return ja.filter(ka)[0]||null;},getContentNode:function(){return o.find(this._content,'div.dialog_content');},getFormData:function(){return p.serialize(this.getContentNode());},setAllowCrossPageTransition:function(ia){this._cross_transition=ia;return this;},setAllowCrossQuicklingNavigation:function(ia){this._cross_quickling=ia;return this;},setShowing:function(){this.show();return this;},setHiding:function(){this.hide();return this;},setTitle:function(ia){var ja=this._nodes.title,ka=this._nodes.title_inner,la=this._nodes.content;o.setContent(ka,this._format(ia||''));m.conditionShow(ja,!!ia);m.conditionClass(la,'dialog_content_titleless',!ia);return this;},setBody:function(ia){o.setContent(this._nodes.body,this._format(ia));return this;},setExtraData:function(ia){this._extra_data=ia;return this;},setReturnData:function(ia){this._return_data=ia;return this;},setShowLoading:function(ia){this._show_loading=ia;return this;},setFullBleed:function(ia){this._full_bleed=ia;this._updateWidth();m.conditionClass(this._obj,'full_bleed',ia);return this;},setCausalElement:function(ia){this._causal_elem=ia;return this;},setUserData:function(ia){this._user_data=ia;return this;},getUserData:function(){return this._user_data;},setAutohide:function(ia){if(ia){if(this._showing){this._autohide_timeout=setTimeout(this.hide.shield(this),ia);}else this._autohide=ia;}else{this._autohide=null;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}}return this;},setSummary:function(ia){var ja=this._nodes.summary;o.setContent(ja,this._format(ia||''));m.conditionShow(ja,!!ia);return this;},setButtons:function(ia){var ja,ka;if(!(ia instanceof Array)){ja=ca(arguments);}else ja=ia;for(var la=0;la<ja.length;++la)if(typeof ja[la]=='string'){ka=ha._findButton(ha._STANDARD_BUTTONS,ja[la]);ja[la]=ka;}this._buttons=ja;var ma=[];if(ja&&ja.length>0)for(var na=0;na<ja.length;na++){ka=ja[na];var oa=o.create('input',{type:'button',name:ka.name||'',value:ka.label}),pa=o.create('label',{className:'uiButton uiButtonLarge uiButtonConfirm'},oa);if(ka.className){ka.className.split(/\s+/).forEach(function(ra){m.addClass(pa,ra);});if(m.hasClass(pa,'inputaux')){m.removeClass(pa,'inputaux');m.removeClass(pa,'uiButtonConfirm');}if(m.hasClass(pa,'uiButtonSpecial'))m.removeClass(pa,'uiButtonConfirm');}if(ka.icon)o.prependContent(pa,o.create('img',{src:ka.icon,className:'img mrs'}));if(ka.disabled)l.setEnabled(pa,false);Event.listen(oa,'click',this._handleButton.bind(this,ka.name));for(var qa in ka)if(qa.indexOf('data-')===0&&qa.length>5)oa.setAttribute(qa,ka[qa]);ma.push(pa);}o.setContent(this._nodes.buttons,ma);this._updateButtonVisibility();return this;},setButtonsMessage:function(ia){o.setContent(this._nodes.button_message,this._format(ia||''));this._has_button_message=!!ia;this._updateButtonVisibility();return this;},_updateButtonVisibility:function(){var ia=this._buttons.length>0||this._has_button_message;m.conditionShow(this._nodes.button_wrapper,ia);m.conditionClass(this._obj,'omitDialogFooter',!ia);},setClickButtonOnEnter:function(ia,ja){this._clickOnEnterTarget=ia;if(!this._clickOnEnterListener)this._clickOnEnterListener=Event.listen(this._nodes.body,'keypress',function(event){var ka=event.getTarget();if(ka&&ka.id===this._clickOnEnterTarget)if(Event.getKeyCode(event)==s.RETURN){this._handleButton(ja);event.kill();}return true;}.bind(this));return this;},setStackable:function(ia,ja){this._is_stackable=ia;this._shown_while_stacked=ia&&ja;return this;},setHandler:function(ia){this._handler=ia;return this;},setCancelHandler:function(ia){this._cancelHandler=ha.call_or_eval.bind(null,this,ia);return this;},setCloseHandler:function(ia){this._close_handler=ha.call_or_eval.bind(null,this,ia);return this;},clearHandler:function(){return this.setHandler(null);},setPostURI:function(ia,ja){if(ja===undefined)ja=true;if(ja){this.setHandler(this._submitForm.bind(this,'POST',ia));}else this.setHandler(function(){p.post(ia,this.getFormData());this.hide();}.bind(this));return this;},setGetURI:function(ia){this.setHandler(this._submitForm.bind(this,'GET',ia));return this;},setModal:function(ia){this._modal=ia;m.conditionClass(this._obj,'generic_dialog_modal',ia);return this;},setSemiModal:function(ia){if(ia){this.setModal(true);this._semiModalListener=Event.listen(this._obj,'click',function(ja){if(!o.contains(this._popup,ja.getTarget()))this.hide();}.bind(this));}else this._semiModalListener&&this._semiModalListener.remove();this._semi_modal=ia;return this;},setWideDialog:function(ia){this._wide_dialog=ia;this._updateWidth();return this;},setContentWidth:function(ia){this._content_width=ia;this._updateWidth();return this;},setTitleLoading:function(ia){if(ia===undefined)ia=true;var ja=o.find(this._popup,'h2.dialog_title');if(ja)m.conditionClass(ja,'loading',ia);return this;},setSecure:function(ia){m.conditionClass(this._nodes.title,'secure',ia);return this;},setClassName:function(ia){ia.split(/\s+/).forEach(m.addClass.bind(m,this._obj));return this;},setFadeEnabled:function(ia){this._fade_enabled=ia;return this;},setFooter:function(ia){var ja=this._nodes.footer;o.setContent(ja,this._format(ia||''));m.conditionShow(ja,!!ia);return this;},setAutoFocus:function(ia){this._auto_focus=ia;return this;},setTop:function(ia){this._top=ia;this._resetDialogObj();return this;},onloadRegister:function(ia){ca(ia).forEach(function(ja){if(typeof ja=='string')ja=new Function(ja);this._onload_handlers.push(ja.bind(this));}.bind(this));return this;},setAsyncURL:function(ia){return this.setAsync(new j(ia));},setAsync:function(ia){var ja=function(ra){if(this._async_request!=ia)return;this._async_request=null;var sa=ra.getPayload(),ta=sa;if(this._loading)this._showing=true;if(typeof ta=='string'){this.setBody(ta);}else this._setFromModel(ta);this._update();}.bind(this),ka=ia.getData();ka.__d=1;ia.setData(ka);var la=ia.getHandler()||bagofholding;ia.setHandler(function(ra){la(ra);ja(ra);});var ma=ia,na=ma.getErrorHandler()||bagofholding,oa=ma.getTransportErrorHandler()||bagofholding,pa=function(){this._async_request=null;this._loading=false;if(this._showing&&this._shown_while_stacked){this._update();}else this._hide(this._is_stackable);}.bind(this),qa=ma.getServerDialogCancelHandler()||pa;ma.setAllowCrossPageTransition(this._cross_transition).setErrorHandler(function(ra){pa();na(ra);}).setTransportErrorHandler(function(ra){pa();oa(ra);}).setServerDialogCancelHandler(qa);ia.send();this._async_request=ia;if(this._showing)this.show();return this;},_format:function(ia){if(typeof ia=='string'){ia=q(ia);}else ia=q.replaceJSONWrapper(ia);if(ia instanceof q)ia.setDeferred(true);return ia;},_update:function(){if(!this._showing)return;if(this._autohide&&!this._async_request&&!this._autohide_timeout)this._autohide_timeout=setTimeout(aa(this,'hide'),this._autohide);m.removeClass(this._frame,'dialog_loading_shown');this._loading=false;this._renderDialog();this._runOnloads();this._previous_focus=document.activeElement;r.focus(this._frame);},_runOnloads:function(){for(var ia=0;ia<this._onload_handlers.length;++ia)try{this._onload_handlers[ia]();}catch(ja){}this._onload_handlers=[];},_updateWidth:function(){var ia=2*ha._BORDER_WIDTH;if(ha._isUsingCSSBorders())ia+=2*ha._HALO_WIDTH;if(this._content_width){ia+=this._content_width;if(!this._full_bleed)ia+=2*ha._PADDING_WIDTH;}else if(this._wide_dialog){ia+=ha.SIZE.WIDE;}else ia+=ha.SIZE.STANDARD;this._popup.style.width=ia+'px';},_updateZIndex:function(){if(!this._hasSetZIndex&&this._causal_elem){var ia=ea(this._causal_elem);this._hasSetZIndex=ia>(this._modal?400:200);w.set(this._obj,'z-index',this._hasSetZIndex?ia:'');}},_renderDialog:function(){this._updateZIndex();this._pushOntoStack();this._obj.style.height=(this._modal&&y.ie()<7)?z.getDocumentDimensions().y+'px':null;if(this._obj&&this._obj.style.display){this._obj.style.visibility='hidden';this._obj.style.display='';this.resetDialogPosition();this._obj.style.visibility='';this._obj.dialog=this;}else this.resetDialogPosition();clearInterval(this.active_hiding);this.active_hiding=setInterval(this._activeResize.bind(this),500);this._submit_on_enter=false;if(this._auto_focus){var ia=p.getFirstElement(this._content,['input[type="text"]','textarea','input[type="password"]']);if(ia){p.focusFirst.bind(this,this._content).defer();}else this._submit_on_enter=true;}var ja=z.getElementDimensions(this._content).y+z.getElementPosition(this._content).y;ha._bottoms.push(ja);this._bottom=ja;ha._updateMaxBottom();return this;},_buildDialog:function(){this._obj=o.create('div',{className:'generic_dialog',id:this._uniqueID});this._obj.style.display='none';o.appendContent(document.body,this._obj);if(!this._popup)this._popup=o.create('div',{className:'generic_dialog_popup'});this._obj.appendChild(this._popup);if(y.ie()<7&&!this._shim)k.loadModules(['IframeShim'],function(ua){this._shim=new ua(this._popup);});m.addClass(this._obj,'pop_dialog');if(t.isRTL())m.addClass(this._obj,'pop_dialog_rtl');var ia;if(ha._isUsingCSSBorders()){ia='<div class="pop_container_advanced">'+'<div class="pop_content" id="pop_content"></div>'+'</div>';}else ia='<div class="pop_container">'+'<div class="pop_verticalslab"></div>'+'<div class="pop_horizontalslab"></div>'+'<div class="pop_topleft"></div>'+'<div class="pop_topright"></div>'+'<div class="pop_bottomright"></div>'+'<div class="pop_bottomleft"></div>'+'<div class="pop_content pop_content_old" id="pop_content"></div>'+'</div>';o.setContent(this._popup,q(ia));var ja=o.find(this._popup,'div.pop_content');ja.setAttribute('tabIndex','0');ja.setAttribute('role','alertdialog');this._frame=this._content=ja;var ka=o.create('div',{className:'dialog_loading'},"Loading..."),la=o.create('span'),ma=o.create('h2',{className:'dialog_title hidden_elem',id:'title_'+this._uniqueID},la),na=o.create('div',{className:'dialog_summary hidden_elem'}),oa=o.create('div',{className:'dialog_body'}),pa=o.create('div'),qa=o.create('div',{className:'dialog_buttons_msg'}),ra=o.create('div',{className:'dialog_buttons clearfix hidden_elem'},[qa,pa]),sa=o.create('div',{className:'dialog_footer hidden_elem'}),ta=o.create('div',{className:'dialog_content'},[na,oa,ra,sa]);this._nodes={summary:na,body:oa,buttons:pa,button_message:qa,button_wrapper:ra,footer:sa,content:ta,title:ma,title_inner:la};o.setContent(this._frame,[ma,ta,ka]);},_updateShim:function(){return this._shim&&this._shim.show();},_activeResize:function(){if(this.last_offset_height!=this._content.offsetHeight){this.last_offset_height=this._content.offsetHeight;this.resetDialogPosition();}},resetDialogPosition:function(){if(!this._popup)return;this._resetDialogObj();this._updateShim();},_resetDialogObj:function(){var ia=2*ha._PAGE_MARGIN,ja=z.getViewportDimensions(),ka=ja.x-ia,la=ja.y-ia,ma=2*ha._HALO_WIDTH,na=z.getElementDimensions(this._content),oa=na.x+ma,pa=na.y+ma,qa=this._top,ra=ka-oa,sa=la-pa;if(sa<0){qa=ha._PAGE_MARGIN;}else if(qa>sa)qa=ha._PAGE_MARGIN+(Math.max(sa,0)/2);var ta=ga();if(!ta)qa+=z.getScrollPosition().y;w.set(this._popup,'marginTop',qa+'px');var ua=ta&&(ra<0||sa<0);m.conditionClass(this._obj,'generic_dialog_fixed_overflow',ua);m.conditionClass(document.documentElement,'generic_dialog_overflow_mode',ua);},_fadeOut:function(ia){if(!this._popup)return;try{new h(this._obj).duration(0).checkpoint().to('opacity',0).hide().duration(250).ondone(this._hide.bind(this,ia)).go();}catch(ja){this._hide(ia);}},_hide:function(ia){if(this._obj)this._obj.style.display='none';m.removeClass(document.documentElement,'generic_dialog_overflow_mode');this._updateShim();clearInterval(this.active_hiding);if(this._bottom){var ja=ha._bottoms;ja.splice(ja.indexOf(this._bottom),1);ha._updateMaxBottom();}if(this._previous_focus&&document.activeElement&&o.contains(this._obj,document.activeElement))r.focus(this._previous_focus);if(ia)return;this.destroy();},destroy:function(){this._popFromStack();if(this._obj){o.remove(this._obj);this._obj=null;this._shim&&this._shim.hide();this._shim=null;}this._clickOnEnterListener&&this._clickOnEnterListener.remove();if(this._close_handler)this._close_handler({return_data:this._return_data});},_handleButton:function(ia){if(typeof ia=='string')ia=ha._findButton(this._buttons,ia);var ja=ha.call_or_eval(ia,ia.handler);if(ja===false)return;if(ia.name=='cancel'){this.cancel();}else if(ha.call_or_eval(this,this._handler,{button:ia})!==false)this.hide();},_submitForm:function(ia,ja,ka){var la=this.getFormData();if(ka)la[ka.name]=ka.label;if(this._extra_data)ba(la,this._extra_data);var ma=new j().setURI(ja).setData(la).setMethod(ia).setNectarModuleDataSafe(this._causal_elem).setReadOnly(ia=='GET');this.setAsync(ma);return false;},_setFromModel:function(ia){var ja={};ba(ja,ia);for(var ka in ja){if(ka=='onloadRegister'){this.onloadRegister(ja[ka]);continue;}var la=this['set'+ka.substr(0,1).toUpperCase()+ka.substr(1)];la.apply(this,ca(ja[ka]));}},_updateBottom:function(){var ia=z.getElementDimensions(this._content).y+z.getElementPosition(this._content).y;ha._bottoms[ha._bottoms.length-1]=ia;ha._updateMaxBottom();},_pushOntoStack:function(){var ia=ha._stack;if(!ia.length)i.inform('layer_shown',{type:'Dialog'});ia.remove(this);ia.push(this);for(var ja=ia.length-2;ja>=0;ja--){var ka=ia[ja];if(!ka._is_stackable&&!ka._async_request){ka._hide();}else if(!ka._shown_while_stacked)ka._hide(true);}},_popFromStack:function(){var ia=ha._stack,ja=(ia[ia.length-1]===this);ia.remove(this);if(ia.length){if(ja)ia[ia.length-1].show();}else i.inform('layer_hidden',{type:'Dialog'});}});e.exports=ha;});
__d("ViewportBounds",["Style","ge"],function(a,b,c,d,e,f){var g=b('Style'),h=b('ge'),i={top:[],right:[],bottom:[],left:[]};function j(n){return function(){var o=0;i[n].forEach(function(p){o=Math.max(o,p.getSize());});return o;};}function k(n){return function(o){return new l(n,o);};}function l(n,o){this.getSide=bagof(n);this.getSize=function(){return typeof o==='function'?o():o;};i[n].push(this);}l.prototype.remove=function(){i[this.getSide()].remove(this);};var m={getTop:j('top'),getRight:j('right'),getBottom:j('bottom'),getLeft:j('left'),addTop:k('top'),addRight:k('right'),addBottom:k('bottom'),addLeft:k('left')};m.addTop(function(){var n=h('blueBar');if(n&&g.isFixed(n))return h('blueBarHolder').offsetHeight;return 0;});e.exports=m;});
__d("DOMScroll",["Animation","Arbiter","DOM","DOMQuery","UserAgent","Vector","ViewportBounds","ge"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('DOM'),j=b('DOMQuery'),k=b('UserAgent'),l=b('Vector'),m=b('ViewportBounds'),n=b('ge'),o={SCROLL:'dom-scroll',getScrollState:function(){var p=l.getViewportDimensions(),q=l.getDocumentDimensions(),r=(q.x>p.x),s=(q.y>p.y);r+=0;s+=0;return new l(r,s);},_scrollbarSize:null,_initScrollbarSize:function(){var p=i.create('p');p.style.width='100%';p.style.height='200px';var q=i.create('div');q.style.position='absolute';q.style.top='0px';q.style.left='0px';q.style.visibility='hidden';q.style.width='200px';q.style.height='150px';q.style.overflow='hidden';q.appendChild(p);document.body.appendChild(q);var r=p.offsetWidth;q.style.overflow='scroll';var s=p.offsetWidth;if(r==s)s=q.clientWidth;document.body.removeChild(q);o._scrollbarSize=r-s;},getScrollbarSize:function(){if(o._scrollbarSize===null)o._initScrollbarSize();return o._scrollbarSize;},scrollTo:function(p,q,r,s,t){if(typeof q=='undefined'||q===true)q=750;if(k.osx()===10.8&&k.safari()===536.25&&!k.chrome())q=false;if(!(p instanceof l)){var u=l.getScrollPosition().x,v=l.getElementPosition(n(p)).y;p=new l(u,v,'document');if(!s)p.y-=m.getTop()/(r?2:1);}if(r){p.y-=l.getViewportDimensions().y/2;}else if(s){p.y-=l.getViewportDimensions().y;p.y+=s;}p=p.convertTo('document');if(q){return new g(document.body).to('scrollTop',p.y).to('scrollLeft',p.x).ease(g.ease.end).duration(q).ondone(t).go();}else if(window.scrollTo){window.scrollTo(p.x,p.y);t&&t();}h.inform(o.SCROLL);},ensureVisible:function(p,q,r,s,t){if(r===undefined)r=10;p=n(p);if(q)p=j.find(p,q);var u=l.getScrollPosition().x,v=l.getScrollPosition().y,w=v+l.getViewportDimensions().y,x=l.getElementPosition(p).y,y=x+l.getElementDimensions(p).y;x-=m.getTop();x-=r;y+=r;if(x<v){o.scrollTo(new l(u,x,'document'),s,false,false,t);}else if(y>w)if(x-(y-w)<v){o.scrollTo(new l(u,x,'document'),s,false,false,t);}else o.scrollTo(new l(u,y,'document'),s,false,true,t);},scrollToTop:function(p){var q=l.getScrollPosition();o.scrollTo(new l(q.x,0,'document'),p!==false);}};e.exports=o;});
__d("HistoryManager",["event-extensions","function-extensions","Cookie","Env","URI","UserAgent","copyProperties","goOrReplace"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Cookie'),h=b('Env'),i=b('URI'),j=b('UserAgent'),k=b('copyProperties'),l=b('goOrReplace'),m={_IFRAME_BASE_URI:'http://static.ak.facebook.com/common/history_manager.php',history:null,current:0,fragment:null,_setIframeSrcFragment:function(n){n=n.toString();var o=m.history.length-1;m.iframe.src=m._IFRAME_BASE_URI+'?|index='+o+'#'+encodeURIComponent(n);return m;},getIframeSrcFragment:function(){return decodeURIComponent(i(m.iframe.contentWindow.document.location.href).getFragment());},nextframe:function(n,o){if(o){m._setIframeSrcFragment(n);return;}if(n!==undefined){m.iframeQueue.push(n);}else{m.iframeQueue.splice(0,1);m.iframeTimeout=null;m.checkURI();}if(m.iframeQueue.length&&!m.iframeTimeout){var p=m.iframeQueue[0];m.iframeTimeout=setTimeout(function(){m._setIframeSrcFragment(p);},100,false);}},isInitialized:function(){return !!m._initialized;},init:function(){if(!h.ALLOW_TRANSITION_IN_IFRAME&&window!=window.top)return;if(m._initialized)return m;var n=i(),o=n.getFragment()||'';if(o.charAt(0)==='!'){o=o.substr(1);n.setFragment(o);}if(i.getRequestURI(false).getProtocol().toLowerCase()=='https')m._IFRAME_BASE_URI='https://s-static.ak.facebook.com/common/history_manager.php';k(m,{_initialized:true,fragment:o,orig_fragment:o,history:[n],callbacks:[],lastChanged:Date.now(),canonical:i('#'),fragmentTimeout:null,user:0,iframeTimeout:null,iframeQueue:[],enabled:true,debug:bagofholding});if(window.history&&history.pushState){this.lastURI=document.URL;window.history.replaceState(this.lastURI,null);Event.listen(window,'popstate',function(p){if(p&&p.state&&m.lastURI!=p.state){m.lastURI=p.state;m.lastChanged=Date.now();m.notify(i(p.state).getUnqualifiedURI().toString());}}.bind(m));if(j.safari()<534||j.chrome()<=13){setInterval(m.checkURI,42,false);m._updateRefererURI(this.lastURI);}return m;}m._updateRefererURI(i.getRequestURI(false));if(j.safari()<500||j.firefox()<2){m.enabled=false;return m;}if(j.ie()<8){m.iframe=document.createElement('iframe');k(m.iframe.style,{width:'0',height:'0',frameborder:'0',left:'0',top:'0',position:'absolute'});m._setIframeSrcFragment(o);document.body.insertBefore(m.iframe,document.body.firstChild);}else if('onhashchange' in window){Event.listen(window,'hashchange',function(){m.checkURI.bind(m).defer();});}else setInterval(m.checkURI,42,false);return m;},registerURIHandler:function(n){m.callbacks.push(n);return m;},setCanonicalLocation:function(n){m.canonical=i(n);return m;},notify:function(n){if(n==m.orig_fragment)n=m.canonical.getFragment();for(var o=0;o<m.callbacks.length;o++)try{if(m.callbacks[o](n))return true;}catch(p){}return false;},checkURI:function(){if(Date.now()-m.lastChanged<400)return;if(window.history&&history.pushState){var n=i(document.URL).removeQueryData('ref').toString(),o=i(m.lastURI).removeQueryData('ref').toString();if(n!=o){m.lastChanged=Date.now();m.lastURI=n;if(j.safari()<534)m._updateRefererURI(n);m.notify(i(n).getUnqualifiedURI().toString());}return;}if(j.ie()<8&&m.iframeQueue.length)return;if(j.safari()&&window.history.length==200){if(!m.warned)m.warned=true;return;}var p=i().getFragment();if(p.charAt(0)=='!')p=p.substr(1);if(j.ie()<8)p=m.getIframeSrcFragment();p=p.replace(/%23/g,'#');if(p!=m.fragment.replace(/%23/g,'#')){m.debug([p,' vs ',m.fragment,'whl: ',window.history.length,'QHL: ',m.history.length].join(' '));for(var q=m.history.length-1;q>=0;--q)if(m.history[q].getFragment().replace(/%23/g,'#')==p)break;++m.user;if(q>=0){m.go(q-m.current);}else m.go('#'+p);--m.user;}},_updateRefererURI:function(n){n=n.toString();if(n.charAt(0)!='/'&&n.indexOf('//')==-1)return;var o=new i(window.location);if(o.isFacebookURI()){var p=o.getPath()+window.location.search;}else var p='';var q=i(n).getQualifiedURI().setFragment(p).toString(),r=2048;if(q.length>r)q=q.substring(0,r)+'...';g.set('x-referer',q);},go:function(n,o,p){if(window.history&&history.pushState){o||typeof(n)=='number';var q=i(n).removeQueryData('ref').toString();m.lastChanged=Date.now();this.lastURI=q;if(p){window.history.replaceState(n,null,q);}else window.history.pushState(n,null,q);if(j.safari()<534)m._updateRefererURI(n);return false;}m.debug('go: '+n);if(o===undefined)o=true;if(!m.enabled)if(!o)return false;if(typeof(n)=='number'){if(!n)return false;var r=n+m.current,s=Math.max(0,Math.min(m.history.length-1,r));m.current=s;r=m.history[s].getFragment()||m.orig_fragment;r=i(r).removeQueryData('ref').getUnqualifiedURI().toString();m.fragment=r;m.lastChanged=Date.now();if(j.ie()<8){if(m.fragmentTimeout)clearTimeout(m.fragmentTimeout);m._temporary_fragment=r;m.fragmentTimeout=setTimeout(function(){window.location.hash='#!'+r;delete m._temporary_fragment;},750,false);if(!m.user)m.nextframe(r,p);}else if(!m.user)l(window.location,window.location.href.split('#')[0]+'#!'+r,p);if(o)m.notify(r);m._updateRefererURI(r);return false;}n=i(n);if(n.getDomain()==i().getDomain())n=i('#'+n.getUnqualifiedURI());var t=m.history[m.current].getFragment(),u=n.getFragment();if(u==t||(t==m.orig_fragment&&u==m.canonical.getFragment())){if(o)m.notify(u);m._updateRefererURI(u);return false;}if(p)m.current--;var v=(m.history.length-m.current)-1;m.history.splice(m.current+1,v);m.history.push(i(n));return m.go(1,o,p);},getCurrentFragment:function(){var n=m._temporary_fragment!==undefined?m._temporary_fragment:i.getRequestURI(false).getFragment();return n==m.orig_fragment?m.canonical.getFragment():n;}};e.exports=m;});
__d("JSLogger",[],function(a,b,c,d,e,f){var g={MAX_HISTORY:500,counts:{},categories:{},seq:0,pageId:(Math.random()*2147483648|0).toString(36),forwarding:false};function h(l){if(l instanceof Error&&a.ErrorUtils)l=a.ErrorUtils.normalizeError(l);try{return JSON.stringify(l);}catch(m){return '{}';}}function i(l,event,m){if(!g.counts[l])g.counts[l]={};if(!g.counts[l][event])g.counts[l][event]=0;m=m==null?1:Number(m);g.counts[l][event]+=isFinite(m)?m:0;}g.logAction=function(event,l,m){if(this.type=='bump'){i(this.cat,event,l);}else if(this.type=='rate'){(l&&i(this.cat,event+'_n',m));i(this.cat,event+'_d',m);}else{var n={cat:this.cat,type:this.type,event:event,data:l!=null?h(l):null,date:Date.now(),seq:g.seq++};g.head=g.head?(g.head.next=n):(g.tail=n);while(g.head.seq-g.tail.seq>g.MAX_HISTORY)g.tail=g.tail.next;return n;}};function j(l){if(!g.categories[l]){g.categories[l]={};var m=function(n){var o={cat:l,type:n};g.categories[l][n]=function(){g.forwarding=false;var p=null;if(document.domain!='facebook.com')return;p=g.logAction;if(/^\/+(dialogs|plugins?)\//.test(location.pathname)){g.forwarding=false;}else try{p=a.top.require('JSLogger')._.logAction;g.forwarding=p!==g.logAction;}catch(q){}(p&&p.apply(o,arguments));};};m('debug');m('log');m('warn');m('error');m('bump');m('rate');}return g.categories[l];}function k(l,m){var n=[];for(var o=m||g.tail;o;o=o.next)if(!l||l(o)){var p={type:o.type,cat:o.cat,date:o.date,event:o.event,seq:o.seq};if(o.data)p.data=JSON.parse(o.data);n.push(p);}return n;}e.exports={_:g,DUMP_EVENT:'jslogger/dump',create:j,getEntries:k};});
__d("LinkController",["event-extensions","DataStore","Parent","trackReferrer"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DataStore'),h=b('Parent'),i=b('trackReferrer'),j='LinkControllerHandler',k=[],l=[];function m(event){var q=h.byTag(event.getTarget(),'a'),r=q&&q.getAttribute('href',2);if(!r||q.rel||!o(r)||g.get(q,j))return;var s=Event.listen(q,'click',function(t){if(r.charAt(r.length-1)=='#'){t.prevent();return;}i(q,r);n(q,t);});g.set(q,j,s);}function n(q,event){if(q.target||event.getModifiers().any||(event.which&&event.which!=1))return;var r=k.concat(l);for(var s=0,t=r.length;s<t;s++)if(r[s](q,event)===false)return event.prevent();}function o(q){var r=q.match(/^(\w+):/);return !r||r[1].match(/^http/i);}var p={registerHandler:function(q){k.push(q);},registerFallbackHandler:function(q){l.push(q);}};Event.listen(document.documentElement,'mousedown',m);Event.listen(document.documentElement,'keydown',m);e.exports=p;});
__d("htmlSpecialChars",[],function(a,b,c,d,e,f){function g(h){if(typeof h=='undefined'||h===null||!h.toString)return '';if(h===false){return '0';}else if(h===true)return '1';return h.toString().replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&#039;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}e.exports=g;});
__d("htmlize",["htmlSpecialChars"],function(a,b,c,d,e,f){var g=b('htmlSpecialChars');function h(i){return g(i).replace(/\r\n|[\r\n]/g,'<br />');}e.exports=h;});
__d("escapeJSQuotes",[],function(a,b,c,d,e,f){function g(h){if(typeof h=='undefined'||h==null||!h.valueOf())return '';return h.toString().replace(/\\/g,'\\\\').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/"/g,'\\x22').replace(/'/g,'\\\'').replace(/</g,'\\x3c').replace(/>/g,'\\x3e').replace(/&/g,'\\x26');}e.exports=g;});
__d("areObjectsEqual",[],function(a,b,c,d,e,f){function g(h,i){return JSON.stringify(h)==JSON.stringify(i);}e.exports=g;});
__d("computeRelativeURI",["URI","isEmpty"],function(a,b,c,d,e,f){var g=b('URI'),h=b('isEmpty');function i(k,l){if(!l)return k;if(l.charAt(0)=='/')return l;var m=k.split('/').slice(0,-1);m[0]!=='';l.split('/').forEach(function(n){if(!(n=='.'))if(n=='..'){if(m.length>1)m=m.slice(0,-1);}else m.push(n);});return m.join('/');}function j(k,l){var m=new g(),n=l;k=new g(k);l=new g(l);if(l.getDomain()&&!l.isFacebookURI())return n;var o=k,p=['Protocol','Domain','Port','Path','QueryData','Fragment'];p.forEach(function(q){var r=q=='Path'&&o===k;if(r)m.setPath(i(k.getPath(),l.getPath()));if(!h(l['get'+q]()))o=l;if(!r)m['set'+q](o['get'+q]());});return m;}e.exports=j;});
__d("startsWith",[],function(a,b,c,d,e,f){function g(h,i,j){var k=String(h);j=Math.min(Math.max(j||0,0),k.length);return k.lastIndexOf(String(i),j)===j;}e.exports=g;});
__d("PageTransitions",["event-extensions","Arbiter","Dialog","DOM","DOMScroll","Env","Form","HistoryManager","JSLogger","LinkController","OnloadHooks","htmlize","escapeJSQuotes","URI","UserAgent","Vector","areObjectsEqual","clickRefAction","computeRelativeURI","copyProperties","ge","goOrReplace","startsWith","tx","userAction"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('Dialog'),i=b('DOM'),j=b('DOMScroll'),k=b('Env'),l=b('Form'),m=b('HistoryManager'),n=b('JSLogger'),o=b('LinkController'),p=b('OnloadHooks'),q=b('htmlize'),r=b('escapeJSQuotes'),s=b('URI'),t=b('UserAgent'),u=b('Vector'),v=b('areObjectsEqual'),w=b('clickRefAction'),x=b('computeRelativeURI'),y=b('copyProperties'),z=b('ge'),aa=b('goOrReplace'),ba=b('startsWith'),ca=b('tx'),da=b('userAction'),ea={};function fa(ka,la){ea[ka.getUnqualifiedURI()]=la;}function ga(ka){return ea[ka.getUnqualifiedURI()];}function ha(ka){delete ea[ka.getUnqualifiedURI()];}var ia={_transition_handlers:[],_scroll_locked:false,isInitialized:function(){return !!ia._initialized;},_init:function(){if(!k.ALLOW_TRANSITION_IN_IFRAME&&window!=window.top)return;if(ia._initialized)return ia;ia._initialized=true;var ka=s.getRequestURI(false),la=ka.getUnqualifiedURI(),ma=s(la).setFragment(null),na=la.getFragment();if(na.charAt(0)==='!'&&ma.toString()===na.substr(1))la=ma;y(ia,{_current_uri:la,_most_recent_uri:la,_next_uri:la});var oa;if(ba(ka.getFragment(),'/')){oa=ka.getFragment();}else oa=la;m.init().setCanonicalLocation('#'+oa).registerURIHandler(ia._historyManagerHandler);o.registerFallbackHandler(ia._rewriteHref);o.registerFallbackHandler(ia._onlinkclick);Event.listen(document.documentElement,'submit',ia._onformsubmit);Event.listen(window,'scroll',function(){if(!ia._scroll_locked)fa(ia._current_uri,u.getScrollPosition());});return ia;},registerHandler:function(ka,la){ia._init();la=la||5;if(!ia._transition_handlers[la])ia._transition_handlers[la]=[];ia._transition_handlers[la].push(ka);},getCurrentURI:function(ka){if(!ia._current_uri&&!ka)return new s(ia._most_recent_uri);return new s(ia._current_uri);},getMostRecentURI:function(){return new s(ia._most_recent_uri);},getNextURI:function(){return new s(ia._next_uri);},_rewriteHref:function(ka){var la=ka.getAttribute('href'),ma=x(ia._most_recent_uri.getQualifiedURI(),la).toString();if(la!=ma)ka.setAttribute('href',ma);},_onlinkclick:function(ka){ja.lookBusy(ka);ia.go(ka.getAttribute('href'));return false;},_onformsubmit:function(event){var ka=event.getTarget();if(l.getAttribute(ka,'rel')||l.getAttribute(ka,'target'))return;w('form',ka,event).set_namespace('page_transition');var la=da('page_transitions',ka,event,{mode:'DEDUP'}).uai_fallback(null,'form'),ma=a.ArbiterMonitor;if(ma)ma.initUA(la,[ka]);var na=new s(l.getAttribute(ka,'action')||''),oa=x(ia._most_recent_uri,na);ka.setAttribute('action',oa.toString());if((l.getAttribute(ka,'method')||'GET').toUpperCase()==='GET'){ia.go(oa.addQueryData(l.serialize(ka)));event.kill();}},go:function(ka,la){var ma=new s(ka).removeQueryData('quickling').getQualifiedURI();n.create('pagetransition').debug('go',{uri:ma.toString()});ha(ma);!la&&w('uri',{href:ma.toString()},null,'INDIRECT');ja.lookBusy();ia._loadPage(ma,function(na){if(na){m.go(ma.toString(),false,la);}else aa(window.location,ma,la);});},_historyManagerHandler:function(ka){if(ka.charAt(0)!='/')return false;w('h',{href:ka});da('page_transitions').uai(null,'history_manager');ia._loadPage(new s(ka),function(la){if(!la)aa(window.location,ka,true);});return true;},_loadPage:function(ka,la){if(s(ka).getFragment()&&v(s(ka).setFragment(null).getQualifiedURI(),s(ia._current_uri).setFragment(null).getQualifiedURI())){ia._current_uri=ia._most_recent_uri=ka;ia.restoreScrollPosition();ja.stopLookingBusy();return;}var ma;if(ia._current_uri)ma=ga(ia._current_uri);ia._current_uri=null;ia._next_uri=ka;if(ma)j.scrollTo(ma,false);var na=function(){ia._scroll_locked=true;var pa=ia._handleTransition(ka);la&&la(pa);},oa=p.runHooks('onbeforeleavehooks');if(oa){ja.stopLookingBusy();ia._warnBeforeLeaving(oa,na);}else na();},_handleTransition:function(ka){window.onbeforeleavehooks=undefined;ja.lookBusy();if(!ka.isSameOrigin())return false;var la=window.AsyncRequest&&window.AsyncRequest.getLastID();g.inform("pre_page_transition",{from:ia.getMostRecentURI(),to:ka});for(var ma=ia._transition_handlers.length-1;ma>=0;--ma){var na=ia._transition_handlers[ma];if(!na)continue;for(var oa=na.length-1;oa>=0;--oa)if(na[oa](ka)===true){var pa={sender:this,uri:ka,id:la};try{g.inform("page_transition",pa);}catch(qa){}return true;}else na.splice(oa,1);}return false;},unifyURI:function(){ia._current_uri=ia._most_recent_uri=ia._next_uri;},transitionComplete:function(ka){ia._executeCompletionCallback();ja.stopLookingBusy();ia.unifyURI();if(!ka)ia.restoreScrollPosition();try{if(document.activeElement&&document.activeElement.nodeName==='A')document.activeElement.blur();}catch(la){}},_executeCompletionCallback:function(){if(ia._completionCallback)ia._completionCallback();ia._completionCallback=null;},setCompletionCallback:function(ka){ia._completionCallback=ka;},rewriteCurrentURI:function(ka,la){ia.registerHandler(function(){if(ka==ia.getMostRecentURI().getUnqualifiedURI().toString()){ia.transitionComplete();return true;}});ia.go(la,true);},_warnBeforeLeaving:function(ka,la){new h().setTitle("Are you sure you want to leave this page?").setBody(q(ka)).setButtons([{name:'leave_page',label:"Leave this Page",handler:la},{name:'continue_editing',label:"Stay on this Page",className:'inputaux'}]).setModal(true).show();},restoreScrollPosition:function(){ia._scroll_locked=false;var ka=ia._current_uri,la=ga(ka);if(la){j.scrollTo(la,false);return;}function ma(pa){if(!pa)return null;var qa="a[name='"+r(pa)+"']";return i.scry(document.body,qa)[0]||z(pa);}var na=ma(s(ka).getFragment());if(na){var oa=u.getElementPosition(na);oa.x=0;j.scrollTo(oa);}}},ja=window._BusyUIManager||{_looking_busy:false,_original_cursors:[],lookBusy:function(ka){if(ka)ja._giveProgressCursor(ka);if(ja._looking_busy)return;ja._looking_busy=true;ja._giveProgressCursor(document.documentElement);},stopLookingBusy:function(){if(!ja._looking_busy)return;ja._looking_busy=false;while(ja._original_cursors.length){var ka=ja._original_cursors.pop(),la=ka[0],ma=ka[1];if(la.style)la.style.cursor=ma||'';}},_giveProgressCursor:function(ka){if(!t.safari()){ja._original_cursors.push([ka,ka.style.cursor]);ka.style.cursor='progress';}}};e.exports=ia;});
__d("debounce",[],function(a,b,c,d,e,f){function g(h,i,j,k){if(i==null)i=100;var l;function m(n,o,p,q,r){m.reset();l=setTimeout(function(){h.call(j,n,o,p,q,r);},i,!k);}m.reset=function(){clearTimeout(l);};return m;}e.exports=g;});
__d("TextInputControl",["event-extensions","function-extensions","Class","DOMControl","Input","copyProperties","debounce"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Class'),h=b('DOMControl'),i=b('Input'),j=b('copyProperties'),k=b('debounce');function l(m){this.parent.construct(this,m);var n=this.getRoot(),o=k(this.update.bind(this),0);Event.listen(n,{input:o,keydown:o,paste:o});}g.extend(l,h);j(l.prototype,{setMaxLength:function(m){i.setMaxLength(this.getRoot(),m);return this;},getValue:function(){return i.getValue(this.getRoot());},isEmpty:function(){return i.isEmpty(this.getRoot());},setValue:function(m){i.setValue(this.getRoot(),m);this.update();return this;},clear:function(){return this.setValue('');},setPlaceholderText:function(m){i.setPlaceholder(this.getRoot(),m);return this;}});e.exports=l;});
__d("TextMetrics",["array-extensions","event-extensions","DOM","Style","UserAgent","debounce"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('DOM'),h=b('Style'),i=b('UserAgent'),j=b('debounce'),k;function l(){if(typeof k==='undefined'){var n=g.create('div',{className:'webkitZoomTest'}),o=function(){g.appendContent(document.body,n);k=100/n.clientHeight;g.remove(n);};Event.listen(window,'resize',j(o,100));o();}return k;}function m(n,o){this._node=n;this._flexible=!!o;var p='textarea',q='textMetrics';if(this._flexible){p='div';q+=' textMetricsInline';}this._shadow=g.create(p,{className:q});var r=['fontSize','fontStyle','fontWeight','fontFamily','wordWrap'];r.forEach(function(t){h.set(this._shadow,t,h.get(n,t));}.bind(this));var s=h.get(n,'lineHeight');if(i.chrome()||i.safari())s=Math.round(parseInt(s,10)*l())+'px';h.set(this._shadow,'lineHeight',s);document.body.appendChild(this._shadow);}m.prototype.measure=function(n){var o=this._node,p=this._shadow;n=(n||o.value)+'...';if(!this._flexible){var q=o.clientWidth-h.getFloat(o,'paddingLeft')-h.getFloat(o,'paddingRight');h.set(p,'width',Math.max(q,0)+'px');}g.setContent(p,n);return {width:p.scrollWidth,height:p.scrollHeight};};m.prototype.destroy=function(){g.remove(this._shadow);};e.exports=m;});
__d("TextAreaControl",["event-extensions","Arbiter","ArbiterMixin","Class","CSS","DOMControl","Style","TextInputControl","TextMetrics","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('Class'),j=b('CSS'),k=b('DOMControl'),l=b('Style'),m=b('TextInputControl'),n=b('TextMetrics'),o=b('copyProperties');function p(r,s){return l.getFloat(r,s)||0;}function q(r){this.autogrow=j.hasClass(r,'uiTextareaAutogrow');this.parent.construct(this,r);this.width=null;Event.listen(r,'focus',this._handleFocus.bind(this));}i.extend(q,m);o(q.prototype,h,{setAutogrow:function(r){this.autogrow=r;return this;},onupdate:function(){this.parent.onupdate();if(this.autogrow){var r=this.getRoot();if(!this.metrics)this.metrics=new n(r);if(typeof this.initialHeight==='undefined'){this.isBorderBox=l.get(r,'box-sizing')==='border-box'||l.get(r,'-moz-box-sizing')==='border-box'||l.get(r,'-webkit-box-sizing')==='border-box';this.borderBoxOffset=p(r,'padding-top')+p(r,'padding-bottom')+p(r,'border-top-width')+p(r,'border-bottom-width');this.initialHeight=r.offsetHeight-this.borderBoxOffset;}var s=this.metrics.measure(),t=Math.max(this.initialHeight,s.height);if(this.isBorderBox)t+=this.borderBoxOffset;if(t!==this.height){this.height=t;l.set(r,'height',t+'px');g.inform('reflow');this.inform('resize');}}else if(this.metrics){this.metrics.destroy();this.metrics=null;}},resetHeight:function(){this.height=-1;this.update();},_handleFocus:function(){this.width=null;}});q.getInstance=function(r){return k.getInstance(r)||new q(r);};e.exports=q;});
__d("URLScraper",["event-extensions","ArbiterMixin","Class","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('Class'),i=b('copyProperties');function j(ga){this.input=ga;this.enable();}i(j.prototype,g,{reset:function(){this.lastPermissiveMatch=null;},enable:function(){if(this.events)return;var ga=function(ha){setTimeout(this.check.bind(this,ha),30);};this.events=Event.listen(this.input,{paste:ga.bind(this,false),keydown:ga.bind(this,true)});},disable:function(){if(!this.events)return;for(var event in this.events)this.events[event].remove();this.events=null;},check:function(ga){var ha=this.input.value;if(ga&&j.trigger(ha))return;var ia=j.match(ha),ja=j.permissiveMatch(ha);if(ja&&(ja!=this.lastPermissiveMatch)){this.lastPermissiveMatch=ja;this.inform('match',{url:ia,alt_url:ja});}}});var k='!"#%&\'()*,-./:;<>?@[\\]^_`{|}',l='\u2000-\u206F\u00ab\u00bb',m='(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])',n='(?:(?:ht|f)tps?)://',o='(?:(?:'+m+'[.]){3}'+m+')',p='(?:\\b)www\\d{0,3}[.]',q='[^\\s'+k+l+']',r='(?:(?:[.:\\-_%@]|'+q+')*'+q+')',s='(?:[.][a-z]{2,4})',t='(?::\\d+){0,1}',u='(?=[\/?#])',v='(?:'+'(?:'+n+r+t+')|'+'(?:'+o+t+')|'+'(?:'+p+r+s+t+')|'+'(?:'+r+s+t+u+')'+')',w='[\/#?]',x='\\([^\\s()<>]+\\)',y='[^\\s()<>?#]+',z='[^\\s'+k+l+']',aa='(?:'+'(?:'+w+')'+'(?:'+'(?:'+x+'|'+y+')*'+'(?:'+x+'|'+z+')'+')*'+')*',ba=new RegExp('('+'(?:'+v+')'+'(?:'+aa+')'+')','im'),ca='(?:'+'(?:'+w+')'+'(?:'+'(?:'+x+'|'+y+')*'+')*'+')*',da=new RegExp('('+'(?:'+v+')'+'(?:'+ca+')'+')','im'),ea=new RegExp('('+'(?:'+n+r+t+')|'+'(?:'+p+r+s+t+')'+')'),fa=/[\s'";]/;j.match=function(ga){return j.matchToPattern(ga,ba);};j.permissiveMatch=function(ga){return j.matchToPattern(ga,da);};j.matchToPattern=function(ga,ha){var ia=(ha.exec(ga)||[])[1]||null;if(ia&&ia.indexOf('@')!=-1){return (ea.exec(ia))?ia:null;}else return ia;};j.trigger=function(ga){return !fa.test(ga.charAt(ga.length-1));};e.exports=j;});
__d("Composer",["function-extensions","Arbiter","ArbiterMixin","Button","Class","CSS","DOM","Env","FileForm","HTML","Input","PageTransitions","Parent","Run","ServerJS","TextAreaControl","URI","URLScraper","$","copyProperties","ge","tx","event-extensions"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('Button'),j=b('Class'),k=b('CSS'),l=b('DOM'),m=b('Env'),n=b('FileForm'),o=b('HTML'),p=b('Input'),q=b('PageTransitions'),r=b('Parent'),s=b('Run'),t=b('ServerJS'),u=b('TextAreaControl'),v=b('URI'),w=b('URLScraper'),x=b('$'),y=b('copyProperties'),z=b('ge'),aa=b('tx');b('event-extensions');var ba=b('event-extensions').$E,ca=1,da=4,ea={},fa=function(){var ja=l.scry(this.root,'span.linkAttachment')[0];if(!ja&&this.isMetaComposer)ja=l.scry(this.root,'span.attachmentAcceptsLink')[0];if(!ja)return;var ka=r.byTag(ja,'form');this.scraper=new w(this.input);this.scraper.subscribe('match',function(la,ma){if(this.isMetaComposer){var na=this.form.xhpc_targetid,oa=new v('/ajax/metacomposer/attachment/link/scraper.php');oa.addQueryData({scrape_url:encodeURIComponent(ma.url),alt_scrape_url:encodeURIComponent(ma.alt_url),targetid:na.value});ka.action=oa.toString();}else{k.show(ja);ka.action='/ajax/composer/attachment/link/scraper.php?scrape_url='+encodeURIComponent(ma.url);}ka.xhpc.value=ja.id;ka.xhpc.disabled=false;ka.xhpc.click();}.bind(this));this.isMetaComposer&&this.scraper.check();},ga=function(ja){if(this.inform('submit')===false){ja.kill();return false;}if(this.submitHandler)return (new Function(this.submitHandler)).apply(this.form);};function ha(ja,ka,la,ma,na){ea[ja.id]=this;this.root=ja;this.resetCfg=ka;this.dataSource=ma;this.lazyEndpoint=this.resetCfg&&this.resetCfg.lazyEndpoint;this.focus=l.find(ja,'div.focus_target');this.form=l.find(ja,'form.attachmentForm');this.content=l.find(ja,'div.attachmentContent');this.isMetaComposer=la;if(this.isMetaComposer){this.messageBox=l.find(ja,'div.uiMetaComposerMessageBox');this.metaArea=l.find(ja,'div.attachmentMetaArea');this.bottomArea=l.find(ja,'div.attachmentBottomArea');this.barArea=l.find(ja,'div.attachmentBarArea');this.auxBarArea=l.find(ja,'.attachmentAuxBarArea');this.blurb=l.find(ja,'div.uiMetaComposerMessageBox div.textBlurb');this.input=l.find(ja,'div.uiMetaComposerMessageBox textarea.input');this.button=l.find(ja,'div.uiMetaComposerMessageBox label.submitBtn');this.privacy=l.find(ja,'div.uiMetaComposerMessageBox li.privacyWidget');this.boosting=l.scry(ja,'div.uiMetaComposerMessageBox li.boostingWidget');}else{this.blurb=l.find(ja,'div.uiComposerMessageBox div.textBlurb');this.input=l.find(ja,'div.uiComposerMessageBox textarea.input');this.button=l.find(ja,'div.uiComposerMessageBox label.submitBtn');this.privacy=l.find(ja,'div.uiComposerMessageBox li.privacyWidget');this.boosting=[];}Event.listen(this.form,'submit',ga.bind(this));if(this.isMetaComposer){Event.listen(this.input,'focus',this.onFocus.bind(this));if(na){if(document.activeElement===this.input)this.onFocus.bind(this).defer();}else if(r.byClass(this.input,'child_was_focused'))this.onFocus.bind(this).defer();}g.inform('xhpc/construct/'+ja.id,this,g.BEHAVIOR_STATE);}y(ha.prototype,h,{init:function(ja){this.mentionsInput=ja;if(this.mentionsInput)this.mentionsInput.subscribe('init',function(){var ka=this.mentionsInput.getTypeahead().getView();ka.subscribe(['reset','render'],function(la){k.conditionClass(this.root,'uiComposerMention',(la=='render'));}.bind(this));}.bind(this));fa.call(this);this.inform('init',null,g.BEHAVIOR_PERSISTENT);this.setupListen();s.onBeforeUnload(this._handleUnsavedChanges.bind(this));},setupListen:function(){Event.listen(this.root,'click',this.clickHandler.bind(this));},clickHandler:function(event){var ja=event.getTarget();if(r.byClass(ja,'collapsedPostButton'))this.focusInput.bind(this).defer();},setBlurb:function(ja){l.setContent(this.blurb,ja);},setEnabled:function(ja){i.setEnabled(this.button,ja);},getEndpoint:function(){return this.form.getAttribute('action');},setEndpoint:function(ja){this.form.setAttribute('action',ja);},setLoading:function(ja){k.conditionClass(this.root,'async_saving',!!ja);},setContentVisible:function(ja){k.conditionClass(this.root,'uiComposerHideContent',!ja);},setMessageBoxVisible:function(ja){k.conditionClass(this.root,'uiComposerHideMessageBox',!ja);},setInputVisible:function(ja){k.conditionClass(this.root,'uiComposerHideInput',!ja);},setStatusBoxVisible:function(ja){k.conditionClass(this.root,'uiComposerHideStatusBox',!ja);},setTopicTaggerVisible:function(ja){k.conditionClass(this.root,'uiTagComposerHidden',!ja);},mutate:function(ja){if(this.lastComposerInput)p.setValue(this.input,p.getValue(z(this.lastComposerInput)));var ka=z(ja.xhpc);if(ka){var la=l.scry(this.root,'.uiComposerAttachmentSelected')[0];if(ja.confirmAugmentation&&la!==ka)return;la&&k.removeClass(la,'uiComposerAttachmentSelected');k.addClass(ka,'uiComposerAttachmentSelected');if(!ja.disableCache)Event.listen(ka,'click',function(na){ba(na).stop();ja.disableCache=true;this.mutate(ja);}.bind(this));}if(!ja.keepContentAreas){this.setContentVisible(false);l.empty(this.content);if(this.isMetaComposer){this.mentionsInput&&this.mentionsInput.setAuxContent(null);l.empty(this.metaArea);l.empty(this.bottomArea);l.empty(this.barArea);l.empty(this.auxBarArea);}}if(ja.content){l.setContent(this.content,o(ja.content));this.setContentVisible(true);}if(this.isMetaComposer){ja.metaContent&&l.setContent(this.metaArea,o(ja.metaContent));ja.bottomContent&&l.setContent(this.bottomArea,o(ja.bottomContent));ja.barContent&&l.setContent(this.barArea,o(ja.barContent));ja.auxBarContent&&l.setContent(this.auxBarArea,o(ja.auxBarContent));}this.setMessageBoxVisible(!ja.messageBoxHidden);k.conditionClass(this.root,'uiComposerWhiteMessageBox',!ja.messageBoxHidden&&!ja.inputHidden&&!ja.content);this.setInputVisible(!ja.inputHidden);this.setStatusBoxVisible(!ja.statusBoxHidden);k.conditionShow(this.privacy,!ja.privacyWidgetHidden);if(this.boosting.length>0)k.conditionShow(this.boosting[0],!ja.boostingWidgetHidden);if(!ja.keepContentAreas){p.setPlaceholder(this.input,ja.placeholder);i.setLabel(this.button,ja.buttonLabel);}this.setBlurb(o(ja.blurb));if(ja.autoscrape){this.scraper&&this.scraper.enable();}else this.scraper&&this.scraper.disable();this.setEnabled(!ja.disabled);this.setTopicTaggerVisible(!ja.hideTopicTagger);this.setEndpoint(ja.endpoint);if(ja.formType==ca){this.form.setAttribute('rel','async');}else this.form.removeAttribute('rel');this.form.removeAttribute('target');if(ja.formType==da){if(!this._fileForm){this._fileForm=new n(this.form);this._fileForm.setAllowCrossOrigin(m.allowCrossOriginComposerUpload);this._fileForm.subscribe('submit',this.setLoading.bind(this,true));this._fileForm.subscribe('failure',this.setLoading.bind(this,false));}}else if(this._fileForm){this._fileForm.destroy();this._fileForm=null;}this.submitHandler=ja.submitHandler;this.lazyEndpoint=ja.lazyEndpoint;k.addClass(this.root,'uiComposerInteracted');k.addClass(this.root,'uiComposerOpen');if(ja.messageBoxFocused){var ma=document.activeElement;if(ma===document.body||r.byClass(ma,'attachmentLink'))this.focusInput.bind(this).defer();}if(ja.inputElement){p.setValue(z(ja.inputElement),p.getValue(this.input));u.getInstance(z(ja.inputElement)).update();}else u.getInstance(this.input).update();this.lastComposerInput=ja.inputElement;g.inform('composer/mutate',this);},subscribeToMutate:function(ja){return g.subscribe('composer/mutate',function(ka,la){if(la===this)ja();}.bind(this));},unsubscribeFromMutate:function(ja){ja.unsubscribe();},reset:function(ja){if(this.isMetaComposer){l.empty(this.metaArea);l.empty(this.bottomArea);l.empty(this.barArea);l.empty(this.auxBarArea);}if(this.resetCfg){this.mutate(this.resetCfg);}else{var ka=l.scry(this.root,'.uiComposerAttachmentSelected')[0];if(ka)k.removeClass(ka,'uiComposerAttachmentSelected');}if(!ja){p.reset(this.input);this.mentionsInput&&this.mentionsInput.reset();this.scraper&&this.scraper.reset();}k.removeClass(this.root,'uiComposerInteracted');k.setClass(this.focus,'focus_target');this.setLoading(false);g.inform('composer/reset');},onFocus:function(){if(this.lazyEndpoint){var ja=l.find(this.root,'form.attachmentSelectForm'),ka=new v(this.lazyEndpoint);ka.addQueryData({isAugmentation:true});ja.action=ka.toString();var la=l.scry(this.root,'.uiComposerAttachmentSelected')[0];ja.xhpc.value=la&&la.id;ja.xhpc.click();k.removeClass.curry(this.root,'async_saving').defer();}this.inform('focus');},focusInput:function(){p.focus(this.input);},getInput:function(){return this.input;},updateDataSourceToken:function(ja){if(this.dataSource)this.dataSource.updateToken(ja);},_handleUnsavedChanges:function(){var ja=q.getNextURI();if(ja.getQueryData().hasOwnProperty('theater'))return;if(this.input.offsetParent!==null&&!p.isEmpty(this.input)&&!(a.Dialog&&a.Dialog.getCurrent()))return "You haven't finished your post yet. Do you want to leave without finishing?";}});var ia;y(ha,{setNodeToConfigure:function(ja){ia=ja;},configure:function(ja,ka,la){var ma=r.byClass(ia,'uiComposer').id,na=g.subscribe('xhpc/construct/'+ma,function(oa,pa){(function(){na.unsubscribe();}).defer();pa.mutate(ja);pa.subscribe('init',function(){new t().handle(ka);new Function(la)();if(ja.attachmentJS)new Function(ja.attachmentJS).call(pa);});});},publish:function(ja,ka){ka=ka||{};ka.composer_id=ja;ka.composer=ha.getInstance(ja);ka.composer&&ka.composer.reset(false);if(ka.streamNode){ka.streamStory=ka.streamNode;}else if(ka.streamMarkup)ka.streamStory=o(ka.streamMarkup).getRootNode();g.inform('composer/publish',ka);},finish:function(ja){ha.getInstance(ja).setLoading(false);},getInstance:function(ja){var ka=r.byClass(x(ja),'uiComposer');return ka?ea[ka.id]:null;}});e.exports=ha;});
__d("legacy:Composer",["Composer"],function(a,b,c,d){a.Composer=b('Composer');},3);
__d("legacy:event-extensions",["event-extensions"],function(a,b,c,d){b('event-extensions');},3);
function MetaComposerMessageBox(){}copyProperties(MetaComposerMessageBox.prototype,{init:function(a,b){this.inputContainer=DOM.scry(a,'div.inputContainer')[0];this.textInput=DOM.scry(a,'textarea.mentionsTextarea')[0];this.metaArea=DOM.scry(a,'div.attachmentMetaArea')[0];this.bottomArea=DOM.scry(a,'div.attachmentBottomArea')[0];this.barArea=DOM.scry(a,'div.attachmentBarArea')[0];Event.listen(this.inputContainer,'click',function(c){var d=c.getTarget();if(!DOM.contains(this.metaArea,d)&&d!==this.textInput)this.textInput.focus();}.bind(this));}});
__d("Encoding",[],function(a,b,c,d,e,f){var g={toBytes:function(n){for(var o=[],p=0;p<n.length;p++)o.push(n.charCodeAt(p)&255);return o;},fromBytes:function(n){for(var o=[],p=0;p<n.length;p++)o.push(String.fromCharCode(n[p]));return o.join("");}},h={toBytes:function(n){return g.toBytes(window.unescape(encodeURIComponent(n)));},fromBytes:function(n){return decodeURIComponent(window.escape(g.fromBytes(n)));}},i={toBytes:function(n){for(var o=[],p=0;p<n.length*32;p+=8)o.push((n[p>>>5]>>>(24-p%32))&255);return o;},fromBytes:function(n){for(var o=[],p=0,q=0;p<n.length;p++,q+=8)o[q>>>5]|=(n[p]&255)<<(24-q%32);return o;}},j={fromBytes:function(n){for(var o=[],p=0;p<n.length;p++){o.push((n[p]>>>4).toString(16));o.push((n[p]&15).toString(16));}return o.join("");},toBytes:function(n){for(var o=[],p=0;p<n.length;p+=2)o.push(parseInt(n.substr(p,2),16));return o;}},k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l={toBytes:function(n){if(typeof window.atob=="function")return g.toBytes(window.atob(n));n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var o=[],p=0,q=0;p<n.length;q=++p%4){if(q===0)continue;o.push(((k.indexOf(n.charAt(p-1))&(Math.pow(2,-2*q+8)-1))<<(q*2))|(k.indexOf(n.charAt(p))>>>(6-q*2)));}return o;},fromBytes:function(n){if(typeof window.btoa=="function")return window.btoa(g.fromBytes(n));for(var o=[],p=0;p<n.length;p+=3){var q=(n[p]<<16)|(n[p+1]<<8)|n[p+2];for(var r=0;r<4;r++)if(p*8+r*6<=n.length*8){o.push(k.charAt((q>>>6*(3-r))&63));}else o.push("=");}return o.join("");}},m={UTF8:h,binary:g,words:i,hex:j,base64:l};e.exports=m;});
__d("CryptoUtil",[],function(a,b,c,d,e,f){var g={rotl:function(h,i){return (h<<i)|(h>>>(32-i));},rotr:function(h,i){return (h<<(32-i))|(h>>>i);},endian:function(h){if(h.constructor==Number)return g.rotl(h,8)&16711935|g.rotl(h,24)&4278255360;for(var i=0;i<h.length;i++)h[i]=g.endian(h[i]);return h;},randomBytes:function(h){for(var i=[];h>0;h--)i.push(Math.floor(Math.random()*256));return i;}};e.exports=g;});
__d("md5",["Encoding","CryptoUtil"],function(a,b,c,d,e,f){var g=b('Encoding'),h=b('CryptoUtil');function i(o,p,q,r,s,t,u){var v=o+(p&q|~p&r)+(s>>>0)+u;return ((v<<t)|(v>>>(32-t)))+p;}function j(o,p,q,r,s,t,u){var v=o+(p&r|q&~r)+(s>>>0)+u;return ((v<<t)|(v>>>(32-t)))+p;}function k(o,p,q,r,s,t,u){var v=o+(p^q^r)+(s>>>0)+u;return ((v<<t)|(v>>>(32-t)))+p;}function l(o,p,q,r,s,t,u){var v=o+(q^(p|~r))+(s>>>0)+u;return ((v<<t)|(v>>>(32-t)))+p;}function m(o){var p;if(o.constructor==String)o=g.UTF8.toBytes(o);var q=g.words.fromBytes(o),r=o.length*8,s=1732584193,t=-271733879,u=-1732584194,v=271733878;for(p=0;p<q.length;p++)q[p]=((q[p]<<8)|(q[p]>>>24))&16711935|((q[p]<<24)|(q[p]>>>8))&4278255360;q[r>>>5]|=128<<(r%32);q[(((r+64)>>>9)<<4)+14]=r;var w=i,x=j,y=k,z=l;for(p=0;p<q.length;p+=16){var aa=s,ba=t,ca=u,da=v;s=w(s,t,u,v,q[p+0],7,-680876936);v=w(v,s,t,u,q[p+1],12,-389564586);u=w(u,v,s,t,q[p+2],17,606105819);t=w(t,u,v,s,q[p+3],22,-1044525330);s=w(s,t,u,v,q[p+4],7,-176418897);v=w(v,s,t,u,q[p+5],12,1200080426);u=w(u,v,s,t,q[p+6],17,-1473231341);t=w(t,u,v,s,q[p+7],22,-45705983);s=w(s,t,u,v,q[p+8],7,1770035416);v=w(v,s,t,u,q[p+9],12,-1958414417);u=w(u,v,s,t,q[p+10],17,-42063);t=w(t,u,v,s,q[p+11],22,-1990404162);s=w(s,t,u,v,q[p+12],7,1804603682);v=w(v,s,t,u,q[p+13],12,-40341101);u=w(u,v,s,t,q[p+14],17,-1502002290);t=w(t,u,v,s,q[p+15],22,1236535329);s=x(s,t,u,v,q[p+1],5,-165796510);v=x(v,s,t,u,q[p+6],9,-1069501632);u=x(u,v,s,t,q[p+11],14,643717713);t=x(t,u,v,s,q[p+0],20,-373897302);s=x(s,t,u,v,q[p+5],5,-701558691);v=x(v,s,t,u,q[p+10],9,38016083);u=x(u,v,s,t,q[p+15],14,-660478335);t=x(t,u,v,s,q[p+4],20,-405537848);s=x(s,t,u,v,q[p+9],5,568446438);v=x(v,s,t,u,q[p+14],9,-1019803690);u=x(u,v,s,t,q[p+3],14,-187363961);t=x(t,u,v,s,q[p+8],20,1163531501);s=x(s,t,u,v,q[p+13],5,-1444681467);v=x(v,s,t,u,q[p+2],9,-51403784);u=x(u,v,s,t,q[p+7],14,1735328473);t=x(t,u,v,s,q[p+12],20,-1926607734);s=y(s,t,u,v,q[p+5],4,-378558);v=y(v,s,t,u,q[p+8],11,-2022574463);u=y(u,v,s,t,q[p+11],16,1839030562);t=y(t,u,v,s,q[p+14],23,-35309556);s=y(s,t,u,v,q[p+1],4,-1530992060);v=y(v,s,t,u,q[p+4],11,1272893353);u=y(u,v,s,t,q[p+7],16,-155497632);t=y(t,u,v,s,q[p+10],23,-1094730640);s=y(s,t,u,v,q[p+13],4,681279174);v=y(v,s,t,u,q[p+0],11,-358537222);u=y(u,v,s,t,q[p+3],16,-722521979);t=y(t,u,v,s,q[p+6],23,76029189);s=y(s,t,u,v,q[p+9],4,-640364487);v=y(v,s,t,u,q[p+12],11,-421815835);u=y(u,v,s,t,q[p+15],16,530742520);t=y(t,u,v,s,q[p+2],23,-995338651);s=z(s,t,u,v,q[p+0],6,-198630844);v=z(v,s,t,u,q[p+7],10,1126891415);u=z(u,v,s,t,q[p+14],15,-1416354905);t=z(t,u,v,s,q[p+5],21,-57434055);s=z(s,t,u,v,q[p+12],6,1700485571);v=z(v,s,t,u,q[p+3],10,-1894986606);u=z(u,v,s,t,q[p+10],15,-1051523);t=z(t,u,v,s,q[p+1],21,-2054922799);s=z(s,t,u,v,q[p+8],6,1873313359);v=z(v,s,t,u,q[p+15],10,-30611744);u=z(u,v,s,t,q[p+6],15,-1560198380);t=z(t,u,v,s,q[p+13],21,1309151649);s=z(s,t,u,v,q[p+4],6,-145523070);v=z(v,s,t,u,q[p+11],10,-1120210379);u=z(u,v,s,t,q[p+2],15,718787259);t=z(t,u,v,s,q[p+9],21,-343485551);s=(s+aa)>>>0;t=(t+ba)>>>0;u=(u+ca)>>>0;v=(v+da)>>>0;}return h.endian([s,t,u,v]);}function n(o){if(null===o||undefined===o)return null;var p=g.words.toBytes(m(o));return g.hex.fromBytes(p);}e.exports=n;});
__d("FBDesktopDetect",["UserAgent"],function(a,b,c,d,e,f){var g=b('UserAgent'),h='facebook.desktopplugin',i={mimeType:'application/x-facebook-desktop-1',isPluginInstalled:function(){if(g.osx())return false;var j=null;if(a.ActiveXObject){try{j=new a.ActiveXObject(h);if(j)return true;}catch(k){}}else if(a.navigator&&a.navigator.plugins){a.navigator.plugins.refresh(false);for(var l=0,m=a.navigator.plugins.length;l<m;l++){j=a.navigator.plugins[l];if(j.length&&j[0].type===this.mimeType)return true;}}return false;}};e.exports=i;});
__d("CacheStorage",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties'),h={localstorage:i,sessionstorage:j};function i(){this._store=a.localStorage;}i.available=function(){return !!a.localStorage;};g(i.prototype,{keys:function(){var l=[];for(var m=0;m<this._store.length;m++)l.push(this._store.key(m));return l;},get:function(l){return this._store.getItem(l);},set:function(l,m){this._store.setItem(l,m);},remove:function(l){this._store.removeItem(l);},clear:function(){this._store.clear();}});function j(){this._store=a.sessionStorage;}j.available=function(){return !!a.sessionStorage;};g(j.prototype,{keys:function(){var l=[];for(var m=0;m<this._store.length;m++)l.push(this._store.key(m));return l;},get:function(l){return this._store.getItem(l);},set:function(l,m){this._store.setItem(l,m);},remove:function(l){this._store.removeItem(l);},clear:function(){this._store.clear();}});function k(l,m){this._key_prefix=m||'_cs_';this._magic_prefix='_@_';if(l=='AUTO')for(var n in h){var o=h[n];if(o.available()){l=n;break;}}if(l)if(!h[l]||!h[l].available()){this._backend=null;}else this._backend=new h[l]();this._memcache={};}g(k,{getAllStorageTypes:function(){return Object.keys(h);}});g(k.prototype,{keys:function(){var l=[];if(this._backend){var m=this._backend.keys();for(var n=0;n<m.length;n++)if(m[n].substr(0,this._key_prefix.length)==this._key_prefix)l.push(m[n].substr(this._key_prefix.length));return l;}for(var o in this._memcache)l.push(o);return l;},set:function(l,m){this._memcache[l]=m;if(this._backend){if(typeof m=='string'){m=this._magic_prefix+m;}else m=JSON.stringify(m);this._backend.set(this._key_prefix+l,m);}},get:function(l,m){if(this._memcache[l]!==undefined)return this._memcache[l];var n;if(this._backend){n=this._backend.get(this._key_prefix+l);if(n!==null){if(n.substr(0,this._magic_prefix.length)==this._magic_prefix){n=n.substr(this._magic_prefix.length);}else try{n=JSON.parse(n);}catch(o){n=undefined;}if(n!==undefined)this._memcache[l]=n;}else n=undefined;}if(n===undefined&&m!==undefined){n=m;this._memcache[l]=n;if(this._backend){var p;if(typeof n=='string'){p=this._magic_prefix+n;}else p=JSON.stringify(n);this._backend.set(this._key_prefix+l,p);}}return n;},remove:function(l){delete this._memcache[l];if(this._backend)this._backend.remove(this._key_prefix+l);}});e.exports=k;});
__d("FBDesktopPlugin",["CacheStorage","DOM","Env","FBDesktopDetect","URI","Style"],function(a,b,c,d,e,f){var g=b('CacheStorage'),h=b('DOM'),i=b('Env'),j=b('FBDesktopDetect'),k=b('URI'),l=b('Style'),m=new g('localstorage','_socialfox_'),n={_plugin:'_not_checked',arbiterInform:function(o,p){var q=JSON.stringify({name:o,payload:p});this._transmitCommand('arbiterinform',q);},bringToFront:function(){this._transmitCommand('bringtofront');},dock:function(){this._transmitCommand('dock');},getPlugin:function(){if(this._plugin==='_not_checked'){this._plugin=null;if(j.isPluginInstalled()){var o=h.create('object',{id:'kiwi_plugin',type:j.mimeType});l.set(o,'width',0);l.set(o,'height',0);var p=h.create('div',{},o);l.set(p,'width',0);l.set(p,'height',0);document.body.appendChild(p);this._plugin=o;}}return this._plugin;},getUserID:function(){var o=this.getPlugin();return o&&'getUserID' in o&&o.getUserID();},getVersion:function(){var o=this.getPlugin();return o&&'getVersion' in o&&o.getVersion();},isAppRunning:function(){var o=this.getPlugin();return o&&'isAppRunning' in o&&o.isAppRunning();},launchApp:function(){var o=this.getPlugin();return o&&'launchApp' in o&&o.launchApp();},login:function(o,p){if(p&&o&&o.length>0){var q=this.getPlugin();if(q){this._transmitCommand('relogin\n'+o+'\n'+p);return;}}},logout:function(o){o=o||"0";var p=this.getPlugin();if(p)p.logout(o);},recheck:function(){if(this._plugin===null)this._plugin='_not_checked';},shouldSuppressBeeper:function(){return this.isAppRunning();},shouldSuppressMessages:function(){var o=this.getUserID();if(o){return o===i.user;}else return this.isAppRunning();},shouldSuppressSidebar:function(){var o=this.getPlugin(),p=o&&'isAppDocked' in o&&o.isAppDocked(),q=m&&m.get('active')==='true';return p||q;},transferAuthToken:function(o,p){if(o&&o.length>0){var q=this.getPlugin();if(q){q.setAccessToken(o,p);var r=setInterval(function(){q.setAccessToken(o,p);},500);setTimeout(function(){clearInterval(r);},10*1000);}}if(this.redirectHome)window.location.href=k().setPath().toString();},_transmitCommand:function(o,p){p=p||'';var q=this.getPlugin();if(q&&'transmitCommand' in q)q.transmitCommand(o,p);}};e.exports=n;});
__d("ARIA",["DOM","ge"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('ge'),i,j,k=function(){i=h('ariaAssertiveAlert');if(!i){i=g.create('div',{id:'ariaAssertiveAlert',className:'accessible_elem','aria-live':'assertive'});g.appendContent(document.body,i);}j=h('ariaPoliteAlert');if(!j){j=i.cloneNode(false);j.setAttribute('id','ariaPoliteAlert');j.setAttribute('aria-live','polite');g.appendContent(document.body,j);}k=bagofholding;};function l(n,o){k();var p=o?i:j;g.setContent(p,n);}var m={owns:function(n,o){n.setAttribute('aria-owns',g.getID(o));},setPopup:function(n,o){var p=g.getID(o);n.setAttribute('aria-owns',p);n.setAttribute('aria-controls',p);n.setAttribute('aria-haspopup','true');if(n.tabIndex==-1)n.tabIndex=0;},announce:function(n){l(n,true);},notify:function(n){l(n);}};e.exports=m;});
__d("ContextualDialogFooterLink",["event-extensions","copyProperties","CSS","DOM"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('CSS'),i=b('DOM');function j(k){this._layer=k;}g(j.prototype,{_subscriptions:null,enable:function(){var k=this._layer.getRoot(),l=i.scry(k,'.uiContextualDialogFooterLink')[0],m='uiContextualDialogHoverFooterArrow';this._subscriptions=[Event.listen(l,'mouseenter',h.addClass.curry(k,m)),Event.listen(l,'mouseleave',h.removeClass.curry(k,m))];},disable:function(){this._subscriptions.forEach(function(k){k.remove();});this._subscriptions=null;}});e.exports=j;});
__d("ContextualThing",["DOM","ge"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('ge');function i(k){var l;while(k){if(k.getAttribute&&(l=k.getAttribute('data-ownerid')))return h(l);k=k.parentNode;}return null;}var j={register:function(k,l){k.setAttribute('data-ownerid',g.getID(l));},remove:function(k){k.removeAttribute('data-ownerid');},containsIncludingLayers:function(k,l){while(l){if(g.contains(k,l))return true;l=i(l);}return false;}};e.exports=j;});
__d("BootloadedReact",["Bootloader"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=function(j){g.loadModules(['React'],j);},i={isValidComponent:function(j){return (j&&typeof j.genMarkup==='function'&&typeof j.handleUpdateProps==='function');},initializeTouchEvents:function(j,k){h(function(l){l.initializeTouchEvents(j);k&&k();});},createComponent:function(j,k){h(function(l){var m=l.createComponent(j);k&&k(m);});},renderComponent:function(j,k,l){h(function(m){var n=m.renderComponent(j,k);l&&l(n);});},renderOrUpdateComponent:function(j,k,l){h(function(m){var n=m.renderOrUpdateComponent(j,k);l&&l(n);});},destroyAndReleaseReactRootNode:function(j,k){h(function(l){l.destroyAndReleaseReactRootNode(j);k&&k();});}};e.exports=i;});
__d("KeyEventController",["event-extensions","DOM","Run","copyProperties","isEmpty"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOM'),h=b('Run'),i=b('event-extensions').$E,j=b('copyProperties'),k=b('isEmpty');function l(){this.handlers={};document.onkeyup=this.onkeyevent.bind(this,'onkeyup');document.onkeydown=this.onkeyevent.bind(this,'onkeydown');document.onkeypress=this.onkeyevent.bind(this,'onkeypress');}j(l,{instance:null,getInstance:function(){return l.instance||(l.instance=new l());},defaultFilter:function(event,m){event=i(event);return l.filterEventTypes(event,m)&&l.filterEventTargets(event,m)&&l.filterEventModifiers(event,m);},filterEventTypes:function(event,m){if(m==='onkeydown')return true;return false;},filterEventTargets:function(event,m){var n=event.getTarget();if(n.contentEditable==='true')return false;return !g.isNodeOfType(n,l._interactiveElements)||(n.type in l._uninterestingTypes)||(g.isNodeOfType(n,['input','textarea'])&&n.value.length===0&&event.keyCode in l._controlKeys);},filterEventModifiers:function(event,m){if(event.ctrlKey||event.altKey||event.metaKey||event.repeat)return false;return true;},registerKey:function(m,n,o,p){if(o===undefined)o=l.defaultFilter;var q=l.getInstance(),r=q.mapKey(m);if(k(q.handlers))h.onLeave(q.resetHandlers.bind(q));var s={};for(var t=0;t<r.length;t++){m=r[t];if(!q.handlers[m]||p)q.handlers[m]=[];var u={callback:n,filter:o};s[m]=u;q.handlers[m].push(u);}return {remove:function(){for(var v in s){if(q.handlers[v]&&q.handlers[v].length){var w=q.handlers[v].indexOf(s[v]);w>=0&&q.handlers[v].splice(w,1);}delete s[v];}}};},keyCodeMap:{BACKSPACE:[8],TAB:[9],RETURN:[13],ESCAPE:[27],LEFT:[37,63234],UP:[38,63232],RIGHT:[39,63235],DOWN:[40,63233],DELETE:[46],COMMA:[188],PERIOD:[190],'`':[192],'[':[219],']':[221]},_interactiveElements:['input','select','textarea','object','embed'],_uninterestingTypes:{checkbox:1,radio:1,submit:1},_controlKeys:{8:1,9:1,13:1,27:1,37:1,63234:1,38:1,63232:1,39:1,63235:1,40:1,63233:1,46:1}});j(l.prototype,{mapKey:function(m){if(m>=0&&m<=9){if(typeof(m)!='number')m=m.charCodeAt(0)-48;return [48+m,96+m];}var n=l.keyCodeMap[m.toUpperCase()];if(n)return n;return [m.toUpperCase().charCodeAt(0)];},onkeyevent:function(m,n){n=i(n);var o=this.handlers[n.keyCode]||this.handlers[n.which],p,q,r;if(o)for(var s=0;s<o.length;s++){p=o[s].callback;q=o[s].filter;try{if(!q||q(n,m)){r=p(n,m);if(r===false)return Event.kill(n);}}catch(t){}}return true;},resetHandlers:function(){this.handlers={};}});e.exports=l;});
__d("Layer",["event-extensions","function-extensions","ArbiterMixin","BehaviorsMixin","BootloadedReact","ContextualThing","CSS","DataStore","DOM","HTML","KeyEventController","Parent","Style","copyProperties","ge"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('ArbiterMixin'),h=b('BehaviorsMixin'),i=b('BootloadedReact'),j=b('ContextualThing'),k=b('CSS'),l=b('DataStore'),m=b('DOM'),n=b('HTML'),o=b('KeyEventController'),p=b('Parent'),q=b('Style'),r=b('copyProperties'),s=b('ge'),t=[];function u(v,w){this._config=v||{};if(w){this._configure(this._config,w);var x=this._config.addedBehaviors||[];this.enableBehaviors(this._getDefaultBehaviors().concat(x));}}r(u,g);r(u,{init:function(v,w){v.init(w);},initAndShow:function(v,w){v.init(w).show();},show:function(v){v.show();}});r(u.prototype,g,h,{_initialized:false,_root:null,_shown:false,_hiding:false,_causalElement:null,_reactContainer:null,init:function(v){this._configure(this._config,v);var w=this._config.addedBehaviors||[];this.enableBehaviors(this._getDefaultBehaviors().concat(w));this._initialized=true;return this;},_configure:function(v,w){if(w){var x=m.isNode(w),y=typeof w==='string'||n.isHTML(w);this.containsReactComponent=i.isValidComponent(w);if(y){w=n(w).getRootNode();}else if(this.containsReactComponent){var z=document.createElement('div');i.renderComponent(w,z);w=this._reactContainer=z;}}this._root=this._buildWrapper(v,w);if(v.attributes)m.setAttributes(this._root,v.attributes);if(v.classNames)v.classNames.forEach(k.addClass.curry(this._root));k.addClass(this._root,'uiLayer');if(v.causalElement)this._causalElement=s(v.causalElement);l.set(this._root,'layer',this);},_getDefaultBehaviors:function(){return [];},getCausalElement:function(){return this._causalElement;},setCausalElement:function(v){this._causalElement=v;},getInsertParent:function(){return this._insertParent||document.body;},getRoot:function(){return this._root;},_getContentRoot:function(){return this._root;},_buildWrapper:function(v,w){return w;},setInsertParent:function(v){if(v){if(this._shown&&v!==this.getInsertParent()){m.appendContent(v,this.getRoot());this.updatePosition();}this._insertParent=v;}return this;},show:function(){if(this._shown)return this;var v=this.getRoot();this.inform('beforeshow');q.set(v,'visibility','hidden');q.set(v,'overflow','hidden');k.show(v);m.appendContent(this.getInsertParent(),v);if(this.updatePosition()!==false){t.push(this);this._shown=true;this.inform('show');u.inform('show',this);}else k.hide(v);q.set(v,'visibility','');q.set(v,'overflow','');this.inform('aftershow');return this;},hide:function(){if(this._hiding||!this._shown||this.inform('beforehide')===false)return this;this._hiding=true;if(this.inform('starthide')!==false)this.finishHide();return this;},finishHide:function(){if(this._shown){t.remove(this);this._hiding=false;this._shown=false;k.hide(this.getRoot());this.inform('hide');u.inform('hide',this);}},isShown:function(){return this._shown;},updatePosition:function(){return true;},destroy:function(){if(this.containsReactComponent)i.destroyAndReleaseReactRootNode(this._reactContainer);this.finishHide();var v=this.getRoot();m.remove(v);this.destroyBehaviors();this.inform('destroy');u.inform('destroy',this);l.remove(v,'layer');this._root=this._causalElement=null;}});Event.listen(document.documentElement,'keydown',function(event){if(o.filterEventTargets(event,'keydown'))for(var v=t.length-1;v>=0;v--)if(t[v].inform('key',event)===false)return false;},Event.Priority.URGENT);Event.listen(document.documentElement,'click',function(event){var v=t.length;if(!v)return;var w=event.getTarget();if(!m.contains(document.documentElement,w))return;if(p.byClass(w,'generic_dialog'))return;var x,y;while(v--){x=t[v];y=x.getContentRoot();if(j.containsIncludingLayers(y,w))return;if(x.inform('blur',event)===false)return;}});e.exports=u;});
__d("LayerAutoFocus",["function-extensions","copyProperties","DOMQuery","Input"],function(a,b,c,d,e,f){b('function-extensions');var g=b('copyProperties'),h=b('DOMQuery'),i=b('Input');function j(k){this._layer=k;}g(j.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('aftershow',this._focus.bind(this));},disable:function(){this._subscription.unsubscribe();this._subscription=null;},_focus:function(){var k=h.scry(this._layer.getRoot(),'.autofocus')[0];k&&i.focus(k);}});e.exports=j;});
__d("LayerButtons",["event-extensions","Parent","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Parent'),h=b('copyProperties');function i(j){this._layer=j;}h(i.prototype,{_listener:null,enable:function(){this._listener=Event.listen(this._layer.getRoot(),'click',this._handle.bind(this));},disable:function(){this._listener.remove();this._listener=null;},_handle:function(j){var k=j.getTarget(),l=g.byClass(k,'layerConfirm');if(l){if(this._layer.inform('confirm',l)===false)j.prevent();return;}var m=g.byClass(k,'layerCancel');if(m){if(this._layer.inform('cancel',m)!==false)this._layer.hide();j.prevent();return;}var n=g.byClass(k,'layerButton');if(n)if(this._layer.inform('button',n)===false)j.prevent();}});e.exports=i;});
__d("LayerDestroyOnHide",["function-extensions","copyProperties"],function(a,b,c,d,e,f){b('function-extensions');var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('hide',Function.prototype.defer.shield(this._layer.destroy.bind(this._layer)));},disable:function(){if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}}});e.exports=h;});
__d("LayerFadeOnHide",["Animation","Layer","Style","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Layer'),i=b('Style'),j=b('UserAgent'),k=b('copyProperties');function l(m){this._layer=m;}k(l.prototype,{_subscription:null,enable:function(){if(j.ie()<9)return;this._subscription=this._layer.subscribe('starthide',this._handleStartHide.bind(this));},disable:function(){if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}},_handleStartHide:function(){var m=true,n=h.subscribe('show',function(){n.unsubscribe();m=false;});(function(){n.unsubscribe();n=null;if(m){this._animate();}else this._layer.finishHide();}).bind(this).defer();return false;},_animate:function(){new g(this._layer.getRoot()).from('opacity',1).to('opacity',0).duration(150).ondone(this._finish.bind(this)).go();},_finish:function(){i.set(this._layer.getRoot(),'opacity','');this._layer.finishHide();}});e.exports=l;});
__d("LayerFadeOnShow",["Animation","Style","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Style'),i=b('UserAgent'),j=b('copyProperties');function k(l){this._layer=l;}j(k.prototype,{_subscriptions:null,enable:function(){if(i.ie()<9)return;this._subscriptions=[this._layer.subscribe('beforeshow',function(){h.set(this._layer.getRoot(),'opacity',0);}.bind(this)),this._layer.subscribe('show',this._animate.bind(this))];},disable:function(){if(this._subscriptions){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;}},_animate:function(){var l=this._layer.getRoot();new g(l).from('opacity',0).to('opacity',1).duration(100).ondone(h.set.curry(l,'opacity','')).go();}});e.exports=k;});
__d("LayerFormHooks",["event-extensions","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscriptions:null,enable:function(){var i=this._layer.getRoot();this._subscriptions=[Event.listen(i,'submit',this._onSubmit.bind(this)),Event.listen(i,'success',this._onSuccess.bind(this)),Event.listen(i,'error',this._onError.bind(this))];},disable:function(){this._subscriptions.forEach(function(i){i.remove();});this._subscriptions=null;},_onSubmit:function(event){if(this._layer.inform('submit',event)===false)event.kill();},_onSuccess:function(event){if(this._layer.inform('success',event)===false)event.kill();},_onError:function(event){var i=event.getData();if(this._layer.inform('error',{response:i.response})===false)event.kill();}});e.exports=h;});
__d("LayerHideOnBlur",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscriptions:null,_onBlur:null,enable:function(){this._subscriptions=[this._layer.subscribe('show',this._attach.bind(this)),this._layer.subscribe('hide',this._detach.bind(this))];if(this._layer.isShown())this._attach();},disable:function(){this._detach();while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;},_detach:function(){this._onBlur&&this._onBlur.unsubscribe();this._onBlur=null;},_attach:function(){(function(){this._onBlur=this._layer.subscribe('blur',this._layer.hide.shield(this._layer));}).bind(this).defer();}});e.exports=h;});
__d("LayerHideOnEscape",["event-extensions","copyProperties","Input","Keys"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('Input'),i=b('Keys');function j(k){this._layer=k;}g(j.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('key',this._handle.bind(this));},disable:function(){this._subscription.unsubscribe();this._subscription=null;},_handle:function(k,event){if(Event.getKeyCode(event)===i.ESC){var l=this._layer.getCausalElement();if(l)if(l.tabIndex!=-1)h.focus(l);this._layer.hide();return false;}}});e.exports=j;});
__d("LayerHideOnSuccess",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('success',this._layer.hide.bind(this._layer));},disable:function(){if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}}});e.exports=h;});
__d("LayerHideOnTransition",["Arbiter","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('copyProperties');function i(j){this._layer=j;}h(i.prototype,{_subscription:null,enable:function(){this._subscription=g.subscribe('page_transition',this._layer.hide.shield(this._layer),g.SUBSCRIBE_NEW);},disable:function(){if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}}});e.exports=i;});
__d("TabbableElements",["Style","createArrayFrom"],function(a,b,c,d,e,f){var g=b('Style'),h=b('createArrayFrom'),i={find:function(j){function k(n){if(n.tabIndex>0)return true;switch(n.tagName){case "A":return n.href&&n.rel!="ignore";case "INPUT":return n.type!="hidden"&&n.type!="file"&&!n.disabled;case "SELECT":return !n.disabled;case "TEXTAREA":return !n.disabled;default:return false;}}function l(n){if(n.offsetHeight===0&&n.offsetWidth===0)return true;var o=n;while(o&&o!=j&&g.get(o,'visibility')!=='hidden')o=o.parentNode;return o!==j;}var m=h(j.getElementsByTagName("*"));return m.filter(function(n){return k(n)&&!l(n);});}};e.exports=i;});
__d("LayerTabIsolation",["event-extensions","copyProperties","TabbableElements","Keys","Input"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('TabbableElements'),i=b('Keys'),j=b('Input');function k(l){this._layer=l;}g(k.prototype,{_tabHandler:null,_subscriptions:[],enable:function(){this._subscriptions=[this._layer.subscribe('show',this._attachHandler.bind(this)),this._layer.subscribe('hide',this._detachHandler.bind(this))];},disable:function(){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._detachHandler();},_attachHandler:function(){var l=this._layer.getRoot();this._tabHandler=Event.listen(l,'keydown',function(m){if(Event.getKeyCode(m)==i.TAB){var n=m.getTarget();if(n){var o=h.find(l),p=o[0],q=o[o.length-1],r=m.getModifiers().shift;if(r&&n==p){m.preventDefault();j.focus(q);}else if(!r&&n==q){m.preventDefault();j.focus(p);}}}});},_detachHandler:function(){if(this._tabHandler){this._tabHandler.remove();this._tabHandler=null;}}});e.exports=k;});
__d("LayerMouseHooks",["event-extensions","function-extensions","DOM","Layer","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('DOM'),h=b('Layer'),i=b('copyProperties');function j(k){this._layer=k;}i(j.prototype,{_mouseSubscriptions:[],_layerSubscriptions:[],enable:function(){var k=this._layer.getRoot();this._mouseSubscriptions=[Event.listen(k,'mouseenter',this._onMouseEnter.bind(this)),Event.listen(k,'mouseleave',this._onMouseLeave.bind(this))];this._layerSubscriptions=[h.subscribe('show',this._onLayerShow.bind(this)),h.subscribe('hide',this._onLayerHide.bind(this))];},disable:function(){this._mouseSubscriptions.forEach(function(k){k.remove();});this._mouseSubscriptions=[];this._layerSubscriptions.forEach(function(k){h.unsubscribe(k);});this._layerSubscriptions=[];},_onMouseEnter:function(k){this._fireMouseLeaveOnLayerHide=false;if(!this._spawnedLayer)this._layer.inform('mouseenter');},_onMouseLeave:function(k){if(!this._spawnedLayer)this._layer.inform('mouseleave');this._fireMouseLeaveOnLayerHide=!!this._spawnedLayer;},_onLayerShow:function(k,l){var m=l.getContext&&l.getContext();if(m)if(g.contains(this._layer.getRoot(),m))this._spawnedLayer=l;},_onLayerHide:function(k,l){if(l===this._spawnedLayer){this._spawnedLayer=null;if(this._fireMouseLeaveOnLayerHide)this._onMouseLeave.bind(this).defer();}}});e.exports=j;});
__d("Overlay",["Class","CSS","DataStore","DOM","Layer","LayerAutoFocus","LayerButtons","LayerDestroyOnHide","LayerFadeOnHide","LayerFadeOnShow","LayerFormHooks","LayerHideOnBlur","LayerHideOnEscape","LayerHideOnSuccess","LayerHideOnTransition","LayerTabIsolation","LayerMouseHooks","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('CSS'),i=b('DataStore'),j=b('DOM'),k=b('Layer'),l=b('LayerAutoFocus'),m=b('LayerButtons'),n=b('LayerDestroyOnHide'),o=b('LayerFadeOnHide'),p=b('LayerFadeOnShow'),q=b('LayerFormHooks'),r=b('LayerHideOnBlur'),s=b('LayerHideOnEscape'),t=b('LayerHideOnSuccess'),u=b('LayerHideOnTransition'),v=b('LayerTabIsolation'),w=b('LayerMouseHooks'),x=b('copyProperties');function y(z,aa){z=x({buildWrapper:true},z||{});this._shouldBuildWrapper=z.buildWrapper;this.parent.construct(this,z,aa);}g.extend(y,k);x(y.prototype,{_configure:function(z,aa){this.parent._configure(z,aa);var ba=this.getRoot();this._overlay=j.scry(ba,'div.uiOverlay')[0]||ba;h.hide(ba);j.appendContent(this.getInsertParent(),ba);i.set(this._overlay,'overlay',this);var ca=i.get(this._overlay,'width');ca&&this.setWidth(ca);if(this.setFixed)this.setFixed(i.get(this._overlay,'fixed')=='true');if(i.get(this._overlay,'fadeonshow')!='false')this.enableBehavior(p);if(i.get(this._overlay,'fadeonhide')!='false')this.enableBehavior(o);if(i.get(this._overlay,'hideonsuccess')!='false')this.enableBehavior(t);if(i.get(this._overlay,'hideonblur')=='true')this.enableBehavior(r);if(i.get(this._overlay,'destroyonhide')!='false')this.enableBehavior(n);return this;},_getDefaultBehaviors:function(){return this.parent._getDefaultBehaviors().concat([l,m,q,w,s,u,v]);},initWithoutBuildingWrapper:function(){this._shouldBuildWrapper=false;return this.init.apply(this,arguments);},_buildWrapper:function(z,aa){aa=this.parent._buildWrapper(z,aa);if(!this._shouldBuildWrapper){this._contentRoot=aa;return aa;}this._contentRoot=j.create('div',{className:'uiOverlayContent'},aa);return j.create('div',{className:'uiOverlay'},this._contentRoot);},getContentRoot:function(){return this._contentRoot;},destroy:function(){i.remove(this.getRoot(),'overlay');this.parent.destroy();}});e.exports=y;});
__d("ContextualDialogX",["event-extensions","ARIA","Arbiter","ArbiterMixin","Bootloader","Class","ContextualDialogFooterLink","ContextualThing","CSS","DataStore","DOM","Locale","Overlay","Parent","Style","Vector","$","copyProperties","getOverlayZIndex"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ARIA'),h=b('Arbiter'),i=b('ArbiterMixin'),j=b('Bootloader'),k=b('Class'),l=b('ContextualDialogFooterLink'),m=b('ContextualThing'),n=b('CSS'),o=b('DataStore'),p=b('DOM'),q=b('Locale'),r=b('Overlay'),s=b('Parent'),t=b('Style'),u=b('Vector'),v=b('$'),w=b('copyProperties'),x=b('getOverlayZIndex');function y(z,aa){this.parent.construct(this,z,aa);}k.extend(y,r);w(y,i,{ARROW_OFFSET:15,ARROW_LENGTH:16,ARROW_INSET:22,TOP_MARGIN:8,BOTTOM_MARGIN:30,LEFT_MARGIN:15,RIGHT_MARGIN:30,POSITION_TO_CLASS:{above:'uiContextualDialogAbove',below:'uiContextualDialogBelow',left:'uiContextualDialogLeft',right:'uiContextualDialogRight'},RIGHT_ALIGNED_CLASS:'uiContextualDialogRightAligned',ARROW_CLASS:{bottom:'uiContextualDialogArrowBottom',top:'uiContextualDialogArrowTop',right:'uiContextualDialogArrowRight',left:'uiContextualDialogArrowLeft'},POSITION_TO_ARROW:{above:'bottom',below:'top',left:'right',right:'left'},getInstance:function(z){var aa=o.get(z,'ContextualDialogX');if(!aa){var ba=s.byClass(z,'uiOverlay');if(ba)aa=o.get(ba,'overlay');}return aa;}});w(y.prototype,{_scrollListener:null,_scrollParent:null,_width:null,_fixed:false,_hasCustomArrow:false,_hasFooter:false,_showSubscription:null,_hideSubscription:null,_hovercardSubscription:null,_setContextSubscription:null,_resizeListener:null,_reflowSubscription:null,_configure:function(z,aa){this.parent._configure(z,aa);var ba=this.getRoot(),ca=o.get.curry(ba);this.setAlignH(ca('alignh','left'));this.setOffsetX(ca('offsetx',0));this.setOffsetY(ca('offsety',0));this.setPosition(ca('position','above'));this._hasCustomArrow=ca('hascustomarrow',false);this._hasFooter=ca('hasfooter',false);if(this._hasFooter){var da=p.scry(ba,'.uiContextualDialogFooterLink')[0];da&&this.enableBehavior(l);}this._setContextSubscription=this.subscribe('beforeshow',function(){this.unsubscribe(this._setContextSubscription);this._setContextSubscription=null;var ea=ca('context');if(ea){this.setContext(v(ea));}else{ea=ca('contextselector');if(ea)this.setContext(p.find(document,ea));}}.bind(this));this._content=p.scry(ba,'.uiContextualDialogContent')[0];this._showSubscription=this.subscribe('show',function(){var ea=this.updatePosition.shield(this);this._resizeListener=Event.listen(window,'resize',ea);this._reflowSubscription=h.subscribe('reflow',ea);this._setupScrollListener(this._scrollParent);m.register(ba,this.context);h.inform('layer_shown',{type:'ContextualDialog'});}.bind(this));this._hideSubscription=this.subscribe('hide',function(){this._teardownResizeAndReflowListeners();this._teardownScrollListener();m.remove(ba);h.inform('layer_hidden',{type:'ContextualDialog'});}.bind(this));this._hovercardSubscription=h.subscribe('Hovercard/hide',function(ea,fa){if(a.Hovercard.contains(this.getContext()))this.hide();}.bind(this));return this;},_buildWrapper:function(z,aa){var ba=this.parent._buildWrapper(z,aa);if(!this._shouldBuildWrapper)return ba;n.addClass(ba,'uiContextualDialog');return p.create('div',{className:'uiContextualDialogPositioner'},ba);},setWidth:function(z){this._width=Math.floor(z);return this;},setFixed:function(z){z=!!z;n.conditionClass(this.getRoot(),'uiContextualDialogFixed',z);this._fixed=z;return this;},setAlignH:function(z){this.alignH=z;this._updateAlignmentClass();this._shown&&this.updatePosition();this.position&&this._updateArrow();return this;},getContent:function(){return this._content;},getContext:function(){return this.context;},setContext:function(z){if(this._setContextSubscription){this.unsubscribe(this._setContextSubscription);this._setContextSubscription=null;}z=v(z);if(this.context&&this.context!=z)o.remove(this.context,'ContextualDialogX');this.context=z;g.setPopup(this.getCausalElement(),this.getRoot());var aa=s.byClass(z,'fbPhotoSnowlift');this.setInsertParent(aa||document.body);if(this._scrollListener&&this._scrollParent!==aa){this._teardownScrollListener();this._setupScrollListener(aa);}this._scrollParent=aa;var ba=x(z,this._insertParent);t.set(this.getRoot(),'z-index',ba>200?ba:'');o.set(this.context,'ContextualDialogX',this);return this;},getCausalElement:function(){return this.parent.getCausalElement()||this.context;},listen:function(z,aa){return Event.listen(this.getRoot(),z,aa);},setOffsetX:function(z){this.offsetX=parseInt(z,10)||0;this._shown&&this.updatePosition();return this;},setOffsetY:function(z){this.offsetY=parseInt(z,10)||0;this._shown&&this.updatePosition();return this;},setPosition:function(z){this.position=z;for(var aa in y.POSITION_TO_CLASS)n.conditionClass(this.getRoot(),y.POSITION_TO_CLASS[aa],z==aa);this._updateAlignmentClass();this._shown&&this.updatePosition();this._updateArrow();return this;},updatePosition:function(){if(!this.context)return false;if(this._width)t.set(this._overlay,'width',this._width+'px');var z=this._fixed?'viewport':'document',aa=u.getElementPosition(this.context,z),ba=this._scrollParent;if(ba)aa=aa.sub(u.getElementPosition(ba,'document')).add(ba.scrollLeft,ba.scrollTop);var ca=u.getElementDimensions(this.context),da=this.position=='above'||this.position=='below',ea=q.isRTL();if((this.position=='right'||(da&&this.alignH=='right'))!=ea)aa=aa.add(ca.x,0);if(this.position=='below')aa=aa.add(0,ca.y);var fa=new u(0,0);if(da&&this.alignH=='center'){fa=fa.add((ca.x-this._width)/2,0);}else{var ga=da?ca.x:ca.y,ha=2*y.ARROW_INSET;if(ga<ha){var ia=ga/2-y.ARROW_INSET;if(da&&(this.alignH=='right'!=ea))ia=-ia;fa=fa.add(da?ia:0,da?0:ia);}}fa=fa.add(this.offsetX,this.offsetY);if(ea)fa=fa.mul(-1,1);aa=aa.add(fa);if(this._fixed)aa=new u(aa.x,aa.y,'document');aa.setElementPosition(this.getRoot());this._adjustVerticalPosition();this._adjustHorizontalPosition();return true;},scrollTo:function(){if(this.context)j.loadModules(['DOMScroll'],function(z){z.scrollTo(this.context,true,true);}.bind(this));},destroy:function(){this.unsubscribe(this._showSubscription);this.unsubscribe(this._hideSubscription);this._hovercardSubscription.unsubscribe();if(this._setContextSubscription){this.unsubscribe(this._setContextSubscription);this._setContextSubscription=null;}this._teardownScrollListener();this._teardownResizeAndReflowListeners();this.context&&o.remove(this.context,'ContextualDialogX');this.parent.destroy();},_adjustVerticalPosition:function(){if(this.position!='left'&&this.position!='right'){t.set(this._overlay,'top','');return;}var z=this.getRoot(),aa=u.getElementPosition(z,'viewport').y,ba=u.getElementDimensions(this._overlay).y,ca=u.getViewportDimensions().y,da=y.TOP_MARGIN,ea=Math.min(Math.max(0,aa+ba+y.BOTTOM_MARGIN-ca),Math.max(-da,aa-da),ba-2*y.ARROW_INSET);t.set(this._overlay,'top',(-1*ea)+'px');t.set(this._arrow,'top',y.ARROW_OFFSET+'px');t.set(this._arrow,'marginTop',ea+'px');},_adjustHorizontalPosition:function(){if((this.position!='above'&&this.position!='below')||this.alignH!='left'){t.set(this._overlay,'left','');t.set(this._overlay,'right','');return;}var z=this.getRoot(),aa=u.getElementPosition(z,'viewport').x,ba=u.getElementDimensions(this._overlay).x,ca=u.getViewportDimensions().x,da=q.isRTL(),ea;if(!da){ea=aa+ba+y.RIGHT_MARGIN-ca;}else ea=y.LEFT_MARGIN+ba-aa;ea=Math.min(Math.max(0,ea),ba-2*y.ARROW_INSET);t.set(this._overlay,da?'right':'left',-1*ea+'px');t.set(this._arrow,da?'right':'left',y.ARROW_OFFSET+'px');t.set(this._arrow,da?'marginRight':'marginLeft',ea+'px');},_updateArrow:function(){var z=0;if(this.position=='above'||this.position=='below')switch(this.alignH){case 'center':z=50;break;case 'right':z=100;break;}this._renderArrow(y.POSITION_TO_ARROW[this.position],z);},_renderArrow:function(z,aa){for(var ba in y.ARROW_CLASS)n.conditionClass(this._overlay,y.ARROW_CLASS[ba],z==ba);n.conditionClass(this._overlay,'uiContextualDialogWithFooterArrowBottom',z=='bottom'&&this._hasFooter);if(z=='none')return;if(!this._arrow){this._arrow=p.create('i',{className:'uiContextualDialogArrow'});p.appendContent(this._overlay,this._arrow);}t.set(this._arrow,'top','');t.set(this._arrow,'left','');t.set(this._arrow,'right','');t.set(this._arrow,'margin','');var ca=z=='top'||z=='bottom',da=ca?(q.isRTL()?'right':'left'):'top';aa=aa||0;t.set(this._arrow,da,aa+'%');var ea=y.ARROW_LENGTH+y.ARROW_OFFSET*2,fa=-(ea*aa/100-y.ARROW_OFFSET);t.set(this._arrow,'margin-'+da,fa+'px');if(this._hasCustomArrow)y.inform('arrow_rendered',{type:'ContextualDialog',root:this._root,position:z,side:da,offset_percent:aa,side_margin:fa});},_updateAlignmentClass:function(){n.conditionClass(this.getRoot(),y.RIGHT_ALIGNED_CLASS,(this.position=='above'||this.position=='below')&&this.alignH=='right');},_setupScrollListener:function(z){this._scrollListener=Event.listen(z||window,'scroll',this._adjustVerticalPosition.shield(this));},_teardownScrollListener:function(){if(this._scrollListener){this._scrollListener.remove();this._scrollListener=null;}},_teardownResizeAndReflowListeners:function(){if(this._resizeListener){this._resizeListener.remove();this._resizeListener=null;}if(this._reflowSubscription){this._reflowSubscription.unsubscribe();this._reflowSubscription=null;}}});e.exports=y;});
__d("Toggler",["array-extensions","event-extensions","Arbiter","ArbiterMixin","Class","ContextualDialogX","ContextualThing","CSS","DataStore","Dialog","DOM","copyProperties","createArrayFrom","ge","getObjectValues"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('Class'),j=b('ContextualDialogX'),k=b('ContextualThing'),l=b('CSS'),m=b('DataStore'),n=b('Dialog'),o=b('DOM'),p=b('copyProperties'),q=b('createArrayFrom'),r=b('ge'),s=b('getObjectValues'),t=[],u;function v(){v=bagofholding;Event.listen(document.documentElement,'click',function(event){var z=event.getTarget();t.forEach(function(aa){aa.clickedTarget=z;aa.active&&!aa.sticky&&!k.containsIncludingLayers(aa.getActive(),z)&&!aa.inTargetFlyout(z)&&aa.inActiveDialog()&&aa.hide();});},Event.Priority.URGENT);}var w=function(){this.active=null;this.togglers={};this.setSticky(false);t.push(this);this.subscribe(['show','hide'],w.inform.bind(w));return v();};p(w.prototype,h,{show:function(z){var aa=x(this,z),ba=aa.active;if(z!==ba){ba&&aa.hide();aa.active=z;l.addClass(z,'openToggler');var ca=o.scry(z,'a[rel="toggle"]');if(ca.length>0&&ca[0].getAttribute('data-target'))l.removeClass(r(ca[0].getAttribute('data-target')),'toggleTargetClosed');o.appendContent(z,aa.getToggler('next'));o.prependContent(z,aa.getToggler('prev'));aa.inform('show',aa);}},hide:function(z){var aa=x(this,z),ba=aa.active;if(ba&&(!z||z===ba)){l.removeClass(ba,'openToggler');var ca=o.scry(ba,'a[rel="toggle"]');if(ca.length>0&&ca[0].getAttribute('data-target'))l.addClass(r(ca[0].getAttribute('data-target')),'toggleTargetClosed');s(aa.togglers).forEach(o.remove);aa.inform('hide',aa);aa.active=null;}},toggle:function(z){var aa=x(this,z);if(aa.active===z){aa.hide();}else aa.show(z);},getActive:function(){return x(this).active;},isShown:function(){return x(this).active&&l.hasClass(x(this).active,'openToggler');},inTargetFlyout:function(z){var aa=y(this.getActive());return aa&&k.containsIncludingLayers(aa,z);},inActiveDialog:function(){var z=n.getCurrent();return !z||o.contains(z.getRoot(),this.getActive());},getToggler:function(z){var aa=x(this);if(!aa.togglers[z]){aa.togglers[z]=o.create('button',{className:'hideToggler',onfocus:function(){var ba=o.scry(aa.active,'a[rel="toggle"]')[0];ba&&ba.focus();aa.hide();}});aa.togglers[z].setAttribute('type','button');}return this.togglers[z];},setSticky:function(z){var aa=x(this);z=z!==false;if(z!==aa.sticky){aa.sticky=z;if(z){aa._pt&&aa._pt.unsubscribe();}else aa._pt=g.subscribe('page_transition',aa.hide.bind(aa,null));}return aa;}});p(w,w.prototype);p(w,{bootstrap:function(z){var aa=z.parentNode;w.getInstance(aa).toggle(aa);},createInstance:function(z){var aa=new w().setSticky(true);m.set(z,'toggler',aa);return aa;},getInstance:function(z){while(z){var aa=m.get(z,'toggler');if(aa)return aa;if(l.hasClass(z,'uiToggleContext'))return w.createInstance(z);z=z.parentNode;}return (u=u||new w());},listen:function(z,aa,ba){return w.subscribe(q(z),function(ca,da){if(da.getActive()===aa)return ba(ca,da);});},subscribe:(function(z){return function(aa,ba){aa=q(aa);if(aa.contains('show'))t.forEach(function(ca){if(ca.getActive())ba.curry('show',ca).defer();});return z(aa,ba);};})(w.subscribe.bind(w))});function x(z,aa){if(z instanceof w)return z;return w.getInstance(aa);}function y(z){var aa=o.scry(z,'a[rel="toggle"]');if(aa.length>0&&aa[0].getAttribute('data-target'))return r(aa[0].getAttribute('data-target'));}e.exports=w;});
__d("Dock",["event-extensions","function-extensions","Arbiter","ArbiterMixin","ChatQuietLinks","CSS","DataStore","DOM","Parent","Style","Toggler","Vector","copyProperties","ge"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('ChatQuietLinks'),j=b('CSS'),k=b('DataStore'),l=b('DOM'),m=b('Parent'),n=b('Style'),o=b('Toggler'),p=b('Vector'),q=b('copyProperties'),r=b('ge');function s(){}q(s,h,{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(t){this.init=bagofholding;this.rootEl=t;this.calculateViewportDimensions();this.calculateFlyoutHeightOffset();i.removeEmptyHrefs(this.rootEl);Event.listen(t,'click',this._onClick.bind(this));Event.listen(window,'resize',this._onWindowResize.bind(this));o.subscribe(['show','hide'],function(u,v){var w=v.getActive();if(!l.contains(t,w))return;if(j.hasClass(w,'fbNub')){this.notifyNub(w,u);if(u==='show')this._resizeNubFlyout(w);}else{var x=m.byClass(w,'fbNubFlyout');if(x)j.conditionClass(x,'menuOpened',u==='show');}}.bind(this));this.inform('init',{},g.BEHAVIOR_PERSISTENT);},calculateViewportDimensions:function(){return (this.viewportDimensions=p.getViewportDimensions());},calculateFlyoutHeightOffset:function(){this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+p.getElementDimensions(this.rootEl).y;var t=r('blueBar');if(t){var u=n.isFixed(t)?'viewport':'document';this.flyoutHeightOffset+=p.getElementPosition(t,u).y+p.getElementDimensions(t).y;}},toggle:function(t){var u=this._findFlyout(t);if(!u)return;this.subscribe('init',function(){o.toggle(t);});},show:function(t){this.subscribe('init',function(){o.show(t);});},showNub:function(t){j.show(t);},hide:function(t){this.subscribe('init',function(){var u=o.getInstance(t);l.contains(t,u.getActive())&&u.hide();});},hideNub:function(t){j.hide(t);this.hide(t);},setUseMaxHeight:function(t,u){j.conditionClass(t,'maxHeight',u!==false);this._resizeNubFlyout(t);},_resizeNubFlyout:function(t){var u=this._findFlyout(t);if(!u||!(j.hasClass(t,'openToggler')||j.hasClass(t,'opened')))return;var v=l.find(u,'div.fbNubFlyoutOuter'),w=l.find(v,'div.fbNubFlyoutInner'),x=l.find(w,'div.fbNubFlyoutBody'),y=x.scrollTop,z=x.offsetHeight;n.set(x,'height','auto');var aa=p.getElementPosition(u,'viewport'),ba=p.getElementDimensions(u),ca=p.getElementDimensions(x),da=this.getMaxFlyoutHeight(t);n.set(u,'max-height',da+'px');n.set(v,'max-height',da+'px');ba=p.getElementDimensions(u);var ea=p.getElementDimensions(w),fa=ea.y-ca.y;if(ba.y>fa)n.set(x,'height',(ba.y-fa)+'px');j.removeClass(u,'swapDirection');var ga=p.getElementPosition(u).x;j.conditionClass(u,'swapDirection',function(){if(ga<0)return true;return (ga+ba.x>this.viewportDimensions.x);}.bind(this)());if(y+z>=ca.y){x.scrollTop=ca.y;}else x.scrollTop=y;this.notifyNub(t,'resize');},getMaxFlyoutHeight:function(t){var u=this._findFlyout(t),v=p.getElementPosition(u,'viewport'),w=p.getElementDimensions(u),x=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.flyoutHeightOffset)-(this.viewportDimensions.y-v.y-w.y);return Math.max(x,0);},resizeAllFlyouts:function(){var t=l.scry(this.rootEl,'div.fbNub.openToggler');t=t.concat(l.scry(this.rootEl,'div.fbNub.opened'));var u=t.length;while(u--)this._resizeNubFlyout(t[u]);},_onClick:function(event){var t=event.getTarget(),u=m.byClass(t,'fbNub');if(u){if(m.byClass(t,'fbNubFlyoutTitlebar')){var v=m.byTag(t,'a');if(!v){this.hide(u);return false;}}this.notifyNub(u,'click');}},_onWindowResize:function(event){this.calculateViewportDimensions();this.resizeAllFlyouts();},_findFlyout:function(t){return j.hasClass(t,'fbNubFlyout')?t:l.scry(t,'div.fbNubFlyout')[0]||null;},registerNubController:function(t,u){k.set(t,'dock:nub:controller',u);u.subscribe('nub/button/content-changed',this.inform.shield(this,'resize',t));u.subscribe('nub/flyout/content-changed',this._resizeNubFlyout.shield(this,t));},unregisterNubController:function(t){k.remove(t,'dock:nub:controller');},notifyNub:function(t,u,v){var w=k.get(t,'dock:nub:controller');w&&w.inform(u,v);}});e.exports=a.Dock||s;});
__d("NubController",["ArbiterMixin","Class","Dock","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('Class'),i=b('Dock'),j=b('copyProperties');function k(){}j(k.prototype,g,{init:function(l){this.el=l;i.registerNubController(l,this);return this;},buttonContentChanged:function(){this.inform('nub/button/content-changed');},flyoutContentChanged:function(){this.inform('nub/flyout/content-changed');},hide:function(){i.hide(this.el);},show:function(){i.show(this.el);}});e.exports=k;});
__d("NavigationMessage",[],function(a,b,c,d,e,f){var g={NAVIGATION_BEGIN:'NavigationMessage/navigationBegin',NAVIGATION_SELECT:'NavigationMessage/navigationSelect',NAVIGATION_FIRST_RESPONSE:'NavigationMessage/navigationFirstResponse',NAVIGATION_COMPLETED:'NavigationMessage/navigationCompleted',NAVIGATION_FAILED:'NavigationMessage/navigationFailed',NAVIGATION_COUNT_UPDATE:'NavigationMessage/navigationCount',NAVIGATION_FAVORITE_UPDATE:'NavigationMessage/navigationFavoriteUpdate',NAVIGATION_ITEM_REMOVED:'NavigationMessage/navigationItemRemoved',NAVIGATION_ITEM_HIDDEN:'NavigationMessage/navigationItemHidden',INTERNAL_LOADING_BEGIN:'NavigationMessage/internalLoadingBegin',INTERNAL_LOADING_COMPLETED:'NavigationMessage/internalLoadingCompleted'};e.exports=g;});
__d("legacy:ui-side-nav-message",["NavigationMessage"],function(a,b,c,d){a.NavigationMessage=b('NavigationMessage');},3);
__d("Menu",["event-extensions","Arbiter","CSS","DataStore","DOM","HTML","Keys","Parent","Run","Style","UserAgent","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('DataStore'),j=b('DOM'),k=b('HTML'),l=b('Keys'),m=b('Parent'),n=b('Run'),o=b('Style'),p=b('UserAgent'),q=b('copyProperties'),r=null,s='menu:mouseover',t=null;function u(ca){if(h.hasClass(ca,'uiMenuContainer'))return ca;return m.byClass(ca,'uiMenu');}function v(ca){return m.byClass(ca,'uiMenuItem');}function w(ca){if(document.activeElement){var da=v(document.activeElement);return ca.indexOf(da);}return -1;}function x(ca){return j.find(ca,'a.itemAnchor');}function y(ca){return h.hasClass(ca,'checked');}function z(ca){return !h.hasClass(ca,'disabled')&&o.get(ca,'display')!=='none';}function aa(event){var ca=document.activeElement;if(!ca||!m.byClass(ca,'uiMenu')||!j.isNodeOfType(ca,['input','textarea'])){var da=v(event.getTarget());da&&r.focusItem(da);}}function ba(ca){p.firefox()&&x(ca).blur();r.inform('select',{menu:u(ca),item:ca});}n.onLoad(function(){var ca={};ca.click=function(event){var da=v(event.getTarget());if(da&&z(da)){ba(da);var ea=x(da),fa=ea.href,ga=ea.getAttribute('rel');return (ga&&ga!=='ignore')||(fa&&fa.charAt(fa.length-1)!=='#');}};ca.keydown=function(event){var da=event.getTarget();if(event.getModifiers().any)return;if(!t||j.isNodeOfType(da,['input','textarea']))return;var ea=Event.getKeyCode(event),fa;switch(ea){case l.UP:case l.DOWN:var ga=r.getEnabledItems(t);fa=w(ga);r.focusItem(ga[fa+(ea===l.UP?-1:1)]);return false;case l.SPACE:var ha=v(da);if(ha){ba(ha);event.prevent();}break;default:var ia=String.fromCharCode(ea).toLowerCase(),ja=r.getEnabledItems(t);fa=w(ja);var ka=fa,la=ja.length;while((~fa&&(ka=++ka%la)!==fa)||(!~fa&&++ka<la)){var ma=r.getItemLabel(ja[ka]);if(ma&&ma.charAt(0).toLowerCase()===ia){r.focusItem(ja[ka]);return false;}}}};Event.listen(document.documentElement,ca);});r=e.exports=q(new g(),{focusItem:function(ca){if(ca&&z(ca)){this._removeSelected(u(ca));h.addClass(ca,'selected');x(ca).focus();}},getEnabledItems:function(ca){return r.getItems(ca).filter(z);},getCheckedItems:function(ca){return r.getItems(ca).filter(y);},getItems:function(ca){return j.scry(ca,'li.uiMenuItem');},getItemLabel:function(ca){return ca.getAttribute('data-label',2)||'';},isItemChecked:function(ca){return h.hasClass(ca,'checked');},register:function(ca,da){ca=u(ca);if(!i.get(ca,s))i.set(ca,s,Event.listen(ca,'mouseover',aa));if(da!==false)t=ca;},setItemEnabled:function(ca,da){if(!da&&!j.scry(ca,'span.disabledAnchor')[0])j.appendContent(ca,j.create('span',{className:j.find(ca,'a').className+' disabledAnchor'},k(x(ca).innerHTML)));h.conditionClass(ca,'disabled',!da);},toggleItem:function(ca){var da=!r.isItemChecked(ca);r.setItemChecked(ca,da);},setItemChecked:function(ca,da){h.conditionClass(ca,'checked',da);x(ca).setAttribute('aria-checked',da);},unregister:function(ca){ca=u(ca);var da=i.remove(ca,s);da&&da.remove();t=null;this._removeSelected(ca);},_removeSelected:function(ca){r.getItems(ca).filter(function(da){return h.hasClass(da,'selected');}).forEach(function(da){h.removeClass(da,'selected');});}});});
__d("SubscriptionLevels",[],function(a,b,c,d,e,f){var g={ALL:'162318810514679',DEFAULT:'271670892858696',TOP:'266156873403755'};e.exports=g;});
__d("EditSubscriptions",["event-extensions","function-extensions","Arbiter","AsyncRequest","CSS","DOM","ge","Menu","Parent","SubscriptionLevels"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOM'),k=b('ge'),l=b('Menu'),m=b('Parent'),n=b('SubscriptionLevels'),o=13,p=45,q=[n.ALL,n.DEFAULT,n.TOP],r={},s={},t={},u={},v={},w={},x={},y={},z={},aa={},ba={},ca="/ajax/follow/follow_profile.php",da="/ajax/follow/unfollow_profile.php",ea="/ajax/settings/notifications/notify_me.php",fa={},ga={},ha=null,ia=false;function ja(gb){return q.contains(gb);}function ka(gb,hb,ib,jb){var kb=m.byClass(jb,'uiMenuItem')||m.byClass(jb,'uiMenuXItem');if(!kb||!j.contains(gb,kb)){return;}else if(i.hasClass(kb,'SubscribeMenuSubscribeCheckbox')){if(t[hb]){na(gb,hb);}else ma(gb,hb);return false;}else if(i.hasClass(kb,'SubscribeMenuUnsubscribe')){na(gb,hb);return false;}else if(i.hasClass(kb,'SubscribeMenuSettingsItem')){ab(gb,true);return false;}else if(i.hasClass(kb,'SubscriptionMenuGoBack')){ab(gb,false);return false;}else if(i.hasClass(kb,'SubscriptionMenuItem')){la(gb,hb,ib,kb);return false;}else if(i.hasClass(kb,'SubscribeMenuNotifyMeCheckbox')){if(u[hb]){eb(gb,hb);}else db(gb,hb);return false;}}function la(gb,hb,ib,jb){if(i.hasClass(jb,'SubscriptionMenuLevel')){if(l.isItemChecked(jb))return;ya(gb,hb,ra(jb),true,ib);}else if(i.hasClass(jb,'SubscriptionMenuCategory')){va(hb,jb,!l.isItemChecked(jb),true,ib);}else if(i.hasClass(jb,'SubscriptionAppStory'))xa(hb,jb,!l.isItemChecked(jb),ib);}function ma(gb,hb){var ib={profile_id:hb};g.inform('FollowingUser',ib);new h().setURI(ca).setMethod('POST').setData({profile_id:hb,location:oa(gb)}).setErrorHandler(g.inform.curry('FollowUserFail',ib)).send();}function na(gb,hb){var ib={profile_id:hb};g.inform('UnfollowingUser',ib);new h().setURI(da).setMethod('POST').setData({profile_id:hb,location:oa(gb)}).setErrorHandler(g.inform.curry('UnfollowUserFail',ib)).send();}function oa(gb){if(i.hasClass(gb,'followButtonFlyout')){return o;}else return p;}function pa(gb,hb,ib){var jb={profile_id:gb,level:y[gb],custom_categories:z[gb],location:ib};new h().setURI('/ajax/follow/manage_subscriptions.php').setData(jb).send();}function qa(gb,hb){var ib=z[hb]||[],jb=l.getItems(gb);jb.forEach(function(kb){if(i.hasClass(kb,'SubscriptionMenuCategory')){var lb=ra(kb);if(ib.contains(lb)){ta(kb);}else ua(kb);}else if(i.hasClass(kb,'SubscriptionAppStory')){var mb=ra(kb);if(ga[hb]&&ga[hb][mb]){ta(kb);}else ua(kb);}});ya(gb,hb,y[hb],false);}function ra(gb){var hb=j.scry(gb,'input')[0];return hb&&hb.value;}function sa(gb){return j.find(gb,'a.itemAnchor');}function ta(gb){i.addClass(gb,'checked');sa(gb).setAttribute('aria-checked',true);}function ua(gb){i.removeClass(gb,'checked');sa(gb).setAttribute('aria-checked',false);}function va(gb,hb,ib,jb,kb){if(ib){ta(hb);}else ua(hb);var lb=ra(hb);if(ja(lb)){ib&&wa(gb,lb);}else if(ib){if(!z[gb].contains(lb))z[gb].push(lb);}else{var mb=z[gb].indexOf(lb);if(mb!==-1)z[gb].splice(mb,1);}if(jb)pa(gb,lb,kb);}function wa(gb,hb){y[gb]=hb;g.inform('SubscriptionLevelUpdated',{profile_id:gb,level:hb});}function xa(gb,hb,ib,jb){var kb='/ajax/feed/filter_action/',lb=ra(hb),mb={actor_id:gb,app_id:lb};if(ib){ta(hb);kb+='resubscribe_user_app/';mb.action='resubscribe_user_app';if(!ga[gb])ga[gb]={};ga[gb][lb]=true;}else{ua(hb);kb+='unsubscribe_user_app_checkbox/';mb.action='unsubscribe_user_app_checkbox';if(ga[gb])ga[gb][lb]=false;}new h().setURI(kb).setData(mb).send();}function ya(gb,hb,ib,jb,kb){var lb=j.scry(gb,'.SubscriptionMenuLevel'),mb=null;lb.forEach(function(nb){if(ra(nb)==ib){mb=nb;}else if(l.isItemChecked(nb))va(hb,nb,false,false);});mb&&va(hb,mb,true,jb,kb);}function za(gb,hb,ib){t[hb]=ib;i.conditionClass(gb,'isUnsubscribed',!ib);var jb=j.scry(gb,'li.SubscribeMenuSubscribeCheckbox');if(jb.length!==0){var kb=jb[0];if(ib){ta(kb);}else ua(kb);}}function ab(gb,hb){i.conditionClass(gb,'subscriptionMenuOpen',hb);}function bb(gb,hb,ib){var jb=j.find(gb,".FriendListSubscriptionsMenu"),kb=j.find(jb,".uiMenuInner");if(ha!=null)ha.forEach(function(lb){kb.removeChild(lb);});ib.forEach(function(lb){kb.appendChild(lb);});ha=ib;}g.subscribe('UnfollowUser',function(gb,hb){if(aa[hb.profile_id]){wa(hb.profile_id,aa[hb.profile_id]);z[hb.profile_id]=ba[hb.profile_id].slice();}});g.subscribe('UpdateSubscriptionLevel',function(gb,hb){var ib=hb.profile_id+'',jb=hb.level+'';wa(ib,jb);var kb;for(kb in r)if(r[kb]===ib){var lb=k(kb);lb&&ya(lb,ib,jb,false);}});function cb(gb,hb,ib){u[hb]=ib;var jb=w[hb]&&!ia,kb=j.scry(gb,'li.SubscribeMenuNotifyMeCheckbox');if(kb.length!==0){var lb=kb[0];i.conditionShow(lb,!jb);i.conditionShow(j.find(gb,'li.SubscribeMenuNotifyMeCheckboxSeparator'),!jb);if(ib){ta(lb);}else ua(lb);}}function db(gb,hb){var ib={profile_id:hb};g.inform('EnableNotifsForUser',ib);new h().setURI(ea).setMethod('POST').setData({notifier_id:hb,enable:true}).setErrorHandler(g.inform.curry('EnableNotifsForUserFail',ib)).send();}function eb(gb,hb){var ib={profile_id:hb};g.inform('DisableNotifsForUser',ib);new h().setURI(ea).setMethod('POST').setData({notifier_id:hb,enable:false}).setErrorHandler(g.inform.curry('DisableNotifsForUserFail',ib)).send();}var fb={init:function(gb,hb,ib){var jb=j.getID(gb);if(!r[jb])Event.listen(gb,'click',function(kb){return ka(gb,r[jb],ib,kb.getTarget());});if(ib===p&&fa[hb].length)bb(gb,hb,fa[hb]);if(y[hb])qa(gb,hb);r[jb]=hb;i.conditionClass(gb,'NonFriendSubscriptionMenu',!s[hb]);i.conditionClass(gb,'cannotSubscribe',!v[hb]);i.conditionClass(gb,'noSubscriptionLevels',w[hb]&&!x[hb]);i.conditionClass(gb,'noSubscribeCheckbox',!s[hb]&&!w[hb]);za(gb,hb,t[hb]);cb(gb,hb,u[hb]);g.subscribe(['FollowUser','FollowingUser','UnfollowUserFail'],function(kb,lb){za(gb,hb,true);}.bind(this));g.subscribe(['UnfollowUser','UnfollowingUser','FollowUserFail'],function(kb,lb){g.inform('SubMenu/Reset');za(gb,hb,false);}.bind(this));g.subscribe(['EnableNotifsForUser','DisableNotifsForUserFail'],function(kb,lb){cb(gb,hb,true);}.bind(this));g.subscribe(['DisableNotifsForUser','EnableNotifsForUserFail'],function(kb,lb){cb(gb,hb,false);}.bind(this));ab(gb,false);},getSubscriptions:function(gb){return {level:y[gb],custom_categories:z[gb]};},setSubscriptions:function(gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb){wa(gb,mb+'');s[gb]=hb;t[gb]=ib;v[gb]=jb;w[gb]=kb;x[gb]=lb;aa[gb]=ob+'';z[gb]=nb.map(String);ba[gb]=pb.map(String);fa[gb]=sb;u[gb]=qb;ia=rb;}};e.exports=a.EditSubscriptions||fb;});
__d("csx",[],function(a,b,c,d,e,f){function g(h){throw new Error('csx(...): Unexpected class selector transformation.');}e.exports=g;});
__d("AccessibleLayer",["event-extensions","CSS","DOM","Input","copyProperties","csx","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DOM'),i=b('Input'),j=b('copyProperties'),k=b('csx'),l=b('tx');function m(n){this._layer=n;}j(m.prototype,{enable:function(){var n=this._layer.getRoot();if(n.tabIndex==-1)n.tabIndex=0;var o=h.create('a',{className:'accessible_elem',href:'#'},["Close popup and return"]);h.appendContent(n,o);this._listener=Event.listen(o,'click',this._closeListener.bind(this));this._afterShowSubscription=this._layer.subscribe('aftershow',this._onAfterShow.bind(this));},disable:function(){this._listener.remove();this._afterShowSubscription.unsubscribe();this._listener=this._afterShowSubscription=null;},_closeListener:function(event){var n=this._layer.getCausalElement();if(n){if(n.tabIndex==-1){n.tabIndex=0;g.addClass(n,"_h0");}i.focus(n);}this._layer.hide();},_onAfterShow:function(){var n=document.activeElement,o=this._layer.getRoot();if(!h.isNodeOfType(n,['input','textarea'])&&!h.contains(o,n))i.focus(o);}});e.exports=m;});
__d("Rect",["Vector","$","copyProperties"],function(a,b,c,d,e,f){var g=b('Vector'),h=b('$'),i=b('copyProperties');function j(k,l,m,n,o){if(arguments.length===1){if(k instanceof j)return k;if(k instanceof g)return new j(k.y,k.x,k.y,k.x,k.domain);return j.getElementBounds(h(k));}i(this,{t:k,r:l,b:m,l:n,domain:o||'pure'});}i(j.prototype,{w:function(){return this.r-this.l;},h:function(){return this.b-this.t;},toString:function(){return '(('+this.l+', '+this.t+'), ('+this.r+', '+this.b+'))';},contains:function(k){k=new j(k).convertTo(this.domain);var l=this;return (l.l<=k.l&&l.r>=k.r&&l.t<=k.t&&l.b>=k.b);},add:function(k,l){if(arguments.length==1){if(k.domain!='pure')k=k.convertTo(this.domain);return this.add(k.x,k.y);}var m=parseFloat(k),n=parseFloat(l);return new j(this.t+n,this.r+m,this.b+n,this.l+m,this.domain);},sub:function(k,l){if(arguments.length==1){return this.add(k.mul(-1));}else return this.add(-k,-l);},boundWithin:function(k){var l=0,m=0;if(this.l<k.l){l=k.l-this.l;}else if(this.r>k.r)l=k.r-this.r;if(this.t<k.t){m=k.t-this.t;}else if(this.b>k.b)m=k.b-this.b;return this.add(l,m);},getCenter:function(){return new g(this.l+this.w()/2,this.t+this.h()/2,this.domain);},getPositionVector:function(){return new g(this.l,this.t,this.domain);},getDimensionVector:function(){return new g(this.w(),this.h(),'pure');},convertTo:function(k){if(this.domain==k)return this;if(k=='pure')return new j(this.t,this.r,this.b,this.l,'pure');if(this.domain=='pure')return new j(0,0,0,0);var l=new g(this.l,this.t,this.domain).convertTo(k);return new j(l.y,l.x+this.w(),l.y+this.h(),l.x,k);}});i(j,{deserialize:function(k){var l=k.split(':');return new j(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[0]));},newFromVectors:function(k,l){return new j(k.y,k.x+l.x,k.y+l.y,k.x,k.domain);},getElementBounds:function(k){return j.newFromVectors(g.getElementPosition(k),g.getElementDimensions(k));},getViewportBounds:function(){return j.newFromVectors(g.getScrollPosition(),g.getViewportDimensions());},minimumBoundingBox:function(k){var l=new j(Math.min(),Math.max(),Math.max(),Math.min()),m;for(var n=0;n<k.length;n++){m=k[n];l.t=Math.min(l.t,m.t);l.r=Math.max(l.r,m.r);l.b=Math.max(l.b,m.b);l.l=Math.min(l.l,m.l);}return l;}});e.exports=j;});
__d("Hovercard",["ClickRef","event-extensions","function-extensions","AccessibleLayer","Arbiter","AsyncRequest","AsyncSignal","ContextualDialogX","CSS","DOM","DOMQuery","LayerDestroyOnHide","LayerFadeOnHide","LayerFadeOnShow","Parent","Rect","UserAgent","URI","Vector","ViewportBounds","clickRefAction","tx","userAction"],function(a,b,c,d,e,f){b('ClickRef');b('event-extensions');b('function-extensions');var g=b('AccessibleLayer'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('AsyncSignal'),k=b('ContextualDialogX'),l=b('CSS'),m=b('DOM'),n=b('DOMQuery'),o=b('LayerDestroyOnHide'),p=b('LayerFadeOnHide'),q=b('LayerFadeOnShow'),r=b('Parent'),s=b('Rect'),t=b('UserAgent'),u=b('URI'),v=b('Vector'),w=b('ViewportBounds'),x=b('clickRefAction'),y=b('tx'),z=b('userAction'),aa=450,ba=385,ca={},da={},ea=null,fa=null,ga=null,ha=150,ia=700,ja=1000,ka=250,la=null,ma=null,na=null,oa=null;function pa(){if(t.ie()<7)return;Event.listen(document.documentElement,'mouseover',qa);Event.listen(window,'scroll',function(){lb.hide(true);});h.subscribe('page_transition',function(){wa();lb.dirtyAll();},h.SUBSCRIBE_NEW);h.subscribe('layer_shown',function(mb,nb){if(nb.type!='Hovercard'&&nb.type!='ContextualDialog')wa();},h.SUBSCRIBE_NEW);k.subscribe('arrow_rendered',ya,h.SUBSCRIBE_NEW);}function qa(event){var mb=r.byTag(event.getTarget(),'a');lb.processNode(mb)&&event.stop();}function ra(mb){fa=mb;if(!sa(mb)){var nb;if(!mb||!(nb=ta(mb))){da.moveToken&&da.moveToken.remove();da={};return false;}if(da.node!=mb){da.moveToken&&da.moveToken.remove();da={node:mb,endpoint:nb,pos:null};}}return true;}function sa(mb){return mb&&ea&&da.node==mb;}function ta(mb){return mb.getAttribute('data-hovercard');}function ua(mb){var nb=Event.listen(mb,'mouseout',function(){clearTimeout(la);clearTimeout(ma);nb.remove();fa=null;lb.hide();});if(!da.moveToken)da.moveToken=Event.listen(mb,'mousemove',function(event){da.pos=v.getEventPosition(event);});clearTimeout(la);clearTimeout(ma);clearTimeout(oa);var ob=ha,pb=ea?ka:ia;if(mb.getAttribute('data-hovercard-instant'))ob=pb=50;la=setTimeout(hb.curry(mb),ob);ma=setTimeout(va.curry(mb),pb);}function va(mb,nb){if(da.node!=mb)return;var ob=ca[ta(mb)];if(ob){xa(ob);}else if(nb){xa(jb());}else{var pb=ea?ka:ia;na=setTimeout(va.curry(mb,true),ja-pb);}}function wa(){lb.hide(true);clearTimeout(ma);}function xa(mb){var nb=da.node,ob=ea,pb=ob!=nb;if(ea){var qb=k.getInstance(ea);qb&&qb.hide();}if(!m.contains(document.body,nb)){lb.hide(true);return;}ea=nb;ga=mb;db();mb.setContext(nb).show();if(pb){(function(){new j('/ajax/hovercard/shown.php').send();x('himp',ea,null,'FORCE',{ft:{evt:39}});z('hovercard',ea).uai('show');}).defer();if(ob){h.inform('Hovercard/hide',{node:ob});}else h.inform('layer_shown',{type:'Hovercard'});h.inform('Hovercard/show',{node:nb});}}function ya(mb,nb){var ob=ca[da.endpoint];if(nb.type!=='ContextualDialog'||!ob||!nb.root||nb.position!=='top')return;var pb=n.scry(nb.root,'.CustomArrow')[0];if(!pb)return;var qb=n.scry(pb,'.ArrowShadow')[0];if(!qb)return;var rb=null;if(pb.style.webkitMaskPosition!==undefined){rb=bb;}else if(za(pb))rb=cb;if(rb){l.addClass(nb.root,'withCustomArrow');setTimeout(function(){rb(pb,qb,nb);},0);}}function za(mb){if(!mb)mb=document.body;var nb=['transform','WebkitTransform','msTransform','MozTransform','OTransform'],ob;while(ob=nb.shift())if(mb.style[ob]!==undefined)return ob;return null;}function ab(mb,nb,ob){var pb=mb.parentNode.offsetWidth,qb=Math.round(pb*ob.offset_percent/100);if(ob.side==='left'){qb=qb+ob.side_margin;}else if(ob.side==='right')qb=pb-qb-ob.side_margin-18;return qb;}function bb(mb,nb,ob){l.addClass(ob.root,'usingMask');var pb=ab(mb,nb,ob);mb.style.webkitMaskPositionX=pb+'px';nb.style.left=pb+'px';}function cb(mb,nb,ob){var pb=n.scry(mb,'.CoverPhoto')[0];if(!pb)return;var qb=za(mb);if(!qb)return;l.addClass(ob.root,'usingRotate');var rb=ab(mb,nb,ob)+9,sb=Math.ceil(rb/Math.SQRT2);pb.style[qb]='translate('+(-sb)+'px, '+sb+'px) rotate(-45deg)';mb.style[qb]='translate('+rb+'px, 0) rotate(45deg)';}function db(){var mb=v.getViewportDimensions(),nb=v.getElementPosition(ea,'viewport'),ob=nb.convertTo('document'),pb=gb(ea),qb='above',rb='left',sb=fb(ob,pb,'above');if(nb.y+sb<=ba){var tb=fb(ob,pb,'below');if(nb.y+tb+ea.offsetHeight+ba<mb.y){qb='below';sb=tb;}}var ub=mb.x-w.getRight(),vb=eb(ob,pb,'left');if(nb.x+vb+aa>=ub){var wb=eb(ob,pb,'right');if(nb.x+wb+ea.offsetWidth>aa){rb='right';vb=wb;}}ga.setPosition(qb).setAlignH(rb).setOffsetX(vb).setOffsetY(sb);}function eb(mb,nb,ob){if(ob=='left')return nb.l-mb.x;return nb.r-(mb.x+ea.offsetWidth);}function fb(mb,nb,ob){if(ob=='above')return nb.t-mb.y;return nb.b-(mb.y+ea.offsetHeight);}function gb(mb){var nb=da.pos,ob=mb.getClientRects();if(!nb||ob.length===0)return s.getElementBounds(mb);var pb,qb=false;for(var rb=0;rb<ob.length;rb++){var sb=new s(Math.round(ob[rb].top),Math.round(ob[rb].right),Math.round(ob[rb].bottom),Math.round(ob[rb].left),'viewport').convertTo('document'),tb=sb.getPositionVector(),ub=tb.add(sb.getDimensionVector());if(!pb||(tb.x<=pb.l&&tb.y>pb.t)){if(qb)break;pb=new s(tb.y,ub.x,ub.y,tb.x,'document');}else{pb.t=Math.min(pb.t,tb.y);pb.b=Math.max(pb.b,ub.y);pb.r=ub.x;}if(sb.contains(nb))qb=true;}return pb;}function hb(mb){if(mb.id&&ca[mb.id]!=null)return;var nb=ta(mb);if(ca[nb]!=null)return;ib(nb);var ob=function(){lb.dirty(nb);wa();};new i(nb).setData({endpoint:nb}).setMethod('GET').setReadOnly(true).setErrorHandler(ob).setTransportErrorHandler(ob).send();}function ib(mb){ca[mb]=false;}var jb=function(){var mb=new k({},m.create('div',{className:'HovercardLoading'},"Loading..."));mb.disableBehavior(g).disableBehavior(o).disableBehavior(q).disableBehavior(p);kb(mb);jb=bagof(mb);return mb;};function kb(mb){mb.subscribe('mouseenter',function(){clearTimeout(oa);fa=da.node;});mb.subscribe('mouseleave',function(){lb.hide(false);fa=null;});}var lb={hide:function(mb){if(!ea)return;if(mb){if(ga){h.inform('layer_hidden',{type:'Hovercard'});h.inform('Hovercard/hide',{node:ea});ga.hide();}fa=null;ea=null;ga=null;}else oa=setTimeout(lb.hide.curry(true),ka);},setDialog:function(mb,nb){nb.disableBehavior(g);ca[mb]=nb;kb(nb);if(da.endpoint==mb&&fa==da.node)xa(nb);},getDialog:function(mb){return ca[mb];},contains:function(mb){if(ga)return m.contains(ga.getRoot(),mb);return false;},dirty:function(mb){var nb=ca[mb];if(nb){nb.destroy();delete ca[mb];}},dirtyAll:function(){for(var mb in ca){var nb=ca[mb];nb&&lb.dirty(mb);}h.inform('Hovercard/dirty');},processNode:function(mb){if(mb&&ra(mb)){ua(mb);return true;}return false;}};if(!a.Hovercard){pa();}else lb=a.Hovercard;e.exports=lb;a.Hovercard=e.exports;});
__d("HoverFlyout",["event-extensions","ArbiterMixin","Class","DataStore","LayerDestroyOnHide","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('Class'),i=b('DataStore'),j=b('LayerDestroyOnHide'),k=b('copyProperties');function l(m,n,o,p){if(m){this._showDelay=o;this._hideDelay=p;this.init(m);if(n)this.initNode(n);}}k(l.prototype,g,{init:function(m){this._flyout=m;this._showDelay=this._showDelay||0;this._hideDelay=this._hideDelay||100;this._showTimeout=null;this._hideTimeout=null;this._flyoutSubscriptions=[this._flyout.subscribe('mouseenter',this._onFlyoutMouseEnter.bind(this)),this._flyout.subscribe('mouseleave',this.hideFlyout.shield(this))];this._nodes=[];this._dataStoreUnique='HoverFlyout_'+Date.now()+'_listeners';this._flyout.disableBehavior(j);return this;},initNode:function(m){if(this._nodes.contains(m))return this;this._nodes.push(m);i.set(m,this._dataStoreUnique,[Event.listen(m,'mouseenter',this._onNodeMouseEnter.bind(this,m)),Event.listen(m,'mouseleave',this.hideFlyout.shield(this))]);return this;},deactivateNode:function(m){var n=i.get(m,this._dataStoreUnique);if(n)while(n.length)n.pop().remove();this._nodes.remove(m);},setShowDelay:function(m){this._showDelay=m;return this;},setHideDelay:function(m){this._hideDelay=m;return this;},showFlyout:function(m,n){this.setActiveNode(m);if(n){this._flyout.setContext(m).show();this.inform('show',m);}else this._showTimeout=this.showFlyout.bind(this,m,true).defer(this._showDelay);return this;},hideFlyout:function(m){clearTimeout(this._showTimeout);if(m){this._flyout.hide();this._activeNode&&this.inform('hide',this._activeNode);this._activeNode=null;}else this._hideTimeout=this.hideFlyout.bind(this,true).defer(this._hideDelay);},hideFlyoutDelayed:function(m){clearTimeout(this._showTimeout);clearTimeout(this._hideTimeout);this._hideTimeout=this.hideFlyout.bind(this,true).defer(m);},getActiveNode:function(){return this._activeNode;},setActiveNode:function(m){clearTimeout(this._hideTimeout);if(this._activeNode&&this._activeNode!==m)this.hideFlyout(true);this._activeNode=m;return this;},clearNodes:function(){for(var m=this._nodes.length;m>0;m--)this.deactivateNode(this._nodes[m-1]);},destroy:function(){while(this._flyoutSubscriptions.length)this._flyout.unsubscribe(this._flyoutSubscriptions.pop());this.clearNodes();},_onNodeMouseEnter:function(m){if(this._activeNode===m){clearTimeout(this._hideTimeout);}else this.showFlyout(m);},_onFlyoutMouseEnter:function(){clearTimeout(this._hideTimeout);}});e.exports=a.HoverFlyout||l;});
__d("SubscriptionFlyoutController",["Arbiter","CSS","DataStore","EditSubscriptions","Hovercard","HoverFlyout","$"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DataStore'),j=b('EditSubscriptions'),k=b('Hovercard'),l=b('HoverFlyout'),m=b('$'),n=null,o,p,q;function r(){var v=j.getSubscriptions(q);if(v){var w=v.custom_categories;if(w&&w.length===0)g.inform('UnfollowUser',{profile_id:q,from_hide_flyout:true});}}function s(v,w){q=i.get(w,'profile_id');var x=i.get(w,'loc');j.init(p,q,x);h.addClass(w,'selected');h.addClass(w,'uiButtonHover');if(i.get(w,'onclose'))clearTimeout(i.remove(w,'onclosetimeout'));}function t(v,w){q=null;h.removeClass(w,'selected');h.removeClass(w,'uiButtonHover');if(i.get(w,'onclose'))i.set(w,'onclosetimeout',function(){var x=i.remove(w,'onclose');x&&x();}.defer(1500));}var u={init:function(v,w){u.init=bagofholding;o=v;p=m(w);n=new l();n.init(v);n.setShowDelay(100).setHideDelay(150);n.subscribe('show',s);n.subscribe('hide',t);g.subscribe(['UnfollowUser','UnfollowingUser'],function(x,y){if(!y.from_hide_flyout&&y.profile_id==q){if(k.contains&&o)if(k.contains(o.getContext()))k.hide();n.hideFlyout(true);}});},initNode:function(v,w,x){i.set(v,'profile_id',w);i.set(v,'loc',x);n.initNode(v);},setActiveNode:function(v){n.setActiveNode(v);},show:function(v){n.showFlyout(v,true);},setCloseListener:function(v,w){if(n.getActiveNode()!==v){w();}else i.set(v,'onclose',w);}};e.exports=a.SubscriptionFlyoutController||u;});
__d("DropdownContextualHelpLink",["copyProperties","DOM","ge"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('DOM'),i=b('ge'),j={set:function(k){var l=i('navHelpCenter');if(l!==null)h.replace(l,k);}};e.exports=j;});
__d("SimpleDrag",["event-extensions","ArbiterMixin","Class","UserAgent","Vector","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('Class'),i=b('UserAgent'),j=b('Vector'),k=b('copyProperties');function l(m){this.minDragDistance=0;Event.listen(m,'mousedown',this._start.bind(this));}k(l.prototype,g,{setMinDragDistance:function(m){this.minDragDistance=m;},_start:function(event){var m=false,n=true,o=null;if(this.inform('mousedown',event))n=false;if(this.minDragDistance){o=j.getEventPosition(event);}else{m=true;if(this.inform('start',event))n=false;}var p=i.ie()<9?document.documentElement:window,q=Event.listen(p,{selectstart:n?Event.prevent:bagofholding,mousemove:function(event){if(!m){var r=j.getEventPosition(event);if(o.distanceTo(r)<this.minDragDistance)return;m=true;this.inform('start',event);}this.inform('update',event);}.bind(this),mouseup:function(event){for(var r in q)q[r].remove();if(m){this.inform('end',event);}else this.inform('click',event);}.bind(this)});return !n;}});e.exports=l;});
__d("isRTL",[],function(a,b,c,d,e,f){function g(i){for(var j=0,k=i.length;j<k;j++){var l=i.charCodeAt(j);if(l>=1470&&l<=1920)return true;}return false;}function h(i){var j=0,k=0;i.split(/\s/,10).forEach(function(l){j++;g(l)&&k++;});return j&&(k/j>=.4);}e.exports=h;});
__d("legacy:bind",["bind"],function(a,b,c,d){a.bind=b('bind');},3);
__d("ScrollAwareDOM",["ArbiterMixin","CSS","DOM","DOMDimensions","DOMPosition","DOMQuery","HTML","Vector","ViewportBounds","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('CSS'),i=b('DOM'),j=b('DOMDimensions'),k=b('DOMPosition'),l=b('DOMQuery'),m=b('HTML'),n=b('Vector'),o=b('ViewportBounds'),p=b('copyProperties');function q(v,w){return function(){u.monitor(arguments[v],w.curry.apply(w,arguments));};}function r(v){if(!(v instanceof Array))v=[v];for(var w=0;w<v.length;w++){var x=m.replaceJSONWrapper(v[w]);if(x instanceof m){return x.getRootNode();}else if(i.isNode(x))return x;}return null;}function s(v){return k.getElementPosition(v).y>=o.getTop();}function t(v){var w=k.getElementPosition(v).y+j.getElementDimensions(v).height,x=j.getViewportDimensions().height-o.getBottom();return w>=x;}var u=p({monitor:function(v,w){var x=r(v);if(x){var y=!!x.offsetParent;if(y&&(s(x)||t(x)))return w();var z=n.getDocumentDimensions(),aa=w();if(y||(x.offsetParent&&!s(x))){var ba=n.getDocumentDimensions().sub(z),ca={delta:ba,target:x};if(u.inform('scroll',ca)!==false)ba.scrollElementBy(l.getDocumentScrollElement());}return aa;}else return w();},replace:function(v,w){var x=r(w);if(!x||h.hasClass(x,'hidden_elem'))x=v;return u.monitor(x,function(){i.replace(v,w);});},prependContent:q(1,i.prependContent),insertAfter:q(1,i.insertAfter),insertBefore:q(1,i.insertBefore),setContent:q(0,i.setContent),appendContent:q(1,i.appendContent),remove:q(0,i.remove),empty:q(0,i.empty)},g);e.exports=u;});
__d("legacy:ScrollAwareDOM",["ScrollAwareDOM"],function(a,b,c,d){a.ScrollAwareDOM=b('ScrollAwareDOM');},3);
__d("legacy:Style",["Style"],function(a,b,c,d){a.Style=b('Style');},3);
__d("legacy:dom-collect",["collectDataAttributes"],function(a,b,c,d){a.collect_data_attribs=b('collectDataAttributes');},3);
__d("legacy:dom-html",["HTML"],function(a,b,c,d){a.HTML=b('HTML');},3);
function show(){for(var a=0;a<arguments.length;a++){var b=ge(arguments[a]);if(b&&b.style)b.style.display='';}return false;}function hide(){for(var a=0;a<arguments.length;a++){var b=ge(arguments[a]);if(b&&b.style)b.style.display='none';}return false;}function shown(a){a=ge(a);return (a.style.display!='none'&&!(a.style.display==''&&a.offsetWidth==0));}function toggle(){for(var a=0;a<arguments.length;a++){var b=$(arguments[a]);b.style.display=Style.get(b,"display")=='block'?'none':'block';}return false;}function toggleDisplayNone(){for(var a=0;a<arguments.length;a++){var b=$(arguments[a]);if(shown(b)){hide(b);}else show(b);}return false;}
__d("legacy:dom-scroll",["DOMScroll"],function(a,b,c,d){a.DOMScroll=b('DOMScroll');},3);
__d("SystemEvents",["Arbiter","Env","ErrorUtils","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Env'),i=b('ErrorUtils'),j=b('UserAgent'),k=b('copyProperties'),l=new g(),m=[],n=1000;setInterval(function(){for(var w=0;w<m.length;w++)m[w]();},n,false);function o(){return (/c_user=(\d+)/.test(document.cookie)&&RegExp.$1)||0;}var p=h.user,q=navigator.onLine;function r(){if(!q){q=true;l.inform(l.ONLINE,q);}}function s(){if(q){q=false;l.inform(l.ONLINE,q);}}if(j.ie()){if(j.ie()>=8){window.attachEvent('onload',function(){document.body.ononline=r;document.body.onoffline=s;});}else m.push(function(){(navigator.onLine?r:s)();});}else if(window.addEventListener)if(!j.chrome()){window.addEventListener('online',r,false);window.addEventListener('offline',s,false);}var t=p;m.push(function(){var w=o();if(t!=w){l.inform(l.USER,w);t=w;}});var u=Date.now();function v(){var w=Date.now(),x=w-u,y=x<0||x>10000;u=w;if(y)l.inform(l.TIME_TRAVEL,x);return y;}m.push(v);m.push(function(){if(window.onerror!=i.onerror)window.onerror=i.onerror;});a.SystemEvents=e.exports=k(l,{USER:'SystemEvents/USER',ONLINE:'SystemEvents/ONLINE',TIME_TRAVEL:'SystemEvents/TIME_TRAVEL',isPageOwner:function(w){return (w||o())==p;},isOnline:function(){return j.chrome()||q;},checkTimeTravel:v});},3);
__d("legacy:link-controller",["LinkController"],function(a,b,c,d){a.LinkController=b('LinkController');},3);
__d("legacy:input-methods",["Input","copyProperties"],function(a,b,c,d){var e=b('Input'),f=b('copyProperties');f(a.Input||(a.Input={}),e);},3);
__d("IntlDateFormats",[],function(a,b,c,d,e,f){var g={},h={setFormats:function(i,j){g=j;},getFormat:function(i){if(!(i in g))return i;return g[i];}};e.exports=h;});
__d("legacy:vector",["Vector"],function(a,b,c,d){a.Vector2=b('Vector');},3);
__d("AsyncRequestNectarLogging",["AsyncRequest","Env","copyProperties","startsWith"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Env'),i=b('copyProperties'),j=b('startsWith');i(g.prototype,{setNectarModuleData:function(k){if(this.method=='POST'){var l=h.module;if(k&&l===undefined){var m={fbpage_fan_confirm:1},n=null;for(var o=k;o&&o!=document.body;o=o.parentNode){if(!o.id||typeof o.id!=='string')continue;if(j(o.id,'pagelet_')){l=o.id;break;}if(!n&&m[o.id])n=o.id;}if(l===undefined&&n)l=n;}if(l!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._mod=l;}}},setNectarImpressionId:function(){if(this.method=='POST'){var k=h.impid;if(k!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._impid=k;}}}});});
__d("legacy:async-postlude",["AsyncRequestNectarLogging"],function(a,b,c,d){b('AsyncRequestNectarLogging');},3);
__d("Base64",[],function(a,b,c,d,e,f){var g='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';function h(l){l=(l.charCodeAt(0)<<16)|(l.charCodeAt(1)<<8)|l.charCodeAt(2);return String.fromCharCode(g.charCodeAt(l>>>18),g.charCodeAt((l>>>12)&63),g.charCodeAt((l>>>6)&63),g.charCodeAt(l&63));}var i='>___?456789:;<=_______'+'\0\1\2\3\4\5\6\7\b\t\n\13\f\r\16\17\20\21\22\23\24\25\26\27\30\31'+'______\32\33\34\35\36\37 !"#$%&\'()*+,-./0123';function j(l){l=(i.charCodeAt(l.charCodeAt(0)-43)<<18)|(i.charCodeAt(l.charCodeAt(1)-43)<<12)|(i.charCodeAt(l.charCodeAt(2)-43)<<6)|i.charCodeAt(l.charCodeAt(3)-43);return String.fromCharCode(l>>>16,(l>>>8)&255,l&255);}var k={encode:function(l){l=unescape(encodeURI(l));var m=(l.length+2)%3;l=(l+'\0\0'.slice(m)).replace(/[\s\S]{3}/g,h);return l.slice(0,l.length+m-2)+'=='.slice(m);},decode:function(l){l=l.replace(/[^A-Za-z0-9+\/]/g,'');var m=(l.length+3)&3;l=(l+'AAA'.slice(m)).replace(/..../g,j);l=l.slice(0,l.length+m-3);try{return decodeURIComponent(escape(l));}catch(n){throw new Error('Not valid UTF-8');}},encodeObject:function(l){return k.encode(JSON.stringify(l));},decodeObject:function(l){return JSON.parse(k.decode(l));},encodeNums:function(l){return String.fromCharCode.apply(String,l.map(function(m){return g.charCodeAt((m|-(m>63))&-(m>0)&63);}));}};e.exports=k;});
__d("legacy:base64",["Base64"],function(a,b,c,d){a.Base64=b('Base64');},3);
__d("date-extensions",["IntlDateFormats","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('IntlDateFormats'),h=b('copyProperties'),i=b('tx'),j=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],k=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=["January","February","March","April","May","June","July","August","September","October","November","December"];function n(o,p){p=p||2;o=''+o;while(o.length<p)o='0'+o;return o;}Date.format=function(o,p,q){var r=p?new Date(p*1000):new Date();return r.format(o,q);};h(Date.prototype,{format:function(o,p){if(!o)return '';var q=[],r=null,s=null,t=(p?'getUTC':'get'),u=this[t+'Date'](),v=this[t+'Day'](),w=this[t+'Month'](),x=this[t+'FullYear'](),y=this[t+'Hours'](),z=this[t+'Minutes'](),aa=this[t+'Seconds'](),ba=this[t+'Milliseconds']();for(var ca=0;ca<o.length;ca++){s=o.charAt(ca);if(s=='\\'){ca++;q.push(o.charAt(ca));continue;}switch(s){case 'd':r=n(u);break;case 'D':r=j[v];break;case 'j':r=u;break;case 'l':r=k[v];break;case 'F':r=m[w];break;case 'm':r=n(w+1);break;case 'M':r=l[w];break;case 'n':r=w+1;break;case 'Y':r=x;break;case 'y':r=(''+x).slice(2);break;case 'a':r=y<12?'am':'pm';break;case 'A':r=y<12?'AM':'PM';break;case 'g':r=(y==0||y==12)?12:y%12;break;case 'G':r=y;break;case 'h':r=(y==0||y==12)?12:n(y%12);break;case 'H':r=n(y);break;case 'i':r=n(z);break;case 's':r=n(aa);break;case 'S':r=n(ba,3);break;default:r=s;}q.push(r);}return q.join('');}});a.IntlDateFormats=g;},3);
__d("legacy:animation",["Animation"],function(a,b,c,d){a.animation=b('Animation');},3);
__d("legacy:dialog",["Dialog"],function(a,b,c,d){var e=b('Dialog');a.Dialog=e;},3);
__d("ErrorDialog",["Dialog"],function(a,b,c,d,e,f){var g=b('Dialog'),h={showAsyncError:function(i){try{return h.show(i.getErrorSummary(),i.getErrorDescription());}catch(j){alert(i);}},show:function(i,j,k,l){return (new g()).setTitle(i).setBody(j).setButtons([g.OK]).setStackable(true).setModal(true).setHandler(k||bagofholding).setButtonsMessage(l||'').show();}};e.exports=h;});
__d("legacy:error-dialog",["ErrorDialog"],function(a,b,c,d){var e=b('ErrorDialog');a.ErrorDialog=e;},3);
__d("legacy:array-utils",["createArrayFrom","hasArrayNature"],function(a,b,c,d){a.$A=b('createArrayFrom');a.hasArrayNature=b('hasArrayNature');},3);
__d("legacy:env",["Env"],function(a,b,c,d){var e=b('Env');a.Env=e;},3);
__d("deferUntil",[],function(a,b,c,d,e,f){function g(h,i,j,k,l){var m=i();if(m){h(m);return null;}var n=Date.now(),o=setInterval(function(){m=i();if(!m){if(!j||(j<new Date()-n))return;l&&l();}clearInterval(o);h(m);},20,k);return o;}e.exports=g;});
__d("legacy:function-utils",["debounce","throttle","deferUntil"],function(a,b,c,d){a.debounce=b('debounce');a.throttle=b('throttle');a.defer_until=b('deferUntil');},3);
__d("FlipDirectionOnKeypress",["event-extensions","DOM","Input","Style"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOM'),h=b('Input'),i=b('Style');Event.listen(document.documentElement,'keyup',function(event){var j=event.getTarget();if(!g.isNodeOfType(j,['input','textarea']))return;if(g.isNodeOfType(j,'input')&&j.type=='password')return;if(j.getAttribute('data-prevent-auto-flip'))return;var k=h.getValue(j),l=(j.style&&j.style.direction);if(!l){var m=0,n=true;for(var o=0;o<k.length;o++){var p=k.charCodeAt(o);if(p>=48){if(n){n=false;m++;}if(p>=1470&&p<=1920){i.set(j,'direction','rtl');return;}if(m==5){i.set(j,'direction','ltr');return;}}else n=true;}}else if(k.length===0)i.set(j,'direction','');});});
__d("PlaceholderOnsubmitFormListener",["event-extensions","Input"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Input');Event.listen(document.documentElement,'submit',function(h){var i=h.getTarget().getElementsByTagName('*');for(var j=0;j<i.length;j++)if(i[j].getAttribute('placeholder')&&g.isEmpty(i[j]))g.setValue(i[j],'');});});
__d("Live",["Arbiter","AsyncDOM","AsyncSignal","ChannelConstants","DOM","DataStore","ServerJS","createArrayFrom"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncDOM'),i=b('AsyncSignal'),j=b('ChannelConstants'),k=b('DOM'),l=b('DataStore'),m=b('ServerJS'),n=b('createArrayFrom');function o(q,r){r=JSON.parse(JSON.stringify(r));new m().setRelativeTo(q).handle(r);}var p={logAll:false,startup:function(){p.startup=bagofholding;g.subscribe(j.getArbiterType('live'),p.handleMessage.bind(p));},lookupLiveNode:function(q,r){var s=k.scry(document.body,'.live_'+q+'_'+r);s.forEach(function(t){if(l.get(t,'seqnum')===undefined){var u=JSON.parse(t.getAttribute('data-live'));l.set(t,'seqnum',u.seq);}});return s;},handleMessage:function(q,r){var s=r.obj,t=s.fbid,u=s.assoc,v=this.lookupLiveNode(t,u);if(!v)return false;v.forEach(function(w){if(s.expseq){var x=l.get(w,'seqnum'),y=l.get(w,'message_buffer');if(y===undefined){y={};l.set(w,'message_buffer',y);}var z={obj:s};y[s.expseq]=z;if(s.expseq!=x){p.log('mismatch',s.fbid,s.expseq,x);return false;}while(true){x=l.get(w,'seqnum');var aa=y[x];if(aa){h.invoke(aa.obj.updates,w);if(aa.obj.js)o(w,aa.obj.js);p.log('seqmatch',s.fbid,'exp',s.expseq,'cur',x);delete y[x];}else break;}}else{h.invoke(s.updates,w);if(s.js)o(w,s.js);}});},log:function(){if(p.logAll){var q=n(arguments).join(':');new i('/common/scribe_endpoint.php',{c:'live_sequence',m:q}).send();}}};e.exports=p;});
__d("legacy:live-js",["Live"],function(a,b,c,d){a.Live=b('Live');},3);
__d("legacy:JSLogger",["JSLogger"],function(a,b,c,d){a.JSLogger=b('JSLogger');},3);
__d("Amoeba",["Run","copyProperties"],function(a,b,c,d,e,f){var g=b('Run'),h=b('copyProperties'),i={};h(i,{_instrumentQueue:[],_logger:null,instrument:function(j,k){if(i._logger){i._logger.instrument(j,k);}else i._instrumentQueue.push([j,k]);},flushQueue:function(j){if(j)i._instrumentQueue.map(j);i._instrumentQueue=[];},setLogger:function(j){i._logger=j;}});g.onLeave(function(){i.flushQueue(null);});e.exports=i;});
__d("AsyncLayout",["AjaxPipeRequest","Arbiter","AsyncResponse","AsyncRequest","CSS","DOM","HTML","NavigationMessage","PageTransitions","URI","$","copyProperties","ge","goURI"],function(a,b,c,d,e,f){var g=b('AjaxPipeRequest'),h=b('Arbiter'),i=b('AsyncResponse'),j=b('AsyncRequest'),k=b('CSS'),l=b('DOM'),m=b('HTML'),n=b('NavigationMessage'),o=b('PageTransitions'),p=b('URI'),q=b('$'),r=b('copyProperties'),s=b('ge'),t=b('goURI');function u(v){this.canvasID=v;if(s('rightCol'))this.auxiliaryID='rightCol';if(s('headerArea'))this.headerID='headerArea';if(s('toolbarContainer'))this.toolbarID='toolbarContainer';this.waitingForAux=false;o.registerHandler(this.catchPageTransition.bind(this));this.subscription=h.subscribe(n.NAVIGATION_BEGIN,this.onNavigate.bind(this));}r(u.prototype,{catchPageTransition:function(v){this.subscription.unsubscribe();return false;},getCanvasID:function(v){return v.sidecol?'contentCol':'contentArea';},onNavigate:function(v,w){var x=w.useAjaxPipe;w=w.params;if(w.endpoint){if(this.request){this.request.setFinallyHandler(bagofholding);this.request.abort();}if(this.sideRequest)this.sideRequest.abort();if(x){this.request=new g().setURI(w.endpoint).setData(w).setCanvasId(this.getCanvasID(w)).setFinallyHandler(this.finallyHandler.bind(this)).setErrorHandler(this.errorHandler.bind(this)).setFirstResponseCallback(this.firstResponseCallback.bind(this)).send();}else{w.handled=true;this.waitingForAux=w.sidecol;var y=!!w.iframe,z=new j().setOption('useIframeTransport',y).setURI(new p(w.endpoint)).setReadOnly(true).setMethod('GET').setData(w).setHandler(this.onResponse.bind(this)).setErrorHandler(this.errorHandler.bind(this)).setFinallyHandler(this.finallyHandler.bind(this));this.request=z;z.send();}}},onSideResponse:function(v){var w=v.getPayload();if(w&&this.auxiliaryID)this.receivedAux(w);},receivedAux:function(v){!this.waitingForAux;this.waitingForAux=false;l.setContent(q(this.auxiliaryID),m(v));},onResponse:function(v){var w=v.getPayload();if(w.redirect){t(w.redirect);}else{var x=w.html||w;l.setContent(q(this.canvasID),m(x));if(w.side_html&&this.auxiliaryID)this.receivedAux(w.side_html);if(this.headerID&&!w.keep_header){var y=q(this.headerID);l.setContent(y,m(w.header_html||''));k.conditionShow(y,w.header_html);}if(w.toolbar_html&&this.toolbarID)l.setContent(q(this.toolbarID),m(w.toolbar_html));if(w.js)(new Function(w.js))();k.conditionClass('contentCol','hasRightCol',this.auxiliaryID&&!w.noRightSide);var z=s('rightCol');if(z&&w.noRightSide)l.empty(z);}var aa=v.getRequest().getData();h.inform(n.NAVIGATION_COMPLETED,aa.key);},errorHandler:function(v){i.verboseErrorHandler(v);h.inform(n.NAVIGATION_FAILED);this.request=null;},firstResponseCallback:function(v){window.scrollTo(0,0);h.inform(n.NAVIGATION_FIRST_RESPONSE);},finallyHandler:function(v){this.request=null;o.transitionComplete(true);h.inform(n.NAVIGATION_COMPLETED);}});e.exports=u;});
__d("ContextualLayer",["array-extensions","event-extensions","Arbiter","ARIA","Class","ContextualThing","CSS","DataStore","DOM","Layer","LayerHideOnTransition","Locale","Parent","Style","Vector","copyProperties","getOverlayZIndex"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('Arbiter'),h=b('ARIA'),i=b('Class'),j=b('ContextualThing'),k=b('CSS'),l=b('DataStore'),m=b('DOM'),n=b('Layer'),o=b('LayerHideOnTransition'),p=b('Locale'),q=b('Parent'),r=b('Style'),s=b('Vector'),t=b('copyProperties'),u=b('getOverlayZIndex');function v(aa){return aa.getPosition()==='left'||(aa.isVertical()&&aa.getAlignment()==='right');}function w(aa){var ba=aa.parentNode;if(ba){var ca=r.get(ba,'position');if(ca==='static'){if(ba===document.body){ba=document.documentElement;}else ba=w(ba);}else return ba;}else ba=document.documentElement;return ba;}function x(aa,ba){this.parent.construct(this,aa,ba);}var y=[];g.subscribe('reflow',function(){y.forEach(function(aa){if(aa.updatePosition()===false)aa.hide();});});i.extend(x,n);t(x.prototype,{_contentWrapper:null,_content:null,_contextNode:null,_contextSelector:null,_parentLayer:null,_parentSubscription:null,_orientation:null,_orientationClass:null,_configure:function(aa,ba){this.parent._configure(aa,ba);if(aa.context){this.setContext(aa.context);}else if(aa.contextID){this._setContextID(aa.contextID);}else if(aa.contextSelector)this._setContextSelector(aa.contextSelector);aa.position&&this.setPosition(aa.position);aa.alignment&&this.setAlignment(aa.alignment);aa.offsetX&&this.setOffsetX(aa.offsetX);aa.offsetY&&this.setOffsetY(aa.offsetY);this._content=ba;},_getDefaultBehaviors:function(){return this.parent._getDefaultBehaviors().concat([o]);},_buildWrapper:function(aa,ba){this._contentWrapper=m.create('div',{className:'uiContextualLayer'},ba);return m.create('div',{className:'uiContextualLayerPositioner'},this._contentWrapper);},getInsertParent:function(){var aa=this._insertParent;if(!aa){var ba=this.getContext();if(ba)aa=q.byClass(ba,'uiContextualLayerParent');}return aa||this.parent.getInsertParent();},setContent:function(aa){this._content=aa;m.setContent(this._contentWrapper,this._content);this._shown&&this.updatePosition();return this;},setContext:function(aa){this._contextNode=aa;this._contextSelector=this._contextScrollParent=null;if(this._shown){j.register(this.getRoot(),this._contextNode);this.updatePosition();}this._setParentSubscription();h.setPopup(this.getCausalElement(),this.getRoot());return this;},_setContextID:function(aa){this._contextSelector='#'+aa;this._contextNode=null;},_setContextSelector:function(aa){this._contextSelector=aa;this._contextNode=null;},getCausalElement:function(){return this.parent.getCausalElement()||this.getContext();},_setParentSubscription:function(){var aa=this.getContext(),ba=null;while(aa!==null){ba=l.get(aa,'layer');if(ba)break;aa=aa.parentNode;}if(ba===this._parentLayer)return;if(this._parentLayer&&this._parentSubscription){this._parentLayer.unsubscribe(this._parentSubscription);this._parentSubscription=null;}if(ba)this._parentSubscription=ba.subscribe('hide',this.hide.bind(this));this._parentLayer=ba;},setPosition:function(aa){this._getOrientation().setDefaultPosition(aa);this._shown&&this.updatePosition();return this;},setAlignment:function(aa){this._getOrientation().setDefaultAlignment(aa);this._shown&&this.updatePosition();return this;},setOffsetX:function(aa){this._getOrientation().setDefaultOffsetX(aa);this._shown&&this.updatePosition();return this;},setOffsetY:function(aa){this._getOrientation().setDefaultOffsetY(aa);this._shown&&this.updatePosition();return this;},_getOrientation:function(){if(!this._orientation)this._orientation=new z();return this._orientation;},getContentRoot:function(){return this._contentWrapper;},getContent:function(){return this._content;},getContext:function(){if(!this._contextNode)this._contextNode=m.find(document,this._contextSelector);return this._contextNode;},getContextScrollParent:function(){if(!this._contextScrollParent)this._contextScrollParent=r.getScrollParent(this.getContext());return this._contextScrollParent;},setInsertParent:function(aa){this._insertScrollParent=null;return this.parent.setInsertParent(aa);},getInsertScrollParent:function(){if(!this._insertScrollParent)this._insertScrollParent=r.getScrollParent(this.getInsertParent());return this._insertScrollParent;},show:function(){this.parent.show();if(this._shown){j.register(this.getRoot(),this.getContext());y.push(this);this._resizeListener=this._resizeListener||Event.listen(window,'resize',this.updatePosition.bind(this));}return this;},hide:function(){j.remove(this.getRoot());y.remove(this);this._resizeListener&&this._resizeListener.remove();this._resizeListener=null;return this.parent.hide();},updatePosition:function(){var aa=this.getContext();if(!aa)return false;var ba=r.isFixed(aa)&&!r.isFixed(this.getInsertParent());if(!ba&&!aa.offsetParent)return false;var ca=this._getOrientation();this.inform('adjust',ca.reset());if(!ca.isValid())return false;this._updateWrapperPosition(ca);this._updateWrapperClass(ca);var da=this.getRoot();k.conditionClass(da,'uiContextualLayerPositionerFixed',ba);var ea,fa,ga=ba?'viewport':'document',ha=ba?document.documentElement:w(da);if(ha===document.documentElement){ea=new s(0,0);fa=document.documentElement.clientWidth;}else if(!da.offsetParent){return false;}else{ea=s.getElementPosition(ha,ga);fa=ha.offsetWidth;if(ha!==document.body)ea=ea.sub(new s(ha.scrollLeft,ha.scrollTop));}var ia=s.getElementPosition(aa,ga),ja=ia.x-ea.x,ka=ia.y-ea.y,la=p.isRTL();if(ca.getPosition()==='below')ka+=aa.offsetHeight;if((ca.getPosition()==='right'||(ca.isVertical()&&ca.getAlignment()==='right'))!=la)ja+=aa.offsetWidth;var ma=ca.getOffsetX();if(ca.isVertical()&&ca.getAlignment()==='center')ma+=(aa.offsetWidth-this._content.offsetWidth)/2;if(la)ma*=-1;var na='left',oa=ja+ma;if(v(ca)!==la){na='right';oa=fa-oa;}r.set(da,na,oa+'px');r.set(da,na==='left'?'right':'left','');var pa=this.getInsertScrollParent(),qa;if(pa!==window){qa=pa.clientWidth;}else qa=document.documentElement.clientWidth;var ra=s.getElementPosition(da).x;if(na==='left'){if(qa-ra>0){r.set(da,'width',(qa-ra)+'px');}else r.set(da,'width','');}else r.set(da,'width',ra+da.offsetWidth+'px');r.set(da,'top',(ka+ca.getOffsetY())+'px');var sa=u(aa,this.getInsertParent());r.set(da,'z-index',sa>200?sa:'');this.inform('reposition',ca);return true;},_updateWrapperPosition:function(aa){var ba=aa.getPosition()==='above';r.set(this._contentWrapper,'bottom',ba?'0':null);var ca=p.isRTL()?'left':'right',da=v(aa);r.set(this._contentWrapper,ca,da?'0':null);},_updateWrapperClass:function(aa){var ba=aa.getClassName();if(ba===this._orientationClass)return;if(this._orientationClass)k.removeClass(this._contentWrapper,this._orientationClass);this._orientationClass=ba;k.addClass(this._contentWrapper,ba);},simulateOrientation:function(aa,ba){var ca=aa.getClassName();if(ca===this._orientationClass){return ba();}else{if(this._orientationClass)k.removeClass(this._contentWrapper,this._orientationClass);k.addClass(this._contentWrapper,ca);var da=ba();k.removeClass(this._contentWrapper,ca);if(this._orientationClass)k.addClass(this._contentWrapper,this._orientationClass);return da;}},destroy:function(){this.parent.destroy();this._contentWrapper=null;this._content=null;return this;}});function z(){this._default={_position:'above',_alignment:'left',_offsetX:0,_offsetY:0,_valid:true};this.reset();}z.OPPOSITE={above:'below',below:'above',left:'right',right:'left'};t(z.prototype,{setPosition:function(aa){this._position=aa;return this;},setAlignment:function(aa){this._alignment=aa;return this;},getOppositePosition:function(){return z.OPPOSITE[this.getPosition()];},invalidate:function(){this._valid=false;return this;},getPosition:function(){return this._position||'above';},getAlignment:function(){return this._alignment||'left';},getOffsetX:function(){var aa=this._offsetX||0;if(!this.isVertical()){if(this._default._position!==this._position)aa*=-1;}else if(this._default._alignment!==this._alignment)aa*=-1;return aa;},getOffsetY:function(){var aa=this._offsetY||0;if(this.isVertical()&&this._default._position!==this._position)aa*=-1;return aa;},getClassName:function(){var aa=this.getAlignment(),ba=this.getPosition();if(ba==='below'){if(aa==='left'){return 'uiContextualLayerBelowLeft';}else if(aa==='right'){return 'uiContextualLayerBelowRight';}else return 'uiContextualLayerBelowCenter';}else if(ba==='above'){if(aa==='left'){return 'uiContextualLayerAboveLeft';}else if(aa==='right'){return 'uiContextualLayerAboveRight';}else return 'uiContextualLayerAboveCenter';}else if(ba==='left'){return 'uiContextualLayerLeft';}else return 'uiContextualLayerRight';},isValid:function(){return this._valid;},isVertical:function(){return this.getPosition()==='above'||this.getPosition()==='below';},reset:function(aa,ba){t(this,this._default);return this;},setDefaultPosition:function(aa){this._default._position=aa;return this;},setDefaultAlignment:function(aa){this._default._alignment=aa;return this;},setDefaultOffsetX:function(aa){this._default._offsetX=aa;return this;},setDefaultOffsetY:function(aa){this._default._offsetY=aa;return this;}});e.exports=x;});
__d("KeyStatus",["event-extensions"],function(a,b,c,d,e,f){b('event-extensions');var g=null,h=null;function i(){if(!h)h=Event.listen(window,'blur',function(){g=null;j();});}function j(){if(h){h.remove();h=null;}}Event.listen(document.documentElement,'keydown',function(l){g=Event.getKeyCode(l);i();},Event.Priority.URGENT);Event.listen(document.documentElement,'keyup',function(l){g=null;j();},Event.Priority.URGENT);var k={isKeyDown:function(){return !!g;},getKeyDownCode:function(){return g;}};e.exports=k;});
__d("ContextualLayerDimensions",["DOM","Locale","Rect","Vector","ViewportBounds","ge","getOverlayZIndex"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('Locale'),i=b('Rect'),j=b('Vector'),k=b('ViewportBounds'),l=b('ge'),m=b('getOverlayZIndex'),n={getViewportRect:function(o){var p=l('globalContainer'),q=o.getContext(),r=(p&&g.contains(p,q))||m(q)<300,s=i.getViewportBounds();if(r){s.t+=k.getTop();if(h.isRTL()){s.l+=k.getRight();}else s.r-=k.getRight();}return s;},getLayerRect:function(o,p){var q=o.getContext(),r=j.getElementPosition(q,'viewport'),s=o.simulateOrientation(p,function(){return j.getElementDimensions(o.getContent());}),t=r.y+p.getOffsetY();if(p.getPosition()==='above'){t-=s.y;}else if(p.getPosition()==='below')t+=q.offsetHeight;var u=r.x+p.getOffsetX();if(p.isVertical()){var v=p.getAlignment();if(v==='center'){u+=(q.offsetWidth-s.x)/2;}else if((v==='right')!==h.isRTL())u+=q.offsetWidth-s.x;}else if((p.getPosition()==='right')!==h.isRTL()){u+=q.offsetWidth;}else u-=s.x;return new i(t,u+s.x,t+s.y,u,'viewport');}};e.exports=n;});
__d("ContextualLayerAutoFlip",["array-extensions","event-extensions","ContextualLayerDimensions","DOM","Vector","copyProperties"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('ContextualLayerDimensions'),h=b('DOM'),i=b('Vector'),j=b('copyProperties');function k(l){this._layer=l;}j(k.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('adjust',this._adjustOrientation.bind(this));if(this._layer.isShown())this._layer.updatePosition();},disable:function(){this._subscription.unsubscribe();this._subscription=null;if(this._layer.isShown())this._layer.updatePosition();},_adjustOrientation:function(l,m){var n=this._getValidPositions(m);if(!n.length){m.invalidate();return;}var o=g.getViewportRect(this._layer),p=this._getValidAlignments(m);for(var q=0;q<p.length;q++){m.setAlignment(p[q]);for(var r=0;r<n.length;r++){m.setPosition(n[r]);var s=g.getLayerRect(this._layer,m);if(o.contains(s))return;}}m.setPosition(n.contains('below')?'below':n[0]).setAlignment(p[0]);},_getValidPositions:function(l){var m=[l.getPosition(),l.getOppositePosition()],n=this._layer.getContextScrollParent();if(n===window||n===h.getDocumentScrollElement())return m;var o=this._layer.getContext(),p=i.getElementPosition(n,'viewport').y,q=i.getElementPosition(o,'viewport').y;if(l.isVertical()){return m.filter(function(s){if(s==='above'){return q>=p;}else{var t=p+n.offsetHeight,u=q+o.offsetHeight;return u<=t;}});}else{var r=p+n.offsetHeight;if(q>=p&&q+o.offsetHeight<=r){return m;}else return [];}},_getValidAlignments:function(l){var m=['left','center','right'],n=l.getAlignment(),o=m.indexOf(n);if(o>0){m.splice(o,1);m.unshift(n);}return m;}});e.exports=k;});
__d("Tooltip",["event-extensions","ARIA","AsyncRequest","copyProperties","ContextualLayer","ContextualLayerAutoFlip","CSS","DataStore","DOM","Style","URI","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ARIA'),h=b('AsyncRequest'),i=b('copyProperties'),j=b('ContextualLayer'),k=b('ContextualLayerAutoFlip'),l=b('CSS'),m=b('DataStore'),n=b('DOM'),o=b('Style'),p=b('URI'),q=b('tx'),r=null,s=null,t=null,u=[];function v(){if(!s){t=n.create('div',{className:'tooltipContent'});var ca=n.create('i',{className:'arrow'}),da=n.create('div',{className:'uiTooltipX'},[t,ca]);s=new j({},da);s.enableBehavior(k);}}function w(ca){return i({position:ca.getAttribute('data-tooltip-position')||'above',alignH:ca.getAttribute('data-tooltip-alignh')||'left'},m.get(ca,'tooltip'));}function x(ca,da){var ea=w(ca);m.set(ca,'tooltip',{content:da.content||ea.content,position:da.position||ea.position,alignH:da.alignH||ea.alignH});ca.setAttribute('data-hover','tooltip');}function y(ca,da){ba.set(ca,"Loading...");new h(da).setHandler(function(ea){ba.set(ca,ea.getPayload());}).setErrorHandler(bagofholding).send();}var z=/(\r\n|[\r\n])/;function aa(ca){return ca.split(z).map(function(da){return z.test(da)?n.create('br'):da;});}var ba={process:function(ca,da){if(!n.contains(ca,da))return;if(ca!==r){var ea=ca.getAttribute('data-tooltip-uri');if(ea){ca.removeAttribute('data-tooltip-uri');y(ca,ea);}var fa=ca.getAttribute('title');if(fa){ca.setAttribute('title','');var ga=w(ca);!ga.content&&ba.set(ca,fa);}ba.show(ca);}},remove:function(ca){m.remove(ca,'tooltip');ca.removeAttribute('data-hover');ca.removeAttribute('data-tooltip-position');ca.removeAttribute('data-tooltip-alignh');ca===r&&ba.hide();},hide:function(){if(r){s.hide();r=null;while(u.length)u.pop().remove();}},set:function(ca,da,ea,fa){if(ea||fa)x(ca,{position:ea,alignH:fa});if(da instanceof p){if(ca===r){y(ca,da);}else ca.setAttribute('data-tooltip-uri',da);}else{if(typeof da!=='string')da=n.create('div',{},da);x(ca,{content:da});ca===r&&ba.show(ca);}},show:function(ca){v();ba.hide();var da=w(ca);if(!da.content)return;var ea=0,fa=0;if(da.position==='left'||da.position==='right'){fa=(ca.offsetHeight-20)/2;}else if(da.alignH!=='center'){var ga=ca.offsetWidth;if(ga<18)ea=(ga-18)/2*(da.alignH==='right'?-1:1);}s.setContext(ca).setOffsetX(ea).setOffsetY(fa).setPosition(da.position).setAlignment(da.alignH);if(typeof da.content==='string'){l.addClass(s,'invisible_elem');var ha=n.create('span',{},aa(da.content)),ia=n.create('div',{className:'tooltipText'},ha);n.setContent(t,ia);s.show();g.notify(da.content);if(ia.offsetWidth<ha.offsetWidth){l.addClass(ia,'tooltipWrap');s.updatePosition();}l.removeClass(s,'invisible_elem');}else{n.setContent(t,da.content);s.show();g.notify(n.getText(t));}var ja=function(la){if(!n.contains(r,la.getTarget()))ba.hide();};u.push(Event.listen(document.documentElement,'mouseover',ja));u.push(Event.listen(document.documentElement,'focusin',ja));var ka=o.getScrollParent(ca);if(ka!==window)u.push(Event.listen(ka,'scroll',ba.hide));u.push(Event.listen(ca,'click',ba.hide));r=ca;}};Event.listen(window,'scroll',ba.hide);e.exports=ba;});
__d("Selector",["event-extensions","Arbiter","Button","ContextualLayer","copyProperties","CSS","DataStore","DOM","HTML","Input","Keys","KeyStatus","Menu","Parent","Style","Toggler","Tooltip","Vector"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('Button'),i=b('ContextualLayer'),j=b('copyProperties'),k=b('CSS'),l=b('DataStore'),m=b('DOM'),n=b('HTML'),o=b('Input'),p=b('Keys'),q=b('KeyStatus'),r=b('Menu'),s=b('Parent'),t=b('Style'),u=b('Toggler'),v=b('Tooltip'),w=b('Vector'),x,y,z=[],aa;function ba(ma){return s.byClass(ma,'uiSelector');}function ca(ma){return s.byClass(ma,'uiSelectorButton');}function da(){if(!y){y=new i({position:'below'},m.create('div'));k.addClass(y.getRoot(),'uiSelectorContextualLayer');}return y;}function ea(ma){return m.scry(ma,'select')[0];}function fa(ma){return m.find(ma,'div.uiSelectorMenuWrapper');}function ga(){ga=bagofholding;r.subscribe('select',function(ma,na){if(!x||!na||na.menu!==la.getSelectorMenu(x))return;var oa=ha(x),pa=ia(na.item);if(pa){var qa=x,ra=la.isOptionSelected(na.item),sa=la.inform('select',{selector:qa,option:na.item,clone:aa});if(sa===false)return;if(oa||!ra){la.setSelected(qa,la.getOptionValue(na.item),!ra);la.inform('toggle',{selector:qa,option:na.item});la.inform('change',{selector:qa});g.inform('Form/change',{node:qa});if(ja(qa))l.set(qa,'dirty',true);}}if(!oa||!pa)x&&la.toggle(x);});}function ha(ma){return !!ma.getAttribute('data-multiple');}function ia(ma){return k.hasClass(ma,'uiSelectorOption');}function ja(ma){return !!ma.getAttribute('data-autosubmit');}var ka={keydown:function(event){var ma=event.getTarget();if(m.isNodeOfType(ma,['input','textarea']))return;switch(Event.getKeyCode(event)){case p.DOWN:case p.SPACE:case p.UP:if(ca(ma)){var na=ba(ma);la.toggle(na);return false;}break;case p.ESC:if(x){la.toggle(x);return false;}break;}},mouseover:function(event){var ma=s.byAttribute(event.getTarget(),'ajaxify');if(ma&&k.hasClass(ma,'uiSelectorButton'))la.loadMenu(ba(ma));}};Event.listen(document.documentElement,ka);u.subscribe(['show','hide'],function(ma,na){var oa=ba(na.getActive());if(oa){ga();var pa=la.getSelectorButton(oa),qa=la.getSelectorMenu(oa),ra=ma==='show';pa.setAttribute('aria-expanded',ra?'true':'false');if(ra){x=oa;if(k.hasClass(pa,'uiButtonDisabled')){la.setEnabled(oa,false);return false;}qa=qa||la.loadMenu(oa);var sa=t.getScrollParent(oa),ta=sa!==window&&sa!==m.getDocumentScrollElement();if(ta||k.hasClass(oa,'uiSelectorUseLayer')){if(ta)z.push(Event.listen(sa,'scroll',function(){na.hide();}));aa=m.create('div',{className:oa.className});k.addClass(aa,'invisible_elem');w.getElementDimensions(oa).setElementDimensions(aa);m.replace(oa,aa);var ua=k.hasClass(oa,'uiSelectorRight'),va=k.hasClass(oa,'uiSelectorBottomUp');da().setContext(aa).setContent(oa).setPosition(va?'above':'below').setAlignment(ua?'right':'left').show();}r.register(qa);if(q.isKeyDown()){var wa=r.getCheckedItems(qa);if(!wa.length)wa=r.getEnabledItems(qa);r.focusItem(wa[0]);}}else{x=null;if(aa){while(z.length)z.pop().remove();m.replace(aa,oa);da().hide();aa=null;}qa&&r.unregister(qa);if(ja(oa)&&l.get(oa,'dirty')){var xa=m.scry(oa,'input.submitButton')[0];xa&&xa.click();l.remove(oa,'dirty');}}k.conditionClass(la.getSelectorButton(oa),'selected',ra);la.inform(ra?'open':'close',{selector:oa,clone:aa});}});var la=j(new g(),{attachMenu:function(ma,na,oa){ma=ba(ma);if(ma){x&&r.unregister(la.getSelectorMenu(x));m.setContent(fa(ma),na);x&&r.register(la.getSelectorMenu(ma));aa&&da().updatePosition();if(oa){var pa=ma.getAttribute('data-name');pa&&oa.setAttribute('name',pa);if(!ha(ma))oa.setAttribute('multiple',false);var qa=ea(ma);if(qa){m.replace(qa,oa);}else m.insertAfter(ma.firstChild,oa);}return true;}},getOption:function(ma,na){var oa=la.getOptions(ma),pa=oa.length;while(pa--)if(na===la.getOptionValue(oa[pa]))return oa[pa];return null;},getOptions:function(ma){var na=r.getItems(la.getSelectorMenu(ma));return na.filter(ia);},getEnabledOptions:function(ma){var na=r.getEnabledItems(la.getSelectorMenu(ma));return na.filter(ia);},getSelectedOptions:function(ma){return r.getCheckedItems(la.getSelectorMenu(ma));},getOptionText:function(ma){return r.getItemLabel(ma);},getOptionValue:function(ma){var na=ba(ma),oa=ea(na),pa=la.getOptions(na).indexOf(ma);return pa>=0?oa.options[pa+1].value:'';},getSelectorButton:function(ma){return m.find(ma,'a.uiSelectorButton');},getSelectorMenu:function(ma){return m.scry(ma,'div.uiSelectorMenu')[0];},getValue:function(ma){var na=ea(ma);if(!na)return null;if(!ha(ma))return na.value;var oa=[],pa=na.options;for(var qa=1,ra=pa.length;qa<ra;qa++)if(pa[qa].selected)oa.push(pa[qa].value);return oa;},isOptionSelected:function(ma){return r.isItemChecked(ma);},listen:function(ma,na,oa){return this.subscribe(na,function(pa,qa){if(qa.selector===ma)return oa(qa,pa);});},loadMenu:function(ma){var na=la.getSelectorMenu(ma);if(!na){var oa=la.getSelectorButton(ma),pa=oa.getAttribute('ajaxify');if(pa){d(['AsyncRequest'],function(ra){ra.bootstrap(pa,oa);});var qa=n('<div class="uiSelectorMenuWrapper uiToggleFlyout">'+'<div class="uiMenu uiSelectorMenu loading">'+'<ul class="uiMenuInner">'+'<li><span></span></li>'+'</ul>'+'</div>'+'</div>');m.appendContent(oa.parentNode,qa);na=la.getSelectorMenu(ma);oa.removeAttribute('onmouseover');}}return na;},setButtonLabel:function(ma,na){var oa=la.getSelectorButton(ma),pa=parseInt(oa.getAttribute('data-length'),10);na=na||oa.getAttribute('data-label')||'';h.setLabel(oa,na);if(typeof na==='string'){k.conditionClass(oa,'uiSelectorBigButtonLabel',na.length>pa);if(pa&&na.length>pa){oa.setAttribute('title',na);}else oa.removeAttribute('title');}},setButtonTooltip:function(ma,na){var oa=la.getSelectorButton(ma),pa=s.byTag(oa,'a');pa&&v.set(pa,na||oa.getAttribute('data-tooltip')||'');},updateButtonARIALabel:function(ma,na){var oa=la.getSelectorButton(ma),pa=s.byTag(oa,'a');if(pa){var qa=oa.getAttribute('data-ariaprefix');if(qa)oa.setAttribute('aria-label',qa+': '+na);}},setEnabled:function(ma,na){if(!na&&x&&ba(ma)===x)la.toggle(ma);h.setEnabled(la.getSelectorButton(ma),na);},setOptionEnabled:function(ma,na){r.setItemEnabled(ma,na);},setSelected:function(ma,na,oa){oa=oa!==false;var pa=la.getOption(ma,na);if(!pa)return;var qa=la.isOptionSelected(pa);if(oa!==qa){if(!ha(ma)&&!qa){var ra=la.getSelectedOptions(ma)[0];ra&&r.toggleItem(ra);}r.toggleItem(pa);}la.updateSelector(ma);},toggle:function(ma){u.toggle(m.scry(ba(ma),'div.wrap')[0]);},updateSelector:function(ma){var na=la.getOptions(ma),oa=la.getSelectedOptions(ma),pa=ea(ma).options,qa=[],ra=[];for(var sa=0,ta=na.length;sa<ta;sa++){var ua=oa.contains(na[sa]);pa[sa+1].selected=ua;if(ua){var va=la.getOptionText(na[sa]);qa.push(va);ra.push(na[sa].getAttribute('data-tooltip')||va);}}pa[0].selected=!oa.length;var wa=k.hasClass(ma,'uiSelectorDynamicLabel'),xa=k.hasClass(ma,'uiSelectorDynamicTooltip');if(wa||xa){var ya='';if(ha(ma)){var za=la.getSelectorButton(ma);ya=za.getAttribute('data-delimiter')||', ';}qa=qa.join(ya);ra=ra.join(ya);if(wa){la.setButtonLabel(ma,qa);la.updateButtonARIALabel(ma,qa);}xa&&la.setButtonTooltip(ma,ra);}}});e.exports=la;});
__d("DynamicIconSelector",["Button","CSS","DOM","Selector"],function(a,b,c,d,e,f){var g=b('Button'),h=b('CSS'),i=b('DOM'),j=b('Selector'),k={swapIcon:function(l){var m=j.getSelectedOptions(l)[0],n=m&&i.scry(m,'.itemIcon')[0],o=j.getSelectorButton(l);if(n){g.setIcon(o,n.cloneNode(true));}else{var p=i.scry(o,'.img')[0];p&&i.remove(p);}h.conditionClass(o,'uiSelectorChevronOnly',!n);}};j.subscribe('change',function(l,m){var n=m.selector;if(h.hasClass(n,'dynamicIconSelector'))k.swapIcon(n);});e.exports=k;});
__d("PrivacyConst",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties'),h={FRIENDS_MINUS_ACQUAINTANCES:127,FACEBOOK_EMPLOYEES:112,CUSTOM:111,EVERYONE:80,NETWORKS_FRIENDS_OF_FRIENDS:60,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SELF:10,NOBODY:0},i={EVERYONE:80,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SOME_FRIENDS:30,SELF:10,NO_FRIENDS:0},j={BaseValue:h,FriendsValue:i};e.exports=j;});
__d("AudienceSelector",["Arbiter","CSS","DOM","DynamicIconSelector","PrivacyConst","Selector","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('DynamicIconSelector'),k=b('PrivacyConst'),l=b('Selector'),m=b('copyProperties');l.subscribe('select',function(p,q){if(!h.hasClass(q.selector,'audienceSelector'))return;var r=l.getOptionValue(q.option);g.inform('AudienceSelector/changed',q);if(r==k.BaseValue.CUSTOM&&!h.hasClass(q.option,'noDialog')){l.toggle(q.selector);return false;}if(h.hasClass(q.selector,'dataTooltip')){var s=i.find(q.option,'.itemAnchor').getAttribute('data-tooltip');l.setButtonTooltip(q.selector,s||null);}if(!h.hasClass(q.option,'specialOption'))return;var t=i.find(q.option,'a').getAttribute('data-type');if(h.hasClass(q.option,'moreOption')){h.addClass(q.selector,t);h.addClass(q.selector,'showSecondaryOptions');return false;}else if(h.hasClass(q.option,'returnOption')){h.removeClass(q.selector,'showSecondaryOptions');h.removeClass(q.selector,'friendList');return false;}});var n={},o={hasTags:function(p){return n.hasOwnProperty(p);},setHasTags:function(p){if(!p)return;n[p]=true;}};g.subscribe('CustomPrivacyOption/update',function(p,q){if(!h.hasClass(q.selector,'audienceSelector'))return;l.setSelected(q.selector,l.getOptionValue(q.option));j.swapIcon(q.selector);l.setButtonTooltip(q.selector,q.tooltip);g.inform('AudienceSelector/update',q.selector);});e.exports=o;});
__d("ContextualLayerHideOnScroll",["event-extensions","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscriptions:[],enable:function(){this._subscriptions=[this._layer.subscribe('contextchange',this._handleContextChange.bind(this)),this._layer.subscribe('show',this.attach.bind(this)),this._layer.subscribe('hide',this.detach.bind(this))];},disable:function(){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this.detach();},attach:function(){if(this._listener)return;var i=this._layer.getContextScrollParent();if(i===window)return;this._listener=Event.listen(i,'scroll',this._layer.hide.bind(this._layer));},detach:function(){this._listener&&this._listener.remove();this._listener=null;},_handleContextChange:function(){this.detach();if(this._layer.isShown())this.attach();}});e.exports=h;});
__d("BasicTypeaheadRenderer",["DOM"],function(a,b,c,d,e,f){var g=b('DOM');function h(i,j){var k=[];if(i.icon)k.push(g.create('img',{alt:'',src:i.icon}));if(i.text)k.push(g.create('span',{className:'text'},[i.text]));if(i.subtext)k.push(g.create('span',{className:'subtext'},[i.subtext]));var l=g.create('li',{className:i.type||''},k);if(i.text)l.setAttribute('aria-label',i.text);return l;}h.className='basic';e.exports=h;});
__d("TypeaheadView",["event-extensions","ArbiterMixin","ARIA","BasicTypeaheadRenderer","CSS","DOM","Parent","$","copyProperties","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('ARIA'),i=b('BasicTypeaheadRenderer'),j=b('CSS'),k=b('DOM'),l=b('Parent'),m=b('$'),n=b('copyProperties'),o=b('tx');function p(q,r){this.element=this.content=m(q);n(this,r);}n(p.prototype,g,{events:['highlight','render','reset','select','beforeRender','next','prev'],renderer:i,autoSelect:false,accessibleResultsText:"Autocomplete results are available. Use the up and down arrow keys to navigate the results.",accessibleEmptyText:"No autocomplete results are available.",ignoreMouseover:false,init:function(){this.init=bagofholding;this.initializeEvents();this.reset();},initializeEvents:function(){Event.listen(this.element,{mouseup:this.mouseup.bind(this),mouseover:this.mouseover.bind(this)});},setTypeahead:function(q){this.typeahead=q;},getElement:function(){return this.element;},mouseup:function(event){if(event.button!=2){this.select(true);event.kill();}},mouseover:function(event){if(this.ignoreMouseover){this.ignoreMouseover=false;return;}if(this.visible)this.highlight(this.getIndex(event));},reset:function(q){if(!q)this.disableAutoSelect=false;this.justRendered=false;this.justShown=false;this.index=-1;this.items=[];this.results=[];this.value='';this.content.innerHTML='';this.inform('reset');return this;},getIndex:function(event){return this.items.indexOf(l.byTag(event.getTarget(),'li'));},getSelection:function(){var q=this.results[this.index]||null;return this.visible?q:null;},isEmpty:function(){return !this.results.length;},isVisible:function(){return this.visible;},show:function(){j.show(this.element);if(this.results&&this.results.length)if(this.autoSelect){h.notify(o._("{name} is auto-selected. Use the up and down arrow keys to navigate more results.",{name:this.getItemText(this.selected)}));}else h.notify(this.accessibleResultsText);this.typeahead&&this.element.setAttribute('aria-expanded','true');this.visible=true;return this;},hide:function(){j.hide(this.element);h.notify('');this.typeahead&&this.typeahead.setAttribute('aria-expanded','false');this.visible=false;return this;},render:function(q,r,s){this.value=q;if(!r.length){if(this.results.length&&q)h.notify(this.accessibleEmptyText);this.reset(true);return;}this.justRendered=true;if(!this.results.length){this.justShown=true;if(!this.autoSelect&&this.isVisible()&&r.length)h.notify(this.accessibleResultsText);}var t={results:r,value:q};this.inform('beforeRender',t);r=t.results;var u=this.getDefaultIndex(r);if(this.index>0&&this.index!==this.getDefaultIndex(this.results)){var v=this.results[this.index];for(var w=0,x=r.length;w<x;++w)if(v.uid==r[w].uid){u=w;break;}}this.results=r;k.setContent(this.content,this.buildResults(r));this.items=this.getItems();this.highlight(u,false);this.inform('render',r);},getItems:function(){return k.scry(this.content,'li');},buildResults:function(q){var r,s=null;if(typeof this.renderer=='function'){r=this.renderer;s=this.renderer.className||'';}else{r=a.TypeaheadRenderers[this.renderer];s=this.renderer;}r=r.bind(this);var t=q.map(function(v,w){var x=v.node||r(v,w);x.setAttribute('role','option');return x;}),u=k.create('ul',{className:s,id:'typeahead_list_'+(this.typeahead?k.getID(this.typeahead):k.getID(this.element))},t);u.setAttribute('role','listbox');return u;},getDefaultIndex:function(q){var r=(this.autoSelect&&!this.disableAutoSelect);return this.index<0&&!r?-1:0;},next:function(){this.highlight(this.index+1);this.inform('next',this.selected);},prev:function(){this.highlight(this.index-1);this.inform('prev',this.selected);},getItemText:function(q){var r='';if(q){r=q.getAttribute('aria-label');if(!r){r=k.getText(q);q.setAttribute('aria-label',r);}}return r;},setIsViewingSelectedItems:function(q){this.viewingSelected=q;return this;},getIsViewingSelectedItems:function(){return this.viewingSelected;},highlight:function(q,r){var s=true;if(this.selected){j.removeClass(this.selected,'selected');this.selected.setAttribute('aria-selected','false');}if(q>this.items.length-1){q=-1;}else if(q<-1)q=this.items.length-1;if(q>=0&&q<this.items.length){if(this.selected&&this.getItemText(this.items[q])===this.getItemText(this.selected))s=false;this.selected=this.items[q];j.addClass(this.selected,'selected');this.selected.setAttribute('aria-selected','true');}this.index=q;this.disableAutoSelect=(q==-1);var t=(q!==-1),u=this.getItemText(this.selected);if(q!==-1&&this.isVisible()&&u&&this.autoSelect)if(this.justShown){h.notify(o._("{name} is auto-selected. Use the up and down arrow keys to navigate more results.",{name:u}));this.justRendered=false;this.justShown=false;t=false;}else if(s&&this.justRendered){h.notify(o._("{name} is auto-selected.",{name:u}));this.justRendered=false;t=false;}if(s&&t)h.announce(u);if(r!==false)this.inform('highlight',{index:q,selected:this.results[q],element:this.selected});},select:function(q){var r=this.index,s=this.results[r];if(s){this.inform('select',{index:r,clicked:!!q,selected:s});this.inform('afterSelect');}}});e.exports=p;});
__d("BucketedTypeaheadView",["Class","DOM","TypeaheadView","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('DOM'),i=b('TypeaheadView'),j=b('copyProperties');function k(l,m){this.parent.construct(this,l,m);}g.extend(k,i);j(k.prototype,{render:function(l,m,n){m=this.buildBuckets(l,m);return this.parent.render(l,m,n);},highlight:function(l,m){if(l==-1&&this.index!==0)l=this.index;if(l>=0&&l<this.items.length&&this.results[l].type=='header')l=l+1;this.parent.highlight(l,m);},buildBuckets:function(l,m){if(!this.typeObjects)return m;var n=[],o={};for(var p=0;p<m.length;++p){var q=m[p],r=q.render_type||q.type;if(!o.hasOwnProperty(r)){o[r]=n.length;n.push([this.buildBucketHeader(r)]);}q.classNames=r;q.groupIndex=o[r];q.indexInGroup=n[q.groupIndex].length-1;n[q.groupIndex].push(q);}var s=[];for(var t=0;t<n.length;++t)s=s.concat(n[t]);return s;},buildBucketHeader:function(l){var m=this.typeObjects[l];if(m.markup){m.text=m.markup;delete m.markup;}return this.typeObjects[l];},buildResults:function(l){var m=this.parent.buildResults(l);if(this.typeObjects){return h.create('div',{className:'bucketed'},[m]);}else return m;},select:function(l){var m=this.results[this.index];if(m&&m.type!='header')this.parent.select(l);},getDefaultIndex:function(l){var m=(this.autoSelect&&!this.disableAutoSelect),n=l.length===0?-1:(l[0].type=='header'?1:0);return this.index<0&&!m?-1:n;},prev:function(){var l=this.results[this.index-1];if(l&&l.type=='header')this.index--;return this.parent.prev();},next:function(){var l=this.results[this.index+1];if(l&&l.type=='header')this.index++;return this.parent.next();}});e.exports=k;});
__d("ContextualTypeaheadView",["event-extensions","Class","ContextualLayer","ContextualLayerAutoFlip","ContextualLayerHideOnScroll","CSS","DOM","Style","BucketedTypeaheadView","Vector","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Class'),h=b('ContextualLayer'),i=b('ContextualLayerAutoFlip'),j=b('ContextualLayerHideOnScroll'),k=b('CSS'),l=b('DOM'),m=b('Style'),n=b('BucketedTypeaheadView'),o=b('Vector'),p=b('copyProperties');function q(r,s){this.parent.construct(this,r,s);}g.extend(q,n);p(q.prototype,{init:function(){this.initializeLayer();this.parent.init();},initializeLayer:function(){this.context=this.getContext();this.wrapper=l.create('div');l.appendContent(this.wrapper,this.element);k.addClass(this.element,'uiContextualTypeaheadView');this.layer=new h({context:this.context,position:'below',causalElement:this.causalElement},this.wrapper);this.layer.enableBehavior(j);if(m.isFixed(this.context))this.layer.enableBehavior(i);this.subscribe('render',this.renderLayer.bind(this));},show:function(){this.layer.show();o.getElementDimensions(this.context).setElementWidth(this.wrapper);return this.parent.show();},hide:function(){this.layer.hide();return this.parent.hide();},renderLayer:function(){if(!this.isVisible())return;if(this.layer.isShown()){this.layer.updatePosition();}else this.layer.show();},getContext:function(){return this.element.parentNode;}});e.exports=q;});
__d("CustomPrivacyOption",["event-extensions","AsyncRequest","Dialog","DOM","Form","Parent","Selector","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('Dialog'),i=b('DOM'),j=b('Form'),k=b('Parent'),l=b('Selector'),m=b('copyProperties');function n(){}m(n,{_instances:{},update:function(o,p,q,r){var s=n._instances[o];s._update(p,q)._updateOption(q,r);Arbiter.inform('Form/change',{node:s._container});},getData:function(o){return n._instances[o]._privacyData;}});m(n.prototype,{init:function(o,p,q,r,s){(function(){var t=this.initCustomState(o,p);if(!t)return;Event.listen(t,'click',function(event){this.openCustomDialog(event,o,q,s);}.bind(this));this._initSelector(t,r);}).bind(this).defer();},_initSelector:function(o,p){this._selector=k.byClass(o,'uiSelector');l.listen(this._selector,'select',function(q){if(q.option._id!=this._id)this.clearCustomState();}.bind(this));if(p)l.setButtonTooltip(this._selector,p);},_updateOption:function(o,p){var q=l.getOption(this._selector,o)||l.getOption(this._selector,PrivacyBaseValue.CUSTOM+'');Arbiter.inform('CustomPrivacyOption/update',{selector:this._selector,option:q,tooltip:p});return this;},_update:function(o,p){var q=p==PrivacyBaseValue.CUSTOM||!l.getOption(this._selector,p),r=this._selector.getAttribute('data-name');this.updateCustomState(o,q,r);return this;},initCustomState:function(o,p){var q=ge(o);if(!q)return q;n._instances[o]=this;this._container=i.find(q,'.customPrivacyInputs');this._id=p;this._privacyData={};var r=j.serialize(this._container);if(r.audience)this._privacyData=r.audience[p];return q;},openCustomDialog:function(event,o,p,q){var r=new g('/ajax/privacy/custom_dialog/').setData({option_id:o,id:this._id,privacy_data:this._privacyData,explain_tags:p,autosave:q});new h().setAsync(r).setModal(true).setCausalElement(event.getTarget()).show();},updateCustomState:function(o,p,q){this.clearCustomState();this._privacyData=m({},o);if(p)if(q){q=q.slice(0,-'[value]'.length);var r={};r[q]=o;j.createHiddenInputs(r,this._container,null,true);}},clearCustomState:function(){this._privacyData={};i.empty(this._container);}});e.exports=n;});
__d("TypeaheadUtil",["function-extensions"],function(a,b,c,d,e,f){b('function-extensions');var g=/[ ]+/g,h=/[^ ]+/g,i=/[.,+*?$|#{}()\^\-\[\]\\\/!@%'"~=<>_:;\u2010\u2011\u2012\u2013\u2014\u2015\u30fb\uff1a]/g,j={},k={a:"\u0430 \u00e0 \u00e1 \u00e2 \u00e3 \u00e4 \u00e5",b:"\u0431",c:"\u0446 \u00e7 \u010d",d:"\u0434 \u00f0 \u010f \u0111",e:"\u044d \u0435 \u00e8 \u00e9 \u00ea \u00eb \u011b",f:"\u0444",g:"\u0433 \u011f",h:"\u0445 \u0127",i:"\u0438 \u00ec \u00ed \u00ee \u00ef \u0131",j:"\u0439",k:"\u043a \u0138",l:"\u043b \u013e \u013a \u0140 \u0142",m:"\u043c",n:"\u043d \u00f1 \u0148 \u0149 \u014b",o:"\u043e \u00f8 \u00f6 \u00f5 \u00f4 \u00f3 \u00f2",p:"\u043f",r:"\u0440 \u0159 \u0155",s:"\u0441 \u015f \u0161 \u017f",t:"\u0442 \u0165 \u0167 \u00fe",u:"\u0443 \u044e \u00fc \u00fb \u00fa \u00f9 \u016f",v:"\u0432",y:"\u044b \u00ff \u00fd",z:"\u0437 \u017e",ae:"\u00e6",oe:"\u0153",ts:"\u0446",ch:"\u0447",ij:"\u0133",sh:"\u0448",ss:"\u00df",ya:"\u044f"};for(var l in k){var m=k[l].split(' ');for(var n=0;n<m.length;n++)j[m[n]]=l;}var o={};function p(v){return v?v.replace(i,' '):'';}function q(v){v=(''+v).toLowerCase();var w='',x='';for(var y=v.length;y--;){x=v.charAt(y);w=(j[x]||x)+w;}return w.replace(g,' ');}function r(v){var w=[],x=h.exec(v);while(x){x=x[0];w.push(x);x=h.exec(v);}return w;}function s(v,w){v=''+v;if(!o.hasOwnProperty(v)){var x=q(v),y=p(x);o[v]={value:v,flatValue:x,tokens:r(y),isPrefixQuery:y&&y[y.length-1]!=' '};}if(w&&typeof o[v].sortedTokens=='undefined'){o[v].sortedTokens=o[v].tokens.slice();o[v].sortedTokens.sort(function(z,aa){return aa.length-z.length;});}return o[v];}function t(v,w,x){var y=s(w,v=='prefix'),z=v=='prefix'?y.sortedTokens:y.tokens,aa=s(x).tokens,ba={},ca=y.isPrefixQuery&&v=='query'?z.length-1:null,da=function(ea,fa){for(var ga=0;ga<aa.length;++ga){var ha=aa[ga];if(!ba[ga]&&(ha==ea||((v=='query'&&fa===ca||v=='prefix')&&ha.indexOf(ea)===0)))return (ba[ga]=true);}return false;};return z.length&&z.every(da);}var u={parse:s,isExactMatch:t.curry('exact'),isQueryMatch:t.curry('query'),isPrefixMatch:t.curry('prefix')};e.exports=u;});
__d("DataSource",["array-extensions","ArbiterMixin","AsyncRequest","TypeaheadUtil","copyProperties","createArrayFrom","createObjectFrom"],function(a,b,c,d,e,f){b('array-extensions');var g=b('ArbiterMixin'),h=b('AsyncRequest'),i=b('TypeaheadUtil'),j=b('copyProperties'),k=b('createArrayFrom'),l=b('createObjectFrom');function m(n){this._maxResults=n.maxResults||10;this.token=n.token;this.queryData=n.queryData||{};this.queryEndpoint=n.queryEndpoint||'';this.bootstrapData=n.bootstrapData||{};this.bootstrapEndpoint=n.bootstrapEndpoint||'';this._exclusions=n.exclusions||[];this._indexedFields=n.indexedFields||['text','tokens'];this._titleFields=n.titleFields||[];this._alwaysPrefixMatch=n.alwaysPrefixMatch||false;this._deduplicationKey=n.deduplicationKey||null;this._minExactMatchLength=4;this._filters=[];}j(m.prototype,g,{events:['bootstrap','query','respond'],init:function(){this.init=bagofholding;this._fields=l(this._indexedFields);this._activeQueries=0;this.dirty();},dirty:function(){this.value='';this._bootstrapped=false;this._bootstrapping=false;this._data={};this.localCache={};this.queryCache={};this.inform('dirty',{});return this;},bootstrap:function(){if(this._bootstrapped)return;this.bootstrapWithoutToken();this._bootstrapped=true;this._bootstrapping=true;this.inform('bootstrap',{bootstrapping:true});},bootstrapWithoutToken:function(){this.fetch(this.bootstrapEndpoint,this.bootstrapData,{bootstrap:true,token:this.token});},bootstrapWithToken:function(){var n=j({},this.bootstrapData);n.token=this.token;this.fetch(this.bootstrapEndpoint,n,{bootstrap:true,replaceCache:true});},query:function(n,o,p){this.inform('beforeQuery',{value:n});var q=this.buildUids(n,[],p),r=this.respond(n,q);this.value=n;this.inform('query',{value:n,results:r});var s=i.parse(n).flatValue;if(o||!s||!this.queryEndpoint||this.getQueryCache().hasOwnProperty(s)||!this.shouldFetchMoreResults(r))return false;this.inform('queryEndpoint',{value:n});this.fetch(this.queryEndpoint,this.getQueryData(n,q),{value:n,exclusions:p});return true;},shouldFetchMoreResults:function(n){return n.length<this._maxResults;},getQueryData:function(n,o){var p=j({value:n},this.queryData||{});o=o||[];if(o.length)p.existing_ids=o.join(',');if(this._bootstrapping)p.bsp=true;return p;},setQueryData:function(n,o){if(o)this.queryData={};j(this.queryData,n);return this;},setBootstrapData:function(n,o){if(o)this.bootstrapData={};j(this.bootstrapData,n);return this;},getExclusions:function(){return k(this._exclusions);},setExclusions:function(n){this._exclusions=n||[];},addFilter:function(n){var o=this._filters;o.push(n);return {remove:function(){o.splice(o.indexOf(n),1);}};},clearFilters:function(){this._filters=[];},respond:function(n,o,p){var q=this.buildData(o);this.inform('respond',{value:n,results:q,isAsync:!!p});return q;},asyncErrorHandler:bagofholding,fetch:function(n,o,p){if(!n)return;var q=new h().setURI(n).setData(o).setMethod('GET').setReadOnly(true).setHandler(function(r){this.fetchHandler(r,p||{});}.bind(this));if(n===this.queryEndpoint)q.setFinallyHandler(function(){this._activeQueries--;if(!this._activeQueries)this.inform('activity',{activity:false});}.bind(this));q.setErrorHandler(this.asyncErrorHandler);this.inform('beforeFetch',{request:q,fetch_context:p});q.send();if(n===this.queryEndpoint){if(!this._activeQueries)this.inform('activity',{activity:true});this._activeQueries++;}},fetchHandler:function(n,o){var p=o.value,q=o.exclusions;if(!p&&o.replaceCache)this.localCache={};this.addEntries(n.getPayload().entries,p);this.inform('fetchComplete',{response:n,value:p,fetch_context:o});var r=(!p&&this.value)?this.value:p;this.respond(r,this.buildUids(r,[],q),true);if(!p){if(this._bootstrapping){this._bootstrapping=false;this.inform('bootstrap',{bootstrapping:false});}if(o.token&&n.getPayload().token!==o.token)this.bootstrapWithToken();}},addEntries:function(n,o){var p=this.processEntries(k(n||[]),o),q=this.buildUids(o,p);if(o){var r=this.getQueryCache();r[i.parse(o).flatValue]=q;}else this.fillCache(q);},processEntries:function(n,o){return n.map(function(p,q){var r=(p.uid=p.uid+''),s=this.getEntry(r);if(!s){s=p;s.query=o;this.setEntry(r,s);}else j(s,p);s.index===undefined&&(s.index=q);return r;},this);},getAllEntries:function(){return this._data||{};},getEntry:function(n){return this._data[n]||null;},setEntry:function(n,o){this._data[n]=o;},fillCache:function(n){var o=this.localCache;n.forEach(function(p){var q=this.getEntry(p);if(!q)return;q.bootstrapped=true;var r=i.parse(this.getTextToIndex(q)).tokens;for(var s=0,t=r.length;s<t;++s){var u=r[s];if(!o.hasOwnProperty(u))o[u]={};o[u][p]=true;}},this);},getTextToIndex:function(n){if(n.textToIndex&&!n.needs_update)return n.textToIndex;n.needs_update=false;n.textToIndex=this.getTextToIndexFromFields(n,this._indexedFields);return n.textToIndex;},getTextToIndexFromFields:function(n,o){var p=[];for(var q=0;q<o.length;++q){var r=n[o[q]];if(r)p.push(r.join?r.join(' '):r);}return p.join(' ');},mergeUids:function(n,o,p,q){var r=function(s,t){var u=this.getEntry(s),v=this.getEntry(t);if(u.extended_match!==v.extended_match)return u.extended_match?1:-1;if(u.index!==v.index)return u.index-v.index;if(u.text.length!==v.text.length)return u.text.length-v.text.length;return u.uid<v.uid;}.bind(this);this._checkExtendedMatch(q,n);return this.deduplicateByKey(n.sort(r).concat(o,p));},_checkExtendedMatch:function(n,o){var p=this._alwaysPrefixMatch?i.isPrefixMatch:i.isQueryMatch;for(var q=0;q<o.length;++q){var r=this.getEntry(o[q]);r.extended_match=r.tokens?!p(n,r.text):false;}},buildUids:function(n,o,p){if(!o)o=[];if(!n)return o;if(!p)p=[];var q=this.buildCacheResults(n,this.localCache),r=this.buildQueryResults(n),s=this.mergeUids(q,r,o,n),t=l(p.concat(this._exclusions)),u=s.filter(function(v){if(t.hasOwnProperty(v)||!this.getEntry(v))return false;for(var w=0;w<this._filters.length;++w)if(!this._filters[w](this.getEntry(v),n))return false;return (t[v]=true);},this);return this.uidsIncludingExact(n,u,t);},uidsIncludingExact:function(n,o,p){var q=o.length;if(n.length<this._minExactMatchLength||q<=this._maxResults)return o;for(var r=0;r<q;++r){var s=this.getEntry(o[r]);s.text_lower||(s.text_lower=s.text.toLowerCase());if(s.text_lower===i.parse(n).flatValue){if(r>=this._maxResults){var t=o.splice(r,1);o.splice(this._maxResults-1,0,t);}break;}}return o;},buildData:function(n){var o=[],p=Math.min(n.length,this._maxResults);for(var q=0;q<p;++q)o.push(this.getEntry(n[q]));return o;},findQueryCache:function(n){var o=0,p=null,q=this.getQueryCache();for(var r in q)if(n.indexOf(r)===0&&r.length>o){o=r.length;p=r;}return q[p]||[];},buildQueryResults:function(n){var o=i.parse(n).flatValue,p=this.findQueryCache(o);if(this.getQueryCache().hasOwnProperty(o))return p;return this.filterQueryResults(n,p);},filterQueryResults:function(n,o){var p=this._alwaysPrefixMatch?i.isPrefixMatch:i.isQueryMatch;return o.filter(function(q){return p(n,this.getTextToIndex(this.getEntry(q)));},this);},buildCacheResults:function(n,o){var p=i.parse(n,this._alwaysPrefixMatch),q=this._alwaysPrefixMatch?p.sortedTokens:p.tokens,r=q.length,s=p.isPrefixQuery?r-1:null,t={},u={},v={},w=[],x=false,y={},z=0;for(var aa=0;aa<r;++aa){var ba=q[aa];if(!y.hasOwnProperty(ba)){z++;y[ba]=true;}else continue;for(var ca in o)if((!t.hasOwnProperty(ca)&&ca===ba)||((this._alwaysPrefixMatch||s===aa)&&ca.indexOf(ba)===0)){if(ca===ba){if(u.hasOwnProperty(ca))x=true;t[ca]=true;}else{if(t.hasOwnProperty(ca)||u.hasOwnProperty(ca))x=true;u[ca]=true;}for(var da in o[ca])if(aa===0||(v.hasOwnProperty(da)&&v[da]==z-1))v[da]=z;}}for(var ea in v)if(v[ea]==z)w.push(ea);if(x||z<r)w=this.filterQueryResults(n,w);if(this._titleFields&&this._titleFields.length>0)w=this.filterNonTitleMatchQueryResults(n,w);return w;},filterNonTitleMatchQueryResults:function(n,o){return o.filter(function(p){var q=i.parse(n),r=q.tokens.length;if(r===0)return true;var s=this.getTitleTerms(this.getEntry(p)),t=q.tokens[0];return ((r===1)||this._alwaysPrefixMatch)?i.isPrefixMatch(t,s):i.isQueryMatch(t,s);},this);},getTitleTerms:function(n){if(n.titleToIndex)return n.titleToIndex;return (n.titleToIndex=this.getTextToIndexFromFields(n,this._titleFields));},deduplicateByKey:function(n){if(!this._deduplicationKey)return n;var o=l(n.map(this._getDeduplicationKey.bind(this)),n);return n.filter(function(p){return o[this._getDeduplicationKey(p)]==p;}.bind(this));},_getDeduplicationKey:function(n){var o=this.getEntry(n);return o[this._deduplicationKey]||'__'+n+'__';},getQueryCache:function(){return this.queryCache;},setMaxResults:function(n){this._maxResults=n;this.value&&this.respond(this.value,this.buildUids(this.value));},updateToken:function(n){this.token=n;this.dirty();return this;}});e.exports=m;});
__d("Dcode",[],function(a,b,c,d,e,f){var g,h={},i={_:'%',A:'%2',B:'000',C:'%7d',D:'%7b%22',E:'%2c%22',F:'%22%3a',G:'%2c%22ut%22%3a1',H:'%2c%22bls%22%3a',I:'%2c%22n%22%3a%22%',J:'%22%3a%7b%22i%22%3a0%7d',K:'%2c%22pt%22%3a0%2c%22vis%22%3a',L:'%2c%22ch%22%3a%7b%22h%22%3a%22',M:'%7b%22v%22%3a2%2c%22time%22%3a1',N:'.channel%22%2c%22sub%22%3a%5b',O:'%2c%22sb%22%3a1%2c%22t%22%3a%5b',P:'%2c%22ud%22%3a100%2c%22lc%22%3a0',Q:'%5d%2c%22f%22%3anull%2c%22uct%22%3a',R:'.channel%22%2c%22sub%22%3a%5b1%5d',S:'%22%2c%22m%22%3a0%7d%2c%7b%22i%22%3a',T:'%2c%22blc%22%3a1%2c%22snd%22%3a1%2c%22ct%22%3a',U:'%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a',V:'%2c%22blc%22%3a0%2c%22snd%22%3a0%2c%22ct%22%3a',W:'%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a',X:'%2c%22ri%22%3a0%7d%2c%22state%22%3a%7b%22p%22%3a0%2c%22ut%22%3a1',Y:'%2c%22pt%22%3a0%2c%22vis%22%3a1%2c%22bls%22%3a0%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a',Z:'%2c%22sb%22%3a1%2c%22t%22%3a%5b%5d%2c%22f%22%3anull%2c%22uct%22%3a0%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a'};(function(){var k=[];for(var l in i){h[i[l]]=l;k.push(i[l]);}k.reverse();g=new RegExp(k.join("|"),'g');})();var j={encode:function(k){return encodeURIComponent(k).replace(/([_A-Z])|%../g,function(l,m){return m?'%'+m.charCodeAt(0).toString(16):l;}).toLowerCase().replace(g,function(l){return h[l];});},decode:function(k){return decodeURIComponent(k.replace(/[_A-Z]/g,function(l){return i[l];}));}};e.exports=j;});
__d("cx",[],function(a,b,c,d,e,f){function g(h){throw new Error('cx'+'(...): Unexpected class transformation.');}e.exports=g;});
__d("DialogHideOnSuccess",["copyProperties","CSS","cx"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('CSS'),i=b('cx');function j(k){this._layer=k;}g(j.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('success',this._handle.bind(this));},disable:function(){this._subscription.unsubscribe();this._subscription=null;},_handle:function(k,event){if(h.hasClass(event.getTarget(),"_s"))this._layer.hide();}});e.exports=j;});
__d("DocRPC",["ErrorUtils"],function(a,b,c,d,e,f){var g=b('ErrorUtils'),h={_apis:{},_dispatch:function(i){var j;try{i=JSON.parse(i);}catch(k){throw new Error('DocRPC unparsable dispatch: "'+i+'"');}if(h._apis.hasOwnProperty(i.api)){var l=h._apis[i.api];if(l[i.method])j=g.applyWithGuard(l[i.method],l,i.args);}if(j===undefined)j=null;return JSON.stringify(j);},publish:function(i,j){h._apis[j]=i;},proxy:function(i,j,k){var l={};k.forEach(function(m){l[m]=function(){var n={api:j,method:m,args:Array.prototype.slice.call(arguments)},o=i.DocRPC._dispatch(JSON.stringify(n));if(typeof(o)=='string')try{o=JSON.parse(o);}catch(p){throw new Error('DocRPC '+j+'.'+m+' unparsable return: "'+o+'"');}return o;};});return l;}};e.exports=a.DocRPC=h;});
__d("DocumentTitle",["Arbiter"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=document.title,i=null,j=1500,k=[],l=0,m=null,n=false;function o(){if(k.length>0){if(!n){p(k[l].title);l=++l%k.length;}else q();}else{clearInterval(m);m=null;q();}}function p(s){document.title=s;n=true;}function q(){r.set(i||h,true);n=false;}var r={get:function(){return h;},set:function(s,t){document.title=s;if(!t){h=s;i=null;g.inform('update_title',s);}else i=s;},blink:function(s){var t={title:s};k.push(t);if(m===null)m=setInterval(o,j);return {stop:function(){var u=k.indexOf(t);if(u>=0){k.splice(u,1);if(l>u){l--;}else if(l==u&&l==k.length)l=0;}}};}};e.exports=r;});
__d("Emote",["DOM","Env","htmlize"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('Env'),i=b('htmlize'),j=e.exports={_initialized:false,_imageBase:null,_emoteMap:null,_emoteOrderMap:null,_fbidEmoticonPattern:'\\[\\[([A-Za-z0-9\\.]+)\\]\\]',_fbidEmoticonRegex:null,_nonNumericRegex:/^\D+$/,_imageURLs:null,_regex:null,_regexWithoutFBIDs:null,_init:function(){var k=h.static_base;j._imageBase=k+'images/emote/';j._blankImgSrc=k+'images/blank.gif';var l=['smile','frown','tongue','grin','gasp','wink','glasses','sunglasses','grumpy','unsure','cry','devil','angel','kiss','heart','kiki','squint','confused','upset','pacman','colonthree','like','confused_rev'];j._emoteMap={':-)':['\\:\\-\\)','smile'],':)':['\\:\\)','smile'],':]':['\\:\\]','smile'],'=)':['=\\)','smile'],':-(':['\\:\\-\\(','frown'],':(':['\\:\\(','frown'],':[':['\\:\\[','frown'],'=(':['=\\(','frown'],':-P':['\\:\\-P','tongue'],':P':['\\:P','tongue'],':-p':['\\:\\-p','tongue'],':p':['\\:p','tongue'],'=P':['=P','tongue'],':-D':['\\:\\-D','grin'],':D':['\\:D','grin'],'=D':['=D','grin'],':-O':['\\:\\-O','gasp'],':O':['\\:O','gasp'],':-o':['\\:\\-o','gasp'],':o':['\\:o','gasp'],';-)':['\\;\\-\\)','wink'],';)':['\\;\\)','wink'],'8-)':['8\\-\\)','glasses'],'8)':['8\\)','glasses'],'B-)':['B\\-\\)','glasses'],'B)':['B\\)','glasses'],'8-|':['8\\-\\|','sunglasses'],'8|':['8\\|','sunglasses'],'B-|':['B\\-\\|','sunglasses'],'B|':['B\\|','sunglasses'],'>:(':['>\\:\\(','grumpy'],'>:-(':['>\\:\\-\\(','grumpy'],':/':['\\:/','unsure'],':-/':['\\:\\-/','unsure'],':\\':['\\:\\\\','unsure'],':-\\':['\\:\\-\\\\','unsure'],":'(":["\\:'\\(",'cry'],'3:)':['3\\:\\)','devil'],'3:-)':['3\\:\\-\\)','devil'],'O:)':['O\\:\\)','angel'],'O:-)':['O\\:\\-\\)','angel'],':-*':['\\:\\-\\*','kiss'],':*':['\\:\\*','kiss'],'<3':['<3','heart'],'&lt;3':['&lt\\;3','heart'],'\u2665':['\u2665','heart'],'^_^':['\\^_\\^','kiki'],'-_-':['\\-_\\-','squint'],'o.O':['o\\.O','confused'],'O.o':['O\\.o','confused_rev'],'>:O':['>\\:O','upset'],'>:-O':['>\\:\\-O','upset'],'>:o':['>\\:o','upset'],'>:-o':['>\\:\\-o','upset'],'>_<':['>_<','upset'],'>.<':['>\\.<','upset'],':v':['\\:v','pacman'],':|]':['\\:\\|\\]','robot'],':3':['\\:3','colonthree'],'<(")':['<\\(\\"\\)','penguin'],':putnam:':['\\:putnam\\:','putnam'],'(^^^)':['\\(\\^\\^\\^\\)','shark'],':42:':['\\:42\\:','42'],':like:':['\\:like\\:','like'],'(y)':['\\(y\\)','like'],'(Y)':['\\(Y\\)','like']};var m=[],n=[];if(h.fbid_emoticons){j._fbidEmoticonRegex=new RegExp(j._fbidEmoticonPattern);m.push(j._fbidEmoticonPattern);}for(var o in j._emoteMap){var p=j._emoteMap[o][0];m.push(p);n.push(p);}var q='(?:^|\\s|\'|"|\\.)('+m.join('|')+')(?:\\s|\'|"|\\.|,|!|\\?|<br>|$)',r='(?:^|\\s|\'|"|\\.)('+n.join('|')+')(?:\\s|\'|"|\\.|,|!|\\?|<br>|$)';j._regex=new RegExp(q);j._regexWithoutFBIDs=new RegExp(r);j._emoteOrderMap={};for(var s=0;s<l.length;s++)j._emoteOrderMap[l[s]]=s;j._initialized=true;},htmlEmote:function(k,l){return j._htmlEmote(k,l,true);},htmlEmoteWithoutFBID:function(k,l){return j._htmlEmote(k,l,false);},_getRegex:function(k){return k?j._regex:j._regexWithoutFBIDs;},_htmlEmote:function(k,l,m){if(typeof l!='function')l=i;if(!j._initialized)j._init();var n=k,o=[];while(true){var p=j._getRegex(m),q=p.exec(n);if(!q||!q.length)break;var r=q[1],s=n.indexOf(r),t=n.substring(0,s);if(t)o.push(l(t));o.push('<span class="emote_text">');o.push(r);o.push('</span>');var u,v=j._fbidEmoticonRegex&&(j._fbidEmoticonRegex.exec(r)||[])[1];if(v){u={alt:r};u.className='emote_custom';u.src=window.location.protocol+'//graph.facebook.com/'+encodeURIComponent(v)+'/picture';if(j._nonNumericRegex.test(v))u.title=v;}else{var w=j._emoteMap[r][1],x=j._emoteOrderMap[w];u={title:r,alt:w};if(x===undefined){u.className='emote_custom';u.src=j._imageBase+w+'.gif';}else{var y=x*-16;u.className='emote_img';u.src=j._blankImgSrc;u.style={backgroundPosition:y+'px 0'};}}var z=g.create('img',u);o.push(g.create('span',{},z).innerHTML);n=n.substring(s+r.length);}if(n)o.push(l(n));return o.join('');}};});
__d("SupportedEmoji",["cx"],function(a,b,c,d,e,f){var g=b('cx');e.exports={utf16Regex:/[\u203C\u2049\u2100-\u21FF\u2300-\u27FF\u2900-\u29FF\u2B00-\u2BFF\u3000-\u30FF\u3200-\u32FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF]/,emoji:{127744:"_2b_",127746:"_2c0",127754:"_2c1",127769:"_2c2",127775:"_2c3",127793:"_2c4",127796:"_2c5",127797:"_2c6",127799:"_2c7",127800:"_2c8",127801:"_2c9",127802:"_2ca",127803:"_2cb",127806:"_2cc",127808:"_2cd",127809:"_2ce",127810:"_2cf",127811:"_2cg",127818:"_2ch",127822:"_2ci",127827:"_2cj",127828:"_2ck",127864:"_2cl",127866:"_2cm",127873:"_2cn",127875:"_2co",127876:"_2cp",127877:"_2cq",127880:"_2cr",127881:"_2cs",127885:"_2ct",127886:"_2cu",127887:"_2cv",127888:"_2cw",127891:"_2cx",127925:"_2cy",127926:"_2cz",127932:"_2c-",128013:"_2c_",128014:"_2d0",128017:"_2d1",128018:"_2d2",128020:"_2d3",128023:"_2d4",128024:"_2d5",128025:"_2d6",128026:"_2d7",128027:"_2d8",128031:"_2d9",128032:"_2da",128033:"_2db",128037:"_2dc",128038:"_2dd",128039:"_2de",128040:"_2df",128041:"_2dg",128043:"_2dh",128044:"_2di",128045:"_2dj",128046:"_2dk",128047:"_2dl",128048:"_2dm",128049:"_2dn",128051:"_2do",128052:"_2dp",128053:"_2dq",128055:"_2dr",128056:"_2ds",128057:"_2dt",128058:"_2du",128059:"_2dv",128062:"_2dw",128064:"_2dx",128066:"_2dy",128067:"_2dz",128068:"_2d-",128069:"_2d_",128070:"_2e0",128071:"_2e1",128072:"_2e2",128073:"_2e3",128074:"_2e4",128075:"_2e5",128076:"_2e6",128077:"_2e7",128078:"_2e8",128079:"_2e9",128080:"_2ea",128102:"_2eb",128103:"_2ec",128104:"_2ed",128105:"_2ee",128107:"_2ef",128110:"_2eg",128111:"_2eh",128113:"_2ei",128114:"_2ej",128115:"_2ek",128116:"_2el",128117:"_2em",128118:"_2en",128119:"_2eo",128120:"_2ep",128123:"_2eq",128124:"_2er",128125:"_2es",128126:"_2et",128127:"_2eu",128128:"_2ev",128130:"_2ew",128131:"_2ex",128133:"_2ey",128139:"_2ez",128143:"_2e-",128144:"_2e_",128145:"_2f0",128147:"_2f1",128148:"_2f2",128150:"_2f3",128151:"_2f4",128152:"_2f5",128153:"_2f6",128154:"_2f7",128155:"_2f8",128156:"_2f9",128157:"_2fa",128162:"_2fb",128164:"_2fc",128166:"_2fd",128168:"_2fe",128169:"_2ff",128170:"_2fg",128187:"_2fh",128189:"_2fi",128190:"_2fj",128191:"_2fk",128192:"_2fl",128222:"_2fm",128224:"_2fn",128241:"_2fo",128242:"_2fp",128250:"_2fq",128276:"_2fr",128513:"_2fs",128514:"_2ft",128515:"_2fu",128516:"_2fv",128518:"_2fw",128521:"_2fx",128523:"_2fy",128524:"_2fz",128525:"_2f-",128527:"_2f_",128530:"_2g0",128531:"_2g1",128532:"_2g2",128534:"_2g3",128536:"_2g4",128538:"_2g5",128540:"_2g6",128541:"_2g7",128542:"_2g8",128544:"_2g9",128545:"_2ga",128546:"_2gb",128547:"_2gc",128548:"_2gd",128549:"_2ge",128552:"_2gf",128553:"_2gg",128554:"_2gh",128555:"_2gi",128557:"_2gj",128560:"_2gk",128561:"_2gl",128562:"_2gm",128563:"_2gn",128565:"_2go",128567:"_2gp",128568:"_2gq",128569:"_2gr",128570:"_2gs",128571:"_2gt",128572:"_2gu",128573:"_2gv",128575:"_2gw",128576:"_2gx",128587:"_2gy",128588:"_2gz",128589:"_2g-",128591:"_2g_",9757:"_2h0",9786:"_2h1",9889:"_2h2",9924:"_2h3",9994:"_2h4",9995:"_2h5",9996:"_2h6",9728:"_2h7",9729:"_2h8",9748:"_2h9",9749:"_2ha",10024:"_2hb",10084:"_2hc"}};});
__d("Utf16",[],function(a,b,c,d,e,f){var g={decode:function(h){switch(h.length){case 1:return h.charCodeAt(0);case 2:return 65536|((h.charCodeAt(0)-55296)*1024)|(h.charCodeAt(1)-56320);}},encode:function(h){if(h<65536){return String.fromCharCode(h);}else return String.fromCharCode(55296+((h-65536)>>10))+String.fromCharCode(56320+(h%1024));}};e.exports=g;});
__d("Emoji",["cx","DOM","Emote","SupportedEmoji","htmlize","Utf16"],function(a,b,c,d,e,f){var g=b('cx'),h=b('DOM'),i=b('Emote'),j=b('SupportedEmoji'),k=b('htmlize'),l=b('Utf16'),m=e.exports={htmlEmojiAndEmote:function(n,o){return m.htmlEmoji(n,function(p){return i.htmlEmote(p,o);});},htmlEmoji:function(n,o){if(typeof o!='function')o=k;var p=n,q=[];while(true){var r=j.utf16Regex.exec(p);if(!r||!r.length)break;var s=r[0],t=p.indexOf(s);q.push(o(p.substring(0,t)));var u=l.decode(s);if(j.emoji[u]){var v="_1az _1a-"+' '+j.emoji[u],w=h.create('span',{className:v});q.push(h.create('span',{},w).innerHTML);}else q.push(o(s));p=p.substring(t+s.length);}q.push(o(p));return q.join('');}};});
__d("FullScreen",["event-extensions","Arbiter","CSS","UserAgent","copyProperties","throttle"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('UserAgent'),j=b('copyProperties'),k=b('throttle'),l=j(new g(),{listenForEvent:function(m){var n=k(this.onChange,0,this);Event.listen(m,{webkitfullscreenchange:n,mozfullscreenchange:n,fullscreenchange:n});Event.listen(document,{webkitfullscreenchange:n,mozfullscreenchange:n,fullscreenchange:n});},enableFullScreen:function(m){this.listenForEvent(m);if(m.webkitRequestFullScreen){if(i.chrome()){m.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);}else m.webkitRequestFullScreen();}else if(m.mozRequestFullScreen){m.mozRequestFullScreen();}else if(m.requestFullScreen){m.requestFullScreen();}else return false;return true;},disableFullScreen:function(){if(document.webkitCancelFullScreen){document.webkitCancelFullScreen();}else if(document.mozCancelFullScreen){document.mozCancelFullScreen();}else if(document.cancelFullScreen){document.cancelFullScreen();}else if(document.exitFullScreen){document.exitFullScreen();}else return false;return true;},isFullScreen:function(){return (document.webkitIsFullScreen||document.fullScreen||document.mozFullScreen);},toggleFullScreen:function(m){if(this.isFullScreen()){this.disableFullScreen();return false;}else return this.enableFullScreen(m);return false;},onChange:function(){var m=this.isFullScreen();h.conditionClass(document.body,'fullScreen',m);this.inform('changed');},isSupported:function(){return (document.webkitCancelFullScreen&&i.chrome())||document.mozCancelFullScreen||document.cancelFullScreen||document.exitFullScreen;}});e.exports=l;});
__d("ImageUtils",["UserAgent"],function(a,b,c,d,e,f){var g=b('UserAgent'),h={hasLoaded:function(i){if(i.naturalWidth!==undefined){return i.complete&&i.width!==0;}else if(i.height==20&&i.width==20&&i.complete){return false;}else if(i.complete===undefined&&g.safari()<500){var j=new Image();j.src=i.src;return j.complete;}return i.complete;}};e.exports=h;});
__d("flattenArray",[],function(a,b,c,d,e,f){function g(h){var i=[];while(h.length){var j=h.pop();if(Array.isArray(j)){Array.prototype.push.apply(h,j);}else i.push(j);}return i.reverse();}e.exports=g;});
__d("JSXDOM",["DOM","flattenArray"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('flattenArray'),i=['a','br','button','checkbox','dd','div','dl','dt','form','h1','h2','h3','h4','h5','h6','hr','i','iframe','img','input','label','li','option','p','pre','select','span','strong','table','td','textarea','th','tr','ul'],j={};i.forEach(function(k){var l=function(m){var n;if(m.children){n=Array.isArray(m.children)?h(m.children):h([m.children]);delete m.children;}return g.create(k,m,n);};j[k]=l;});e.exports=j;});
__d("ScrollableArea",["array-extensions","event-extensions","throttle","Animation","ArbiterMixin","CSS","DataStore","DOM","Parent","Run","SimpleDrag","Style","UserAgent","Vector","copyProperties"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('throttle'),h=b('Animation'),i=b('ArbiterMixin'),j=b('CSS'),k=b('DataStore'),l=b('DOM'),m=b('Parent'),n=b('Run'),o=b('SimpleDrag'),p=b('Style'),q=b('UserAgent'),r=b('Vector'),s=b('copyProperties');function t(u,v){if(!u)return;v=v||{};this._elem=u;this._wrap=l.find(u,'div.uiScrollableAreaWrap');this._body=l.find(this._wrap,'div.uiScrollableAreaBody');this._content=l.find(this._body,'div.uiScrollableAreaContent');this._track=l.find(u,'div.uiScrollableAreaTrack');this._gripper=l.find(this._track,'div.uiScrollableAreaGripper');this._options=v;this._throttledComputeHeights=g(this._computeHeights,250,this);this.throttledAdjustGripper=g(this.adjustGripper,250,this);this._throttledShowGripperAndShadows=g(this._showGripperAndShadows,250,this);this.adjustGripper.bind(this).defer();this._listeners=[Event.listen(u,'mousemove',this._handleMousemove.bind(this)),Event.listen(this._wrap,'scroll',this._handleScroll.bind(this)),Event.listen(this._track,'click',this._handleClickOnTrack.bind(this))];if(v.fade!==false)this._listeners.push(Event.listen(u,'mouseenter',this.showScrollbar.shield(this)),Event.listen(u,'mouseout',this.hideScrollbar.shield(this)));if(q.safari()||q.chrome()){this._listeners.push(Event.listen(u,'mousedown',function(){var w=Event.listen(window,'mouseup',function(){if(u.scrollLeft)u.scrollLeft=0;w.remove();});}));}else if(q.firefox())this._wrap.addEventListener('DOMMouseScroll',function(event){event.axis===event.HORIZONTAL_AXIS&&event.preventDefault();},false);this.initDrag();k.set(this._elem,'ScrollableArea',this);if(!v.persistent)n.onLeave(this.destroy.bind(this));}s(t,{renderDOM:function(){var u=l.create('div',{className:'uiScrollableAreaContent'}),v=l.create('div',{className:'uiScrollableAreaBody'},u),w=l.create('div',{className:'uiScrollableAreaWrap'},v),x=l.create('div',{className:'uiScrollableArea native'},w);return {root:x,wrap:w,body:v,content:u};},fromNative:function(u,v){if(!j.hasClass(u,'uiScrollableArea')||!j.hasClass(u,'native'))return;v=v||{};j.removeClass(u,'native');var w=l.create('div',{className:'uiScrollableAreaTrack'},l.create('div',{className:'uiScrollableAreaGripper'}));if(v.fade!==false){j.addClass(u,'fade');j.addClass(w,'invisible_elem');}else j.addClass(u,'nofade');l.appendContent(u,w);var x=new t(u,v);x.resize();return x;},getInstance:function(u){var v=m.byClass(u,'uiScrollableArea');return v?k.get(v,'ScrollableArea'):null;},poke:function(u){var v=t.getInstance(u);v&&v.poke();}});s(t.prototype,i,{initDrag:function(){var u=new o(this._gripper);u.subscribe('start',function(v,event){if(!((event.which&&event.which===1)||(event.button&&event.button===1)))return;var w=r.getEventPosition(event).y,x=this._gripper.offsetTop;j.addClass(this._track,'uiScrollableAreaDragging');var y=u.subscribe('update',function(aa,event){var ba=r.getEventPosition(event).y-w;this._throttledComputeHeights();var ca=this._bodyHeight-this._wrap.offsetHeight,da=x+ba,ea=this._trackHeight-this._gripperHeight;da=Math.max(Math.min(da,ea),0);var fa=da/ea*ca;this._wrap.scrollTop=fa;}.bind(this)),z=u.subscribe('end',function(){u.unsubscribe(y);u.unsubscribe(z);j.removeClass(this._track,'uiScrollableAreaDragging');}.bind(this));}.bind(this));},adjustGripper:function(){if(this._needsGripper()){p.set(this._gripper,'height',this._gripperHeight+'px');this._slideGripper();}this._throttledShowGripperAndShadows();return this;},_computeHeights:function(){this._containerHeight=this._elem.clientHeight;this._bodyHeight=this._content.offsetHeight;this._trackHeight=this._track.offsetHeight;this._gripperHeight=this._containerHeight/this._bodyHeight*this._trackHeight;},_needsGripper:function(){this._throttledComputeHeights();return this._gripperHeight<this._trackHeight;},_slideGripper:function(){var u=this._wrap.scrollTop/this._bodyHeight*this._trackHeight;p.set(this._gripper,'top',u+'px');},_showGripperAndShadows:function(){j.conditionShow(this._gripper,this._needsGripper());j.conditionClass(this._elem,'contentBefore',this._wrap.scrollTop>0);j.conditionClass(this._elem,'contentAfter',!this.isScrolledToBottom());},destroy:function(){this._listeners.forEach(function(u){u.remove();});this._listeners.length=0;},_handleClickOnTrack:function(event){if(!this.lastMousePosition)return;var u=this._gripper.getBoundingClientRect();if(this.lastMousePosition.y<u.top){this.setScrollTop(this.getScrollTop()-this._elem.clientHeight);}else if(this.lastMousePosition.y>u.bottom)this.setScrollTop(this.getScrollTop()+this._elem.clientHeight);},_handleMousemove:function(event){var u=r.getEventPosition(event);if(this._options.fade!==false){var v=r.getElementPosition(this._track).x,w=r.getElementDimensions(this._track).x;if(Math.abs(v+w/2-u.x)<25){this.showScrollbar(false);}else this.hideScrollbar();}this.lastMousePosition=u.convertTo('viewport');},_handleScroll:function(event){if(this._needsGripper())this._slideGripper();this.throttledAdjustGripper();if(this._options.fade!==false)this.showScrollbar();this.inform('scroll');},hideScrollbar:function(u){if(!this._scrollbarVisible)return this;this._scrollbarVisible=false;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null;}if(u){p.set(this._track,'opacity',0);j.addClass.curry(this._track,'invisible_elem');}else this._hideTimeout=function(){if(this._hideAnimation){this._hideAnimation.stop();this._hideAnimation=null;}this._hideAnimation=(new h(this._track)).from('opacity',1).to('opacity',0).duration(250).ondone(j.addClass.curry(this._track,'invisible_elem')).go();}.bind(this).defer(750);return this;},resize:function(){var u=r.getElementDimensions(this._elem).x;if(!this._options.fade)u-=10;u=Math.max(0,u);p.set(this._body,'width',u+'px');return this;},showScrollbar:function(u){this.throttledAdjustGripper();if(this._scrollbarVisible)return this;this._scrollbarVisible=true;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null;}if(this._hideAnimation){this._hideAnimation.stop();this._hideAnimation=null;}p.set(this._track,'opacity',1);j.removeClass(this._track,'invisible_elem');if(u!==false)this.hideScrollbar();return this;},isScrolledToBottom:function(){return this._wrap.scrollTop>=this._bodyHeight-this._containerHeight;},scrollToBottom:function(u){this.setScrollTop(this._wrap.scrollHeight,u);},scrollToTop:function(u){this.setScrollTop(0,u);},scrollIntoView:function(u,v){var w=this._wrap.clientHeight,x=u.offsetHeight,y=this._wrap.scrollTop,z=y+w,aa=u.offsetTop,ba=aa+x;if(aa<y||w<x){this.setScrollTop(aa,v);}else if(ba>z)this.setScrollTop(y+(ba-z),v);},poke:function(){var u=this._wrap.scrollTop;this._wrap.scrollTop+=1;this._wrap.scrollTop-=1;this._wrap.scrollTop=u;return this.showScrollbar(false);},getScrollTop:function(){return this._wrap.scrollTop;},getScrollHeight:function(){return this._wrap.scrollHeight;},setScrollTop:function(u,v){if(v!==false){if(this._scrollTopAnimation)this._scrollTopAnimation.stop();this._scrollTopAnimation=(new h(this._wrap)).to('scrollTop',u).ease(h.ease.end).duration(250).go();}else this._wrap.scrollTop=u;}});e.exports=t;});
__d("ScrollableTypeaheadBehavior",["DOM","CSS","Style","Parent","cx","ScrollableArea","copyProperties"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('CSS'),i=b('Style'),j=b('Parent'),k=b('cx'),l=b('ScrollableArea'),m=b('copyProperties');function n(o){this._typeahead=o;}m(n.prototype,{_subscriptions:null,_scrollableElems:null,_scrollableArea:null,_showScrollbar:null,enable:function(){this._scrollableElems=(l.renderDOM());h.addClass(this._scrollableElems.root,"_ml");g.appendContent(this._typeahead.getView().element,this._scrollableElems.root);this._typeahead.getView().content=this._scrollableElems.content;this._scrollableArea=(l.fromNative(this._scrollableElems.root,{fade:false}));this._subscriptions=[this._typeahead.getView().subscribe('reset',this._reset.bind(this)),this._typeahead.getView().subscribe('render',this._render.bind(this)),this._typeahead.getView().subscribe('beforeRender',this._beforeRender.bind(this)),this._typeahead.getView().subscribe('next',this._scrollHelper.bind(this)),this._typeahead.getView().subscribe('prev',this._scrollHelper.bind(this))];i.set(this._scrollableElems.wrap,'height','0px');h.removeClass(this._scrollableElems.root,"_mm");},disable:function(){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;},_reset:function(){i.set(this._scrollableElems.wrap,'height','0px');h.removeClass(this._scrollableElems.root,"_mm");this._scrollableArea.scrollToTop();},_render:function(){this._scrollableArea.poke();this._showScrollbar?this._scrollableArea.showScrollbar(false):this._scrollableArea.hideScrollbar(true);h.addClass(this._scrollableElems.root,"_mm");},_beforeRender:function(o,p){var q=5;if(this._typeahead.getView().maxResults<10)q=3;i.set(this._scrollableElems.body,'width',this._scrollableElems.wrap.offsetWidth+'px');if(p.results.length<q){i.set(this._scrollableElems.wrap,'height',(38*p.results.length+4)+'px');this._showScrollbar=false;}else{this._scrollableArea.showScrollbar(false);i.set(this._scrollableElems.wrap,'height',(38*q+4)+'px');this._showScrollbar=true;}},_scrollHelper:function(o,p){if(!j.byClass(p,'uiScrollableArea'))return;this._typeahead.getView().ignoreMouseover=true;var q=j.byClass(p,'uiScrollableAreaWrap'),r=p.offsetTop-q.offsetTop;if(r<q.scrollTop){q.scrollTop=r;return;}var s=r+p.offsetHeight;if(s>q.scrollTop+q.offsetHeight)q.scrollTop=s-q.offsetHeight;}});e.exports=n;});
__d("legacy:LegacyScrollableTypeaheadBehavior",["ScrollableTypeaheadBehavior"],function(a,b,c,d){var e=b('ScrollableTypeaheadBehavior');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.scrollArea=function(f){f.enableBehavior(e);};},3);
__d("MultiBootstrapDataSource",["Class","DataSource"],function(a,b,c,d,e,f){var g=b('Class'),h=b('DataSource');function i(j){this._bootstrapEndpoints=j.bootstrapEndpoints;this.parent.construct(this,j);}g.extend(i,h);i.prototype.bootstrapWithoutToken=function(){for(var j=0;j<this._bootstrapEndpoints.length;j++)this.fetch(this._bootstrapEndpoints[j].endpoint,this._bootstrapEndpoints[j].data||{},{bootstrap:true});};e.exports=i;});
__d("OnVisible",["event-extensions","Arbiter","DOM","Run","Vector","copyProperties","throttle"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('DOM'),i=b('Run'),j=b('Vector'),k=b('copyProperties'),l=b('throttle');function m(n,o,p,q){this.element=n;this.handler=o;this.strict=p;this.buffer=q||300;this.scrollHandler=null;this.reset();i.onLeave(this.remove.bind(this));}k(m.prototype,{reset:function(){if(this.scrollListener)return;this.removed=false;this.scrollHandler=l(function(n){var o=j.getElementPosition(this.element);if(!o||this.removed){this.remove();return;}this.targetY=o.y;var p=j.getScrollPosition().y,q=j.getViewportDimensions().y,r=p+q+this.buffer;if(r>this.targetY){var s=!this.strict||(p-this.buffer<(this.targetY+j.getElementDimensions(this.element).y));if(s){this.remove();this.handler(!n);}}return true;},100,this);(function(){this.scrollListener=Event.listen(window,'scroll',this.scrollHandler);this.resizeListener=Event.listen(window,'resize',this.scrollHandler);this.domScrollListener=g.subscribe('dom-scroll',this.scrollHandler);this.scrollHandler.defer();}).bind(this).defer();},remove:function(){this.removed=true;if(this.scrollListener){this.scrollListener.remove();this.resizeListener.remove();this.domScrollListener.unsubscribe();this.scrollListener=this.resizeListener=this.domScrollListener=null;}},setBuffer:function(n){this.buffer=n;this.scrollHandler&&this.scrollHandler.defer();}});e.exports=m;});
__d("Poller",["AsyncRequest","Cookie","copyProperties","Env"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Cookie'),i=b('copyProperties'),j=b('Env');function k(l,m,n){this._clearOnQuicklingEvent=!n;this._requestCallback=m;this.setTimePeriod(l);}k.MIN_TIME_PERIOD=2000;i(k.prototype,{stop:function(){clearTimeout(this._token);this._token=null;this._cancelRequest();},scheduleRequest:function(){this.stop();if(this._timePeriod)this._token=this._makeRequest.bind(this).defer(this._timePeriod,this._clearOnQuicklingEvent);},requestNow:function(){this.stop();this._makeRequest();},_timePeriod:null,setTimePeriod:function(l){l=l||null;if(l&&(isNaN(l)||l<k.MIN_TIME_PERIOD))return;if(l&&this._timePeriod==null)this._token=this._makeRequest.bind(this).defer(l,this._clearOnQuicklingEvent);this._timePeriod=l;},_makeRequest:function(){this._cancelRequest();if(!this._isLoadUser())return;var l=new g(),m=true;l.setInitialHandler(function(){return m;});this._cancelRequest=function(){m=false;};l.setFinallyHandler(this.scheduleRequest.bind(this));l.setInitialHandler=bagofholding;l.setFinallyHandler=bagofholding;this._requestCallback(l);if(m)l.send();},_isLoadUser:function(){return j.user==h.get('c_user');},_cancelRequest:bagofholding,getTimePeriod:function(){return this._timePeriod;}});e.exports=k;});
__d("Popover",["event-extensions","Arbiter","ArbiterMixin","Class","ContextualLayer","ContextualLayerHideOnScroll","CSS","DataStore","DOM","Input","KeyStatus","LayerHideOnEscape","Toggler","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('Class'),j=b('ContextualLayer'),k=b('ContextualLayerHideOnScroll'),l=b('CSS'),m=b('DataStore'),n=b('DOM'),o=b('Input'),p=b('KeyStatus'),q=b('LayerHideOnEscape'),r=b('Toggler'),s=b('copyProperties');r.subscribe(['show','hide'],function(u,v){var w=m.get(v.getActive(),'Popover');if(w)if(u==='show'){w.showLayer();}else w.hideLayer();});function t(u,v,w,x){this._root=u;this._triggerElem=v;this._behaviors=w;this._config=x;if(!(v.nodeName==='A'&&v.rel==='toggle'))Event.listen(v,'click',function(){r.bootstrap(v);});m.set(u,'Popover',this);}s(t.prototype,h,{_layer:null,_closeListener:null,ensureInit:function(){if(!this._layer)this._init();},showLayer:function(){this.ensureInit();this._layer.show();r.show(this._root);l.addClass(this._root,'selected');this.inform('show');this._triggerElem.setAttribute('aria-expanded','true');},hideLayer:function(){this._layer.hide();this._triggerElem.setAttribute('aria-expanded','false');},isShown:function(){return this._layer.isShown();},setLayerContent:function(u){this.ensureInit();this._layer.setContent(u);},_init:function(){var u=new j({context:this._triggerElem,position:'below'},n.create('div'));u.enableBehaviors([k,q]);r.createInstance(u.getRoot()).setSticky(false);u.subscribe('hide',this._onLayerHide.bind(this));this._behaviors&&u.enableBehaviors(this._behaviors);this._layer=u;if(this._config.alignh)this._layer.setAlignment(this._config.alignh);if(this._config.layer_content)this._layer.setContent(this._config.layer_content);this.inform('init',null,g.BEHAVIOR_PERSISTENT);},_onLayerHide:function(){r.hide(this._root);l.removeClass(this._root,'selected');this.inform('hide');if(p.isKeyDown())o.focus(this._triggerElem);}});e.exports=t;});
__d("PopoverMenuInterface",["Arbiter","ArbiterMixin","Class","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('Class'),j=b('copyProperties');function k(){}j(k.prototype,h,{getRoot:bagofholding,onShow:bagofholding,onHide:bagofholding,focusAnItem:bagof(false),blur:bagofholding,handleKeydown:bagof(false),done:function(){this.inform('done');}});e.exports=k;});
__d("PopoverAsyncMenuLoading",["Class","copyProperties","DOM","PopoverMenuInterface"],function(a,b,c,d,e,f){var g=b('Class'),h=b('copyProperties'),i=b('DOM'),j=b('PopoverMenuInterface');function k(l){this.parent.construct(this);this._className=l||'';}g.extend(k,j);h(k.prototype,{_root:null,getRoot:function(){if(!this._root)this._root=i.create('div',{className:this._className},i.create('div',{className:'uiMenuXBorder'},i.create('div',{className:'uiMenuX uiMenuXLoading'},i.create('span',{className:'spinner'}))));return this._root;}});e.exports=k;});
__d("PopoverMenu",["event-extensions","Arbiter","ArbiterMixin","ARIA","BehaviorsMixin","Class","Input","Keys","KeyStatus","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('ARIA'),j=b('BehaviorsMixin'),k=b('Class'),l=b('Input'),m=b('Keys'),n=b('KeyStatus'),o=b('copyProperties');function p(q,r,s,t){this._popover=q;this._triggerElem=r;this._initialMenu=s;q.subscribe('init',this._onLayerInit.bind(this));q.subscribe('show',this._onPopoverShow.bind(this));q.subscribe('hide',this._onPopoverHide.bind(this));t&&this.enableBehaviors(t);}o(p.prototype,h,j);o(p.prototype,{_keydownListener:null,_popoverShown:false,setMenu:function(q){this._menu=q;var r=q.getRoot();this._popover.setLayerContent(r);q.subscribe('done',this._onMenuDone.bind(this));if(this._popoverShown)this._menu.onShow();i.owns(this._triggerElem,r);this.inform('setMenu',null,g.BEHAVIOR_PERSISTENT);},getPopover:function(){return this._popover;},getTriggerElem:function(){return this._triggerElem;},getMenu:function(){return this._menu;},_onLayerInit:function(){this.setMenu(this._initialMenu);},_onPopoverShow:function(){if(this._menu){this._menu.onShow();if(n.isKeyDown())this._menu.focusAnItem();this._keydownListener=Event.listen(document.documentElement,'keydown',this._handleKeydown.bind(this));}this._popoverShown=true;},_onPopoverHide:function(){if(this._menu)this._menu.onHide();if(this._keydownListener){this._keydownListener.remove();this._keydownListener=null;}this._popoverShown=false;},_handleKeydown:function(q){if(q.getModifiers().any)return;var r=Event.getKeyCode(q);switch(r){case m.RETURN:return;case m.UP:case m.DOWN:this._menu.handleKeydown(r);break;default:if(this._menu.handleKeydown(r)===false){this._menu.blur();this._menu.handleKeydown(r);}break;}q.prevent();},_onMenuDone:function(q){this._popover.hideLayer.bind(this._popover).defer();if(n.isKeyDown())l.focus(this._triggerElem);}});e.exports=p;});
__d("PopoverAsyncMenu",["event-extensions","AsyncRequest","Class","CSS","DOM","PopoverAsyncMenuLoading","PopoverMenu","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('Class'),i=b('CSS'),j=b('DOM'),k=b('PopoverAsyncMenuLoading'),l=b('PopoverMenu'),m=b('copyProperties'),n={},o=0;function p(q,r,s,t,u){this._endpoint=t;this._loadingMenu=s;this._instanceId=o++;n[this._instanceId]=this;this._mouseoverListener=Event.listen(r,'mouseover',this._fetchMenu.bind(this));this.parent.construct(this,q,r,null,u);}p.setMenu=function(q,r){n[q].setMenu(r);};h.extend(p,l);m(p.prototype,{_fetched:false,_mouseoverListener:null,_onLayerInit:function(){if(!this._menu)this.setMenu(this._loadingMenu);this._fetchMenu();},_fetchMenu:function(){if(this._fetched)return;new g().setURI(this._endpoint).setData({pmid:this._instanceId}).send();this._fetched=true;if(this._mouseoverListener){this._mouseoverListener.remove();this._mouseoverListener=null;}}});e.exports=p;});
__d("PopoverMenuOverlappingBorder",["function-extensions","CSS","DOM","Style","copyProperties"],function(a,b,c,d,e,f){b('function-extensions');var g=b('CSS'),h=b('DOM'),i=b('Style'),j=b('copyProperties');function k(l){this._popoverMenu=l;this._popover=l.getPopover();this._triggerElem=l.getTriggerElem();}j(k.prototype,{_shortBorder:null,_setMenuSubscription:null,_showSubscription:null,_menuSubscription:null,enable:function(){this._setMenuSubscription=this._popoverMenu.subscribe('setMenu',this._onSetMenu.bind(this));},disable:function(){this._popoverMenu.unsubscribe(this._setMenuSubscription);this._setMenuSubscription=null;this._removeBorderSubscriptions();this._removeShortBorder();},_onSetMenu:function(){this._removeBorderSubscriptions();this._menu=this._popoverMenu.getMenu();this._renderShortBorder(this._menu.getRoot());this._showSubscription=this._popover.subscribe('show',this._updateBorder.bind(this));this._menuSubscription=this._menu.subscribe(['change','resize'],Function.prototype.defer.shield(this._updateBorder.bind(this)));this._updateBorder();},_updateBorder:function(){var l=this._menu.getRoot(),m=this._triggerElem.offsetWidth;i.set(l,'min-width',m+'px');var n=Math.max(l.offsetWidth-m,0);i.set(this._shortBorder,'width',n+'px');},_renderShortBorder:function(l){this._shortBorder=h.create('div',{className:'uiMenuXShortBorder'});h.appendContent(l,this._shortBorder);g.addClass(l,'uiMenuXWithShortBorder');},_removeShortBorder:function(){if(this._shortBorder){h.remove(this._shortBorder);this._shortBorder=null;g.removeClass(this._popoverMenu.getMenu().getRoot(),'uiMenuXShortBorder');}},_removeBorderSubscriptions:function(){if(this._showSubscription){this._popover.unsubscribe(this._showSubscription);this._showSubscription=null;}if(this._menuSubscription){this._menu.unsubscribe(this._menuSubscription);this._menuSubscription=null;}}});e.exports=k;});
__d("PrivacyModel",["PrivacyConst","copyProperties"],function(a,b,c,d,e,f){var g=b('PrivacyConst'),h=b('copyProperties');function i(){this.value=g.BaseValue.ALL_FRIENDS;this.friends=g.FriendsValue.NO_FRIENDS;this.networks=[];this.objects=[];this.lists=[];this.lists_x=[];this.list_anon=0;this.ids_anon=[];this.list_x_anon=0;this.ids_x_anon=[];this.tdata={};return this;}h(i.prototype,{init:function(j,k,l,m,n,o,p,q,r,s,t){this.value=j;this.friends=k;this.networks=l.slice();this.objects=m.slice();this.lists=n.slice();this.lists_x=o.slice();this.list_anon=p;this.ids_anon=q.slice();this.list_x_anon=r;this.ids_x_anon=s.slice();t=t||{};h(this.tdata,t);},clone:function(){var j=new i();j.init(this.value,this.friends,this.networks,this.objects,this.lists,this.lists_x,this.list_anon,this.ids_anon,this.list_x_anon,this.ids_x_anon,this.tdata);return j;},getData:function(){var j=['value','friends','networks','objects','lists','lists_x','list_anon','ids_anon','list_x_anon','ids_x_anon'],k={};for(var l=0;l<j.length;++l){var m=j[l];k[m]=this[m];}return k;}});e.exports=i;});
__d("highlight",["Animation","Style"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Style');function i(j,k,l){new g(j).from('background','#fff9d7').to('background',l||'#fff').ease(g.ease.both).duration(2000).ondone(function(){h.set(j,'background','');k&&k();}).go();}e.exports=i;});
__d("ScrollHighlight",["DOMScroll","highlight"],function(a,b,c,d,e,f){var g=b('DOMScroll'),h=b('highlight'),i={actOn:function(j,k){g.scrollTo(j);h(j,null,k);}};e.exports=i;});
__d("InputSelection",["DOM","Input"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('Input'),i={get:function(j){if(!document.selection)return {start:j.selectionStart,end:j.selectionEnd};var k=document.selection.createRange();if(k.parentElement()!==j)return {start:0,end:0};var l=j.value.length;if(g.isNodeOfType(j,'input')){return {start:-k.moveStart('character',-l),end:-k.moveEnd('character',-l)};}else{var m=k.duplicate();m.moveToElementText(j);m.setEndPoint('StartToEnd',k);var n=l-m.text.length;m.setEndPoint('StartToStart',k);return {start:l-m.text.length,end:n};}},set:function(j,k,l){if(typeof l=='undefined')l=k;if(document.selection){if(j.tagName=='TEXTAREA'){var m=(j.value.slice(0,k).match(/\r/g)||[]).length,n=(j.value.slice(k,l).match(/\r/g)||[]).length;k-=m;l-=m+n;}var o=j.createTextRange();o.collapse(true);o.moveStart('character',k);o.moveEnd('character',l-k);o.select();}else{j.selectionStart=k;j.selectionEnd=Math.min(l,j.value.length);h.focus(j);}}};e.exports=i;});
__d("ControlledReferer",["event-extensions","URI"],function(a,b,c,d,e,f){b('event-extensions');var g=b('URI'),h={useFacebookReferer:function(i,j,k){var l=false;function m(){if(l)return;l=true;i.contentWindow.document.body.style.margin=0;j();}var n;if(document.domain!=='facebook.com'){n='/intern/common/referer_frame.php';}else if(g().isSecure()){n='https://s-static.ak.facebook.com/common/referer_frame.php';}else n='http://static.ak.facebook.com/common/referer_frame.php';if(k)n+='?fb_source='+k;Event.listen(i,'load',m);i.src=n;},useFacebookRefererHtml:function(i,j,k){h.useFacebookReferer(i,function(){i.contentWindow.document.body.innerHTML=j;},k);}};e.exports=h;});
__d("swfobject",["AsyncRequest","Bootloader","ControlledReferer","copyProperties","CSS","DOM","function-extensions","ge","htmlSpecialChars"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Bootloader'),i=b('ControlledReferer'),j=b('copyProperties'),k=b('CSS'),l=b('DOM');b('function-extensions');var m=b('ge'),n=b('htmlSpecialChars');if(typeof o=="undefined")var o={};if(typeof o.util=="undefined")o.util={};if(typeof o.SWFObjectUtil=="undefined")o.SWFObjectUtil={};o.SWFObject=function(u,v,w,x,y,z,aa,ba,ca,da){if(!document.getElementById)return;this.DETECT_KEY=da?da:'detectflash';this.skipDetect=o.util.getRequestParameter(this.DETECT_KEY);this.params={};this.variables={};this.attributes=[];this.fallback_html='';this.fallback_js_fcn=function(){};if(u)this.setAttribute('swf',u);if(v)this.setAttribute('id',v);if(w)this.setAttribute('width',w);if(x)this.setAttribute('height',x);this.installedVer=o.SWFObjectUtil.getPlayerVersion();if(y){if(!(y instanceof Array))y=[y];var ea;y.forEach(function(ha){ea=new o.PlayerVersion(ha.toString().split('.'));if(ea.major==this.installedVer.major){this.setAttribute('version',ea);return;}else if(!this.getAttribute('version')||ea.major<this.getAttribute('version').major)this.setAttribute('version',ea);}.bind(this));}if(!window.opera&&document.all&&this.installedVer.major>7)if(!o.unloadSet){o.SWFObjectUtil.prepUnload=function(){var ha=function(){},ia=function(){};window.attachEvent("onunload",o.SWFObjectUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",o.SWFObjectUtil.prepUnload);o.unloadSet=true;}if(z)this.addParam('bgcolor',z);var fa=aa?aa:'high';this.addParam('quality',fa);this.setAttribute('useExpressInstall',false);this.setAttribute('doExpressInstall',false);var ga=(ba)?ba:window.location;this.setAttribute('xiRedirectUrl',ga);this.setAttribute('redirectUrl','');if(ca)this.setAttribute('redirectUrl',ca);this.setAttribute('useIframe',false);};o.SWFObject.ieWorkaroundApplied=false;o.SWFObject.ensureIEWorkaroundAttached=function(){if(!o.SWFObject.ieWorkaroundApplied&&document.attachEvent){o.SWFObject.ieWorkaroundApplied=true;document.attachEvent('onpropertychange',o.SWFObject.onDocumentPropertyChange);}};o.SWFObject.onDocumentPropertyChange=function(event){if(event.propertyName=="title"){var u=document.title;if(u!=null&&u.indexOf('#!')!=-1){u=u.substring(0,u.indexOf('#!'));document.title=u;}}};j(o.SWFObject.prototype,{useExpressInstall:function(u){this.xiSWFPath=!u?"/swf/expressinstall.swf":u;this.setAttribute('useExpressInstall',true);},setAttribute:function(u,v){this.attributes[u]=v;},getAttribute:function(u){return this.attributes[u]||"";},addParam:function(u,v){this.params[u]=v;},getParams:function(){return this.params;},addVariable:function(u,v){this.variables[u]=v;},getVariable:function(u){return this.variables[u]||"";},getVariables:function(){return this.variables;},getVariablePairs:function(){var u=[],v,w=this.getVariables();for(v in w)u[u.length]=v+"="+w[v];return u.join('&');},getSWFHTML:function(){var u,v,w;if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute('swf',this.xiSWFPath);}v={type:'application/x-shockwave-flash',src:this.getAttribute('swf'),width:this.getAttribute('width'),height:this.getAttribute('height'),style:this.getAttribute('style')||'display: block;',id:this.getAttribute('id'),name:this.getAttribute('id')};var x=this.getParams();for(var y in x)v[y]=x[y];w=this.getVariablePairs();if(w)v.flashvars=w;u=t('embed',v,null);}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute('swf',this.xiSWFPath);}v={id:this.getAttribute('id'),classid:'clsid:D27CDB6E-AE6D-11cf-96B8-444553540000',width:this.getAttribute('width'),height:this.getAttribute('height'),style:this.getAttribute('style')||'display: block;'};var z=t('param',{name:'movie',value:this.getAttribute('swf')},null),x=this.getParams();for(var y in x)z+=t('param',{name:y,value:x[y]},null);w=this.getVariablePairs();if(w)z+=t('param',{name:'flashvars',value:w},null);u=t('object',v,z);}return u;},write:function(u){if(this.getAttribute('useExpressInstall')){var v=new o.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(v)&&!this.installedVer.versionIsValid(this.getAttribute('version'))){this.setAttribute('doExpressInstall',true);this.addVariable("MMredirectURL",escape(this.getAttribute('xiRedirectUrl')));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}var w=(typeof u=='string')?document.getElementById(u):u;if(!w)return false;k.addClass(w,'swfObject');w.setAttribute('data-swfid',this.getAttribute('id'));if(this.skipDetect||this.getAttribute('doExpressInstall')||this.installedVer.versionIsValid(this.getAttribute('version'))){if(!this.getAttribute('useIframe')){o.SWFObject.ensureIEWorkaroundAttached();w.innerHTML=this.getSWFHTML();}else this._createIframe(w);return true;}else{if(this.getAttribute('redirectUrl')!="")document.location.replace(this.getAttribute('redirectUrl'));var x=this.getAttribute('version').major+'.'+this.getAttribute('version').minor+'.'+this.getAttribute('version').release+'.'+this.getAttribute('version').build,y=this.installedVer.major+'.'+this.installedVer.minor+'.'+this.installedVer.release+'.'+this.installedVer.build;this.fallback_js_fcn(y,x);w.innerHTML=this.fallback_html;}return false;},_createIframe:function(u){var v=l.create('iframe',{width:this.getAttribute('width'),height:this.getAttribute('height'),frameBorder:0});l.empty(u);u.appendChild(v);i.useFacebookRefererHtml.bind(null,v,this.getSWFHTML(),this.getAttribute('iframeSource')).defer();}});o.SWFObjectUtil.getPlayerVersion=function(){var u=new o.PlayerVersion([0,0,0,0]),v;if(navigator.plugins&&navigator.mimeTypes.length){for(var w=0;w<navigator.plugins.length;w++)try{var y=navigator.plugins[w];if(y.name=='Shockwave Flash'){v=new o.PlayerVersion(y.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+(r|d)|\s+b[0-9]+)/,".").split("."));if(typeof u=='undefined'||v.major>u.major||(v.major==u.major&&(v.minor>u.minor||(v.minor==u.minor&&(v.release>u.release||(v.release==u.release&&v.build>u.build))))))u=v;}}catch(x){}}else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var z=1,aa=3;while(z)try{aa++;z=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+aa);u=new o.PlayerVersion([aa,0,0]);}catch(ba){z=null;}}else{try{var z=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(ca){try{var z=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");u=new o.PlayerVersion([6,0,21]);z.AllowScriptAccess="always";}catch(da){if(u.major==6)return u;}try{z=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(ea){}}if(z!=null)u=new o.PlayerVersion(z.GetVariable("$version").split(" ")[1].split(","));}return u;};o.PlayerVersion=function(u){this.major=u[0]!=null?parseInt(u[0],10):0;this.minor=u[1]!=null?parseInt(u[1],10):0;this.release=u[2]!=null?parseInt(u[2],10):0;this.build=u[3]!=null?parseInt(u[3],10):0;};o.PlayerVersion.prototype.versionIsValid=function(u){if(this.major<u.major)return false;if(this.major>u.major)return true;if(this.minor<u.minor)return false;if(this.minor>u.minor)return true;if(this.release<u.release)return false;if(this.release>u.release)return true;if(this.build<u.build)return false;return true;};o.util={getRequestParameter:function(u){var v=document.location.search||document.location.hash;if(u==null)return v;if(v){var w=v.substring(1).split("&");for(var x=0;x<w.length;x++)if(w[x].substring(0,w[x].indexOf("="))==u)return w[x].substring((w[x].indexOf("=")+1));}return "";}};o.SWFObjectUtil.cleanupSWFs=function(){var u=document.getElementsByTagName("OBJECT");for(var v=u.length-1;v>=0;v--){u[v].style.display='none';for(var w in u[v])if(typeof u[v][w]=='function')u[v][w]=function(){};}};if(!document.getElementById&&document.all)document.getElementById=function(u){return document.all[u];};var p=o.util.getRequestParameter,q=o.SWFObject,r=o.SWFObject;o.spawn_flash_update_dialog=function(){new g().setURI('/ajax/flash_update_dialog.php').setMethod('GET').setReadOnly(true).send();};function s(u,v){var w=m(u),x=o.SWFObjectUtil.getPlayerVersion(),y;v.forEach(function(ba){ba=new o.PlayerVersion(ba.toString().split('.'));if(ba.major==x.major){y=ba;return;}else if(typeof y=='undefined'||ba.major<y.major)y=ba;}.bind(this));if(w&&x.major>0){var z=x.major+'.'+x.minor+'.'+x.release+'.'+x.build,aa=y.major+'.'+y.minor+'.'+y.release+'.'+y.build;l.setContent(w,l.tx._("Flash {required-version} is required to view this content. Your current version is {current-version}. Please download the latest Flash Player.",{'required-version':aa,'current-version':z}));}}o.showFlashErrorDialog=function(u,v){h.loadModules(['ErrorDialog'],function(w){w.show(u,v);});};function t(u,v,w){var x=/^[A-Za-z0-9\-]+$/;if(!u.match(x))throw new Error('Invalid tag '+u);var y='<'+u;for(var z in v){if(!z.match(x))throw new Error('Invalid attr '+z);y+=' '+z+'="'+n(v[z])+'"';}if(w===null){return y+'/>';}else return y+'>'+w+'</'+u+'>';}e.exports=a.deconcept||o;});
__d("swfobject2",[],function(a,b,c,d,e,f){var g=function(){var h="undefined",i="object",j="Shockwave Flash",k="ShockwaveFlash.ShockwaveFlash",l="application/x-shockwave-flash",m="SWFObjectExprInst",n="onreadystatechange",o=window,p=document,q=navigator,r=false,s=[ka],t=[],u=[],v=[],w,x,y,z,aa=false,ba=false,ca,da,ea=true,fa=function(){var eb=typeof p.getElementById!=h&&typeof p.getElementsByTagName!=h&&typeof p.createElement!=h,fb=q.userAgent.toLowerCase(),gb=q.platform.toLowerCase(),hb=gb?/win/.test(gb):/win/.test(fb),ib=gb?/mac/.test(gb):/mac/.test(fb),jb=/webkit/.test(fb)?parseFloat(fb.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,kb=!+"\v1",lb=[0,0,0],mb=null;if(typeof q.plugins!=h&&typeof q.plugins[j]==i){mb=q.plugins[j].description;if(mb&&!(typeof q.mimeTypes!=h&&q.mimeTypes[l]&&!q.mimeTypes[l].enabledPlugin)){r=true;kb=false;mb=mb.replace(/^.*\s+(\S+\s+\S+$)/,"$1");lb[0]=parseInt(mb.replace(/^(.*)\..*$/,"$1"),10);lb[1]=parseInt(mb.replace(/^.*\.(.*)\s.*$/,"$1"),10);lb[2]=/[a-zA-Z]/.test(mb)?parseInt(mb.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else if(typeof o.ActiveXObject!=h)try{var ob=new ActiveXObject(k);if(ob){mb=ob.GetVariable("$version");if(mb){kb=true;mb=mb.split(" ")[1].split(",");lb=[parseInt(mb[0],10),parseInt(mb[1],10),parseInt(mb[2],10)];}}}catch(nb){}return {w3:eb,pv:lb,wk:jb,ie:kb,win:hb,mac:ib};}(),ga=function(){if(!fa.w3)return;if((typeof p.readyState!=h&&p.readyState=="complete")||(typeof p.readyState==h&&(p.getElementsByTagName("body")[0]||p.body)))ha();if(!aa){if(typeof p.addEventListener!=h)p.addEventListener("DOMContentLoaded",ha,false);if(fa.ie&&fa.win){p.attachEvent(n,function(){if(p.readyState=="complete"){p.detachEvent(n,arguments.callee);ha();}});if(o==top)(function(){if(aa)return;try{p.documentElement.doScroll("left");}catch(eb){setTimeout(arguments.callee,0);return;}ha();})();}if(fa.wk)(function(){if(aa)return;if(!/loaded|complete/.test(p.readyState)){setTimeout(arguments.callee,0);return;}ha();})();ja(ha);}}();function ha(){if(aa)return;try{var fb=p.getElementsByTagName("body")[0].appendChild(xa("span"));fb.parentNode.removeChild(fb);}catch(eb){return;}aa=true;var gb=s.length;for(var hb=0;hb<gb;hb++)s[hb]();}function ia(eb){if(aa){eb();}else s[s.length]=eb;}function ja(eb){if(typeof o.addEventListener!=h){o.addEventListener("load",eb,false);}else if(typeof p.addEventListener!=h){p.addEventListener("load",eb,false);}else if(typeof o.attachEvent!=h){ya(o,"onload",eb);}else if(typeof o.onload=="function"){var fb=o.onload;o.onload=function(){fb();eb();};}else o.onload=eb;}function ka(){if(r){la();}else ma();}function la(){var eb=p.getElementsByTagName("body")[0],fb=xa(i);fb.setAttribute("type",l);var gb=eb.appendChild(fb);if(gb){var hb=0;(function(){if(typeof gb.GetVariable!=h){var ib=gb.GetVariable("$version");if(ib){ib=ib.split(" ")[1].split(",");fa.pv=[parseInt(ib[0],10),parseInt(ib[1],10),parseInt(ib[2],10)];}}else if(hb<10){hb++;setTimeout(arguments.callee,10);return;}eb.removeChild(fb);gb=null;ma();})();}else ma();}function ma(){var eb=t.length;if(eb>0)for(var fb=0;fb<eb;fb++){var gb=t[fb].id,hb=t[fb].callbackFn,ib={success:false,id:gb};if(fa.pv[0]>0){var jb=wa(gb);if(jb)if(za(t[fb].swfVersion)&&!(fa.wk&&fa.wk<312)){bb(gb,true);if(hb){ib.success=true;ib.ref=na(gb);hb(ib);}}else if(t[fb].expressInstall&&oa()){var kb={};kb.data=t[fb].expressInstall;kb.width=jb.getAttribute("width")||"0";kb.height=jb.getAttribute("height")||"0";if(jb.getAttribute("class"))kb.styleclass=jb.getAttribute("class");if(jb.getAttribute("align"))kb.align=jb.getAttribute("align");var lb={},mb=jb.getElementsByTagName("param"),nb=mb.length;for(var ob=0;ob<nb;ob++)if(mb[ob].getAttribute("name").toLowerCase()!="movie")lb[mb[ob].getAttribute("name")]=mb[ob].getAttribute("value");pa(kb,lb,gb,hb);}else{qa(jb);if(hb)hb(ib);}}else{bb(gb,true);if(hb){var pb=na(gb);if(pb&&typeof pb.SetVariable!=h){ib.success=true;ib.ref=pb;}hb(ib);}}}}function na(eb){var fb=null,gb=wa(eb);if(gb&&gb.nodeName=="OBJECT")if(typeof gb.SetVariable!=h){fb=gb;}else{var hb=gb.getElementsByTagName(i)[0];if(hb)fb=hb;}return fb;}function oa(){return !ba&&za("6.0.65")&&(fa.win||fa.mac)&&!(fa.wk&&fa.wk<312);}function pa(eb,fb,gb,hb){ba=true;y=hb||null;z={success:false,id:gb};var ib=wa(gb);if(ib){if(ib.nodeName=="OBJECT"){w=ra(ib);x=null;}else{w=ib;x=gb;}eb.id=m;if(typeof eb.width==h||(!/%$/.test(eb.width)&&parseInt(eb.width,10)<310))eb.width="310";if(typeof eb.height==h||(!/%$/.test(eb.height)&&parseInt(eb.height,10)<137))eb.height="137";p.title=p.title.slice(0,47)+" - Flash Player Installation";var jb=fa.ie&&fa.win?"ActiveX":"PlugIn",kb="MMredirectURL="+o.location.toString().replace(/&/g,"%26")+"&MMplayerType="+jb+"&MMdoctitle="+p.title;if(typeof fb.flashvars!=h){fb.flashvars+="&"+kb;}else fb.flashvars=kb;if(fa.ie&&fa.win&&ib.readyState!=4){var lb=xa("div");gb+="SWFObjectNew";lb.setAttribute("id",gb);ib.parentNode.insertBefore(lb,ib);ib.style.display="none";(function(){if(ib.readyState==4){ib.parentNode.removeChild(ib);}else setTimeout(arguments.callee,10);})();}sa(eb,fb,gb);}}function qa(eb){if(fa.ie&&fa.win&&eb.readyState!=4){var fb=xa("div");eb.parentNode.insertBefore(fb,eb);fb.parentNode.replaceChild(ra(eb),fb);eb.style.display="none";(function(){if(eb.readyState==4){eb.parentNode.removeChild(eb);}else setTimeout(arguments.callee,10);})();}else eb.parentNode.replaceChild(ra(eb),eb);}function ra(eb){var fb=xa("div");if(fa.win&&fa.ie){fb.innerHTML=eb.innerHTML;}else{var gb=eb.getElementsByTagName(i)[0];if(gb){var hb=gb.childNodes;if(hb){var ib=hb.length;for(var jb=0;jb<ib;jb++)if(!(hb[jb].nodeType==1&&hb[jb].nodeName=="PARAM")&&!(hb[jb].nodeType==8))fb.appendChild(hb[jb].cloneNode(true));}}}return fb;}function sa(eb,fb,gb){var hb,ib=wa(gb);if(fa.wk&&fa.wk<312)return hb;if(ib){if(typeof eb.id==h)eb.id=gb;if(fa.ie&&fa.win){var jb="";for(var kb in eb)if(eb[kb]!=Object.prototype[kb])if(kb.toLowerCase()=="data"){fb.movie=eb[kb];}else if(kb.toLowerCase()=="styleclass"){jb+=' class="'+eb[kb]+'"';}else if(kb.toLowerCase()!="classid")jb+=' '+kb+'="'+eb[kb]+'"';var lb="";for(var mb in fb)if(fb[mb]!=Object.prototype[mb])lb+='<param name="'+mb+'" value="'+fb[mb]+'" />';ib.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+jb+'>'+lb+'</object>';u[u.length]=eb.id;hb=wa(eb.id);}else{var nb=xa(i);nb.setAttribute("type",l);for(var ob in eb)if(eb[ob]!=Object.prototype[ob])if(ob.toLowerCase()=="styleclass"){nb.setAttribute("class",eb[ob]);}else if(ob.toLowerCase()!="classid")nb.setAttribute(ob,eb[ob]);for(var pb in fb)if(fb[pb]!=Object.prototype[pb]&&pb.toLowerCase()!="movie")ta(nb,pb,fb[pb]);ib.parentNode.replaceChild(nb,ib);hb=nb;}}return hb;}function ta(eb,fb,gb){var hb=xa("param");hb.setAttribute("name",fb);hb.setAttribute("value",gb);eb.appendChild(hb);}function ua(eb){var fb=wa(eb);if(fb&&fb.nodeName=="OBJECT")if(fa.ie&&fa.win){fb.style.display="none";(function(){if(fb.readyState==4){va(eb);}else setTimeout(arguments.callee,10);})();}else fb.parentNode.removeChild(fb);}function va(eb){var fb=wa(eb);if(fb){for(var gb in fb)if(typeof fb[gb]=="function")fb[gb]=null;fb.parentNode.removeChild(fb);}}function wa(eb){var fb=null;try{fb=p.getElementById(eb);}catch(gb){}return fb;}function xa(eb){return p.createElement(eb);}function ya(eb,fb,gb){eb.attachEvent(fb,gb);v[v.length]=[eb,fb,gb];}function za(eb){var fb=fa.pv,gb=eb.split(".");gb[0]=parseInt(gb[0],10);gb[1]=parseInt(gb[1],10)||0;gb[2]=parseInt(gb[2],10)||0;return (fb[0]>gb[0]||(fb[0]==gb[0]&&fb[1]>gb[1])||(fb[0]==gb[0]&&fb[1]==gb[1]&&fb[2]>=gb[2]))?true:false;}function ab(eb,fb,gb,hb){if(fa.ie&&fa.mac)return;var ib=p.getElementsByTagName("head")[0];if(!ib)return;var jb=(gb&&typeof gb=="string")?gb:"screen";if(hb){ca=null;da=null;}if(!ca||da!=jb){var kb=xa("style");kb.setAttribute("type","text/css");kb.setAttribute("media",jb);ca=ib.appendChild(kb);if(fa.ie&&fa.win&&typeof p.styleSheets!=h&&p.styleSheets.length>0)ca=p.styleSheets[p.styleSheets.length-1];da=jb;}if(fa.ie&&fa.win){if(ca&&typeof ca.addRule==i)ca.addRule(eb,fb);}else if(ca&&typeof p.createTextNode!=h)ca.appendChild(p.createTextNode(eb+" {"+fb+"}"));}function bb(eb,fb){if(!ea)return;var gb=fb?"visible":"hidden";if(aa&&wa(eb)){wa(eb).style.visibility=gb;}else ab("#"+eb,"visibility:"+gb);}function cb(eb){var fb=/[\\\"<>\.;]/,gb=fb.exec(eb)!=null;return gb&&typeof encodeURIComponent!=h?encodeURIComponent(eb):eb;}var db=function(){if(fa.ie&&fa.win)window.attachEvent("onunload",function(){var eb=v.length;for(var fb=0;fb<eb;fb++)v[fb][0].detachEvent(v[fb][1],v[fb][2]);var gb=u.length;for(var hb=0;hb<gb;hb++)ua(u[hb]);for(var ib in fa)fa[ib]=null;fa=null;for(var jb in g)g[jb]=null;g=null;});}();return {registerObject:function(eb,fb,gb,hb){if(fa.w3&&eb&&fb){var ib={};ib.id=eb;ib.swfVersion=fb;ib.expressInstall=gb;ib.callbackFn=hb;t[t.length]=ib;bb(eb,false);}else if(hb)hb({success:false,id:eb});},getObjectById:function(eb){if(fa.w3)return na(eb);},embedSWF:function(eb,fb,gb,hb,ib,jb,kb,lb,mb,nb){var ob={success:false,id:fb};if(fa.w3&&!(fa.wk&&fa.wk<312)&&eb&&fb&&gb&&hb&&ib){bb(fb,false);ia(function(){gb+="";hb+="";var pb={};if(mb&&typeof mb===i)for(var qb in mb)pb[qb]=mb[qb];pb.data=eb;pb.width=gb;pb.height=hb;var rb={};if(lb&&typeof lb===i)for(var sb in lb)rb[sb]=lb[sb];if(kb&&typeof kb===i)for(var tb in kb)if(typeof rb.flashvars!=h){rb.flashvars+="&"+tb+"="+kb[tb];}else rb.flashvars=tb+"="+kb[tb];if(za(ib)){var ub=sa(pb,rb,fb);if(pb.id==fb)bb(fb,true);ob.success=true;ob.ref=ub;}else if(jb&&oa()){pb.data=jb;pa(pb,rb,fb,nb);return;}else bb(fb,true);if(nb)nb(ob);});}else if(nb)nb(ob);},switchOffAutoHideShow:function(){ea=false;},ua:fa,getFlashPlayerVersion:function(){return {major:fa.pv[0],minor:fa.pv[1],release:fa.pv[2]};},hasFlashPlayerVersion:za,createSWF:function(eb,fb,gb){if(fa.w3){return sa(eb,fb,gb);}else return undefined;},showExpressInstall:function(eb,fb,gb,hb){if(fa.w3&&oa())pa(eb,fb,gb,hb);},removeSWF:function(eb){if(fa.w3)ua(eb);},createCSS:function(eb,fb,gb,hb){if(fa.w3)ab(eb,fb,gb,hb);},addDomLoadEvent:ia,addLoadEvent:ja,getQueryParamValue:function(eb){var fb=p.location.search||p.location.hash;if(fb){if(/\?/.test(fb))fb=fb.split("?")[1];if(eb==null)return cb(fb);var gb=fb.split("&");for(var hb=0;hb<gb.length;hb++)if(gb[hb].substring(0,gb[hb].indexOf("="))==eb)return cb(gb[hb].substring((gb[hb].indexOf("=")+1)));}return "";},expressInstallCallback:function(){if(ba){var eb=wa(m);if(eb&&w){eb.parentNode.replaceChild(w,eb);if(x){bb(x,true);if(fa.ie&&fa.win)w.style.display="block";}if(y)y(z);}ba=false;}}};}();e.exports=g;});
__d("SoundPlayer",["Arbiter","ChatConfig","Env","swfobject","swfobject2","URI","createArrayFrom"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ChatConfig'),i=b('Env'),j=b('swfobject').SWFObject,k=b('swfobject2'),l=b('URI'),m=b('createArrayFrom'),n={},o=null,p=false,q='so_sound_player',r='/swf/SoundPlayerHater.swf',s='10.0.22.87',t=null,u=h.get('sound.useswfobject_2',false),v=h.get('sound.force_flash',false);function w(ea){var fa=l(ea);if(!fa.getDomain())return l(i.static_base).setPath(fa.getPath()).toString();return ea;}function x(ea){if(/\.mp3$/.test(ea))return 'audio/mpeg';if(/\.og[ga]$/.test(ea))return 'audio/ogg';return '';}function y(){if(!t&&!v){var ea=document.createElement('audio');if(!ea||!ea.canPlayType)return null;ea.setAttribute('preload','auto');document.body.appendChild(ea);t=ea;}return t;}function z(){var ea=document[q]||window[q];if(ea)if(!ea.playSound&&ea.length)ea=ea[0];return (ea&&ea.playSound&&ea.loopSound)?ea:null;}function aa(){return p;}function ba(ea,fa,ga){o={path:ea,sync:fa,loop:ga};}function ca(){p=true;if(o){var ea=z();if(o.loop){ea.loopSound(o.path,o.sync);}else ea.playSound(o.path,o.sync);}}var da={init:function(ea){ea=m(ea);var fa;for(var ga=0;ga<ea.length;++ga){fa=ea[ga];if(n[fa])return;}var ha=y();for(ga=0;ha&&ga<ea.length;++ga){fa=ea[ga];if(ha.canPlayType(fa)){n[fa]=true;return;}}n['audio/mpeg']=true;if(z())return;try{g.registerCallback(ca,['sound/player_ready','sound/ready']);var ja=document.createElement('div');ja.id='sound_player_holder';document.body.appendChild(ja);if(u){k.embedSWF(r,ja.id,'1px','1px',s,null,{swf_id:q},{allowscriptaccess:'always',wmode:'transparent'},null,function(la){window[q]=la.ref;g.inform('sound/player_ready');});}else{var ka=new j(r,q,'1px','1px',[s],'#ffffff');ka.addParam('allowscriptaccess','always');ka.addParam('wmode','transparent');ka.addVariable('swf_id',q);ka.fallback_html=' ';ka.write(ja.id);window[q]=ka;g.inform('sound/player_ready');}}catch(ia){}},play:function(ea,fa){ea=m(ea);var ga=y(),ha,ia;for(var ja=0;ga&&ja<ea.length;++ja){ha=ea[ja];ia=x(ha);if(!ga.canPlayType(ia))continue;da.init([ia]);ga.src=w(ha);if(fa){ga.setAttribute('loop','');}else ga.removeAttribute('loop');ga.play();return;}for(ja=0;ja<ea.length;++ja){ha=w(ea[ja]);ia=x(ha);if(ia!='audio/mpeg')continue;da.init([ia]);var ka=z();if(!aa()){ba(ha,true,fa);return;}else if(ka){if(fa){ka.loopSound(ha,true);}else ka.playSound(ha,true);return;}}},stop:function(ea){ea=m(ea);for(var fa=0;fa<ea.length;++fa){var ga=w(ea[fa]),ha=y(),ia=z();if(ha&&ha.src==ga){ha.pause();ha.src=undefined;}else ia&&ia.stopSound(ga);}}};e.exports=da;});
__d("SoundSynchronizer",["event-extensions","hasArrayNature","SoundPlayer","createArrayFrom"],function(a,b,c,d,e,f){b('event-extensions');var g=b('hasArrayNature'),h=b('SoundPlayer'),i=b('createArrayFrom'),j='fb_sounds_playing3';function k(){if(window.localStorage)try{var p=window.localStorage[j];if(p){p=JSON.parse(p);if(g(p))return p;}}catch(o){}return [];}function l(o){if(window.localStorage){var p=k();p.push(o);while(p.length>5)p.shift();try{window.localStorage[j]=JSON.stringify(p);}catch(q){}}}function m(o){return k().some(function(p){return p===o;});}var n={play:function(o,p,q){o=i(o);p=p||(o[0]+Math.floor(Date.now()/1000));if(m(p))return;h.play(o,q);l(p);},isSupported:function(){return !!window.localStorage;}};e.exports=n;});
__d("SoundRPC",["event-extensions","SoundSynchronizer"],function(a,b,c,d,e,f){b('event-extensions');var g=b('SoundSynchronizer');function h(j,k,l){g.play(j,k,l);}var i={playLocal:h,playRemote:function(j,k,l,m){var n={paths:k,sync:l,loop:m};j.postMessage(JSON.stringify(n),'*');},supportsRPC:function(){return !!window.postMessage;},_listen:function(){Event.listen(window,'message',function(j){if(!/\.facebook.com$/.test(j.origin))return;var k=JSON.parse(j.data);h(k.paths,k.sync,k.loop);});}};e.exports=i;});
__d("Sound",["SoundPlayer","SoundRPC","SoundSynchronizer","UserAgent"],function(a,b,c,d,e,f){var g=b('SoundPlayer'),h=b('SoundRPC'),i=b('SoundSynchronizer'),j=b('UserAgent'),k=null,l={init:function(o){if(!k)g.init(o);},play:function(o,p,q){if(k){h.playRemote(k.contentWindow,o,p,false);}else h.playLocal(o,p,q);},stop:function(o){if(!k)g.stop(o);}},m=location.host.replace(/^[^.]+/,'www');function n(){if(j.ie()<9)return false;return i.isSupported()&&h.supportsRPC();}if(location.host!==m&&n()){k=document.createElement('iframe');k.setAttribute('src','//'+m+'/sound_iframe.php');k.style.display='none';document.body.appendChild(k);}e.exports=l;});
__d("Token",["CSS","DataStore","DOM","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DataStore'),i=b('DOM'),j=b('copyProperties'),k=b('tx');function l(m,n){this.info=m;this.paramName=n;}j(l.prototype,{getInfo:function(){return this.info;},getText:function(){return this.info.text;},getValue:function(){return this.info.uid;},isFreeform:function(){return !!this.info.freeform;},getElement:function(){if(!this.element)this.setElement(this.createElement());return this.element;},setElement:function(m){h.set(m,'Token',this);this.element=m;return this;},isRemovable:function(){return g.hasClass(this.element,'removable');},createElement:function(){var m=this.paramName,n=this.getText(),o=this.getValue(),p=i.create('a',{href:'#','aria-label':k._("Remove {item}",{item:n}),className:'remove uiCloseButton uiCloseButtonSmall'}),q=i.create('input',{type:'hidden',value:o,name:m+'[]',autocomplete:'off'}),r=i.create('input',{type:'hidden',value:n,name:'text_'+m+'[]',autocomplete:'off'}),s=i.create('span',{className:'removable uiToken'},[n,q,r,p]);return s;}});e.exports=l;});
__d("StickyPlaceholderInput",["event-extensions","CSS","DOM","Input","Parent"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DOM'),i=b('Input'),j=b('Parent');function k(o){return j.byClass(o,'uiStickyPlaceholderInput');}function l(o){return h.scry(o,'.placeholder')[0];}function m(o){o=o||window.event;var p=o.target||o.srcElement;if(h.isNodeOfType(p,['input','textarea'])){var q=k(p);if(q){var r=o.type;(function(){if((r==='keydown'||r==='paste')&&p.value.length)g.removeClass(q,'uiStickyPlaceholderEmptyInput');if((r==='blur'||r==='focusout')&&!p.value.length)g.addClass(q,'uiStickyPlaceholderEmptyInput');}).defer();}}}var n={init:function(){n.init=bagofholding;Event.listen(document.documentElement,{keydown:m,paste:m});if(document.documentElement.addEventListener){document.documentElement.addEventListener('blur',m,true);}else Event.listen(document.documentElement,'focusout',m);},registerInput:function(o){n.init();var p=o.getAttribute('placeholder')||'';if(p.length)if(document.activeElement===o){var q=Event.listen(o,'blur',function(){n.manipulateInput(o,p);q.remove();});}else n.manipulateInput(o,p);},manipulateInput:function(o,p){var q=h.create('div',{className:'placeholder','aria-hidden':'true'},p),r=h.create('div',{className:'uiStickyPlaceholderInput'},q);if(h.isNodeOfType(o,'textarea'))g.addClass(r,'uiStickyPlaceholderTextarea');Event.listen(q,'click',function(){o.focus();});if(o.value===p)o.value='';g.removeClass(o,'DOMControl_placeholder');o.setAttribute('placeholder','');h.replace(o,r);h.appendContent(r,o);g.conditionClass(r,'uiStickyPlaceholderEmptyInput',!o.value.length);},setPlaceholderText:function(o,p){var q=k(o);if(!q){i.setPlaceholder(o,p);}else{var r=l(q);r&&h.setContent(r,p);}},getPlaceholderText:function(o){var p=k(o),q=l(p);return q&&h.getText(q);},update:function(o){var p=k(o);if(p)g.conditionClass(p,'uiStickyPlaceholderEmptyInput',!o.value.length);},getVisibleText:function(o){var p=k(o);if(g.hasClass(p,'uiStickyPlaceholderEmptyInput')){var q=l(p);return q&&h.getText(q);}else return o.value;}};e.exports=n;});
__d("Tokenizer",["array-extensions","event-extensions","Arbiter","ArbiterMixin","Class","CSS","DataStore","DOM","DOMQuery","Input","Keys","Parent","StickyPlaceholderInput","Style","TextMetrics","Token","UserAgent","copyProperties","createObjectFrom"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('Class'),j=b('CSS'),k=b('DataStore'),l=b('DOM'),m=b('DOMQuery'),n=b('Input'),o=b('Keys'),p=b('Parent'),q=b('StickyPlaceholderInput'),r=b('Style'),s=b('TextMetrics'),t=b('Token'),u=b('UserAgent'),v=b('copyProperties'),w=b('createObjectFrom');function x(y,z){this.element=y;this.typeahead=z;this.input=z.getCore().getElement();k.set(this.element,'Tokenizer',this);}x.getInstance=function(y){var z=p.byClass(y,'uiTokenizer');return z?k.get(z,'Tokenizer'):null;};v(x.prototype,h,{inline:false,maxTokens:null,excludeDuplicates:true,placeholder:'',init:function(y,z,aa,ba){this.init=bagofholding;this.tokenarea=y;this.paramName=z;if(!this.placeholder)this.placeholder=this.input.getAttribute('data-placeholder')||'';v(this,ba||{});this.initEvents();this.initTypeahead();this.reset(aa);this.initBehaviors();g.inform('Tokenizer/init',this,g.BEHAVIOR_PERSISTENT);},reset:function(y){this.tokens=[];this.unique={};if(y){this.populate(y);}else l.empty(this.tokenarea);this.updateTokenarea();},populate:function(y){var z=[];this.tokens=this.getTokenElements().map(function(aa,ba){var ca=y[ba];z.push(this._tokenKey(ca));return this.createToken(ca,aa);},this);this.unique=w(z,this.tokens);},getElement:function(){return this.element;},getTypeahead:function(){return this.typeahead;},getInput:function(){return this.input;},initBehaviors:function(){this.behaviors=this.behaviors||[];if(this.behaviors instanceof Array){this.behaviors.forEach(function(aa){aa.behavior(this,aa.config);}.bind(this));}else for(var y in (this.behaviors||{})){var z=window.TokenizerBehaviors&&window.TokenizerBehaviors[y];z.call(null,this,this.behaviors[y]);}},initTypeahead:function(){var y=this.typeahead.getCore();y.resetOnSelect=true;y.setValueOnSelect=false;y.preventFocusChangeOnTab=true;if(this.inline){var z=this.typeahead.getView();j.addClass(z.getElement(),'uiInlineTokenizerView');}this.typeahead.subscribe('select',function(aa,ba){var ca=ba.selected;if('uid' in ca){this.updateInput();this.addToken(this.createToken(ca));}}.bind(this));this.typeahead.subscribe('blur',this.handleBlur.bind(this));},handleBlur:function(event){this.inform('blur',{event:event});this.updatePlaceholder();},initEvents:function(){var y=this.handleEvents.bind(this),z=u.firefox()<4?'keypress':'keydown';Event.listen(this.tokenarea,{click:y,keydown:y});Event.listen(this.input,'paste',this.paste.bind(this));Event.listen(this.input,z,this.keydown.bind(this));},handleEvents:function(event){var y=event.getTarget(),z=y&&this.getTokenElementFromTarget(y);if(!z)return;if(event.type!='keydown'||Event.getKeyCode(event)==o.RETURN)this.processEvents(event,y,z);},processEvents:function(event,y,z){if(p.byClass(y,'remove')){var aa=z.nextSibling;aa=aa&&m.scry(z.nextSibling,'.remove')[0];var ba=this.getTokenFromElement(z);ba=this.addTokenData(ba,y);this.removeToken(ba);this.focusOnTokenRemoval(event,aa);event.kill();}},focusOnTokenRemoval:function(event,y){n.focus(event.type=='keydown'&&y||this.input);},addTokenData:function(y,z){return y;},keydown:function(event){this.inform('keydown',{event:event});var y=Event.getKeyCode(event),z=this.input;if(this.inline&&y==o.BACKSPACE&&n.isEmpty(z)){var aa=this.getLastToken();if(aa&&aa.isRemovable())this.removeToken(aa);}this.updateInput();},paste:function(event){this.inform('paste',{event:event});this.updateInput(true);},focusInput:function(){n.focus(this.input);},updateInput:function(y){if(!this.inline)return;setTimeout(function(){this.adjustWidth(this.input.value);if(y)this.input.value=this.input.value;}.bind(this),20);q.setPlaceholderText(this.input,'');},setPlaceholder:function(y){this.placeholder=y;if(this.stickyPlaceholder)q.setPlaceholderText(this.input,y);this.updatePlaceholder();},updatePlaceholder:function(){if(!this.inline||this.input.value)return;var y=!this.tokens.length,z='';if(y||this.stickyPlaceholder){this.adjustWidth(this.placeholder);z=this.placeholder;}q.setPlaceholderText(this.input,z);},adjustWidth:function(y){if(!this.inline||!this._getIsInDOM())return;if(!y&&this.stickyPlaceholder&&this.input.value==='')y=this.placeholder;var z=this._getMetrics().measure(y),aa=z.width+this._getWidthOffset()+10;r.set(this.input,'width',aa+'px');},getToken:function(y){return this.unique[y]||null;},getTokens:function(){return this.tokens||[];},getTokenElements:function(){return m.scry(this.tokenarea,'span.uiToken');},getTokenElementFromTarget:function(y){return p.byClass(y,'uiToken');},getTokenFromElement:function(y){return k.get(y,'Token');},getTokenValues:function(){return this.tokens.map(function(y){return y.getValue();});},getFirstToken:function(){return this.tokens[0]||null;},getLastToken:function(){return this.tokens[this.tokens.length-1]||null;},hasMaxTokens:function(){return this.maxTokens&&this.maxTokens<=this.tokens.length;},createToken:function(y,z){var aa=this.getToken(this._tokenKey(y));aa=aa||new t(y,this.paramName);z&&aa.setElement(z);return aa;},addToken:function(y){if(this.hasMaxTokens())return;var z=this._tokenKey(y.getInfo());if(z in this.unique)return;this.unique[z]=y;this.tokens.push(y);this.insertToken(y);this.updateTokenarea();this.inform('addToken',y);g.inform('Form/change',{node:this.element});},insertToken:function(y){l.appendContent(this.tokenarea,y.getElement());},removeToken:function(y){if(!y)return;var z=this.tokens.indexOf(y);if(z<0)return;this.tokens.splice(this.tokens.indexOf(y),1);delete this.unique[this._tokenKey(y.getInfo())];l.remove(y.getElement());this.updateTokenarea();this.inform('removeToken',y);g.inform('Form/change',{node:this.element});},removeAllTokens:function(){this.reset();this.inform('removeAllTokens');},updateTokenarea:function(){var y=this.typeahead.getCore(),z=this.getTokenValues();if(this.excludeDuplicates){this._exclusions||(this._exclusions=y.getExclusions());y.setExclusions(z.concat(this._exclusions));}y.setEnabled(!this.hasMaxTokens());this.updateTokenareaVisibility();this.updatePlaceholder();this.adjustWidth(this.placeholder);},updateTokenareaVisibility:function(){j.conditionShow(this.tokenarea,this.tokens.length!==0);},_tokenKey:function(y){return y.uid+(y.freeform?':':'');},_widthOffset:null,_getWidthOffset:function(){if(this._widthOffset===null){var y=this.input.clientWidth,z=r.getFloat(this.input,'width');if(y==z){this._widthOffset=r.getFloat(this.input,'paddingLeft')+r.getFloat(this.input,'paddingRight');}else this._widthOffset=0;}return this._widthOffset;},_metrics:null,_getMetrics:function(){if(!this._metrics)this._metrics=new s(this.input,this.inline);return this._metrics;},_getIsInDOM:function(){return this._isInDOM||(this._isInDOM=m.contains(document.body,this.input));}});e.exports=x;});
__d("Typeahead",["array-extensions","event-extensions","ArbiterMixin","BehaviorsMixin","Class","DataStore","DOM","Parent","Run","copyProperties","ge"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('ArbiterMixin'),h=b('BehaviorsMixin'),i=b('Class'),j=b('DataStore'),k=b('DOM'),l=b('Parent'),m=b('Run'),n=b('copyProperties'),o=b('ge');function p(q,r,s,t){this.args={data:q,view:r,core:s};j.set(t,'Typeahead',this);this.element=t;}p.getInstance=function(q){var r=l.byClass(q,'uiTypeahead');return r?j.get(r,'Typeahead'):null;};n(p.prototype,g,h,{init:function(q){this.init=bagofholding;this.getCore();this.proxyEvents();this.initBehaviors(q||[]);this.inform('init',this);this.data.bootstrap();this.core.focus();},getData:function(){if(!this.data){var q=this.args.data;this.data=q;this.data.init();}return this.data;},getView:function(){if(!this.view){var q=this.args.view,r=o(q.node_id);if(!r){r=k.create('div',{className:'uiTypeaheadView'});k.appendContent(this.element,r);}if(typeof q.ctor==='string'){this.view=new window[q.ctor](r,q.options||{});}else this.view=new q.ctor(r,q.options||{});this.view.init();this.view.setTypeahead(this.element);}return this.view;},getCore:function(){if(!this.core){var q=this.args.core;if(typeof q.ctor==='string'){this.core=new window[q.ctor](q.options||{});}else this.core=new q.ctor(q.options||{});this.core.init(this.getData(),this.getView(),this.getElement());}return this.core;},getElement:function(){return this.element;},swapData:function(q){var r=this.core;this.data=this.args.data=q;q.init();if(r){r.data=q;r.initData();r.reset();}q.bootstrap();return q;},proxyEvents:function(){[this.data,this.view,this.core].forEach(function(q){q.subscribe(q.events,this.inform.bind(this));},this);},initBehaviors:function(q){q.forEach(function(r){if(typeof r==='string'){if(a.TypeaheadBehaviors&&a.TypeaheadBehaviors[r]){a.TypeaheadBehaviors[r](this);}else m.onLoad(function(){if(a.TypeaheadBehaviors)(a.TypeaheadBehaviors[r]||bagofholding)(this);}.bind(this));}else this.enableBehavior(r);},this);}});p.initNow=function(q,r,s){if(s)s.init(q);q.init(r);};p.init=function(q,r,s,t){if(!k.isNodeOfType(q,['input','textarea']))q=k.scry(q,'input')[0]||k.scry(q,'textarea')[0];var u=false;try{u=document.activeElement===q;}catch(v){}if(u){p.initNow(r,s,t);}else var w=Event.listen(q,'focus',function(){p.initNow(r,s,t);w.remove();});};e.exports=p;});
__d("TypeaheadCore",["event-extensions","Arbiter","ArbiterMixin","Class","CSS","DOM","Input","InputSelection","Keys","UserAgent","bind","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('Class'),j=b('CSS'),k=b('DOM'),l=b('Input'),m=b('InputSelection'),n=b('Keys'),o=b('UserAgent'),p=b('bind'),q=b('copyProperties');function r(s){q(this,s);}q(r.prototype,h,{events:['blur','focus','click','unselect','loading'],keepFocused:true,resetOnSelect:false,resetOnKeyup:true,setValueOnSelect:false,queryTimeout:250,preventFocusChangeOnTab:false,init:function(s,t,u){this.init=bagofholding;this.data=s;this.view=t;this.root=u;this.initInput();this.inputWrap=k.find(u,'div.wrap');this.hiddenInput=k.find(u,'input.hiddenInput');this.value='';this.nextQuery=null;this.selectedText=null;if(this.setValueOnSelect&&j.hasClass(this.inputWrap,'selected'))this.selectedText=this.getValue();this.initView();this.initData();this.initEvents();this.initToggle();this._exclusions=[];},initInput:function(){this.element=k.find(this.root,'.textInput');var s=k.scry(this.element,'input')[0];if(s)this.element=s;},initView:function(){this.view.subscribe('highlight',function(s,t){this.element.focus();this.element.setAttribute('aria-activedescendant',(t.index!==-1)?k.getID(t.element):'');}.bind(this));this.view.subscribe('select',function(s,t){this.select(t.selected);}.bind(this));this.view.subscribe('afterSelect',function(){this.afterSelect();}.bind(this));},initData:function(){this.data.subscribe('respond',function(s,t){if(t.forceDisplay||t.value==this.getValue()&&!this.element.disabled)this.view.render(t.value,t.results,t.isAsync);}.bind(this));this.data.subscribe('activity',function(s,t){this.fetching=t.activity;if(!this.fetching)this.nextQuery&&this.performQuery();if(this.loading!=this.fetching){this.loading=this.fetching;this.inform('loading',{loading:this.loading});}}.bind(this));},initEvents:function(){Event.listen(this.view.getElement(),{mouseup:this.viewMouseup.bind(this),mousedown:this.viewMousedown.bind(this)});var s={blur:p(this,'blur'),focus:p(this,'focus'),click:p(this,'click'),keyup:p(this,'keyup'),keydown:p(this,'keydown')};if(o.firefox())s.text=s.keyup;if(o.firefox()<4){s.keypress=s.keydown;delete s.keydown;}Event.listen(this.element,s);Event.listen(this.element,'keypress',p(this,'keypress'));},initToggle:function(){this.subscribe('blur',this.view.hide.bind(this.view));this.subscribe('focus',this.view.show.bind(this.view));},viewMousedown:function(){this.selecting=true;},viewMouseup:function(){this.selecting=false;},blur:function(){if(this.selecting){this.selecting=false;return;}this.inform('blur');},click:function(){var s=m.get(this.element);if(s.start==s.end)this.element.select();this.inform('click');},focus:function(){this.checkValue();this.inform('focus');},keyup:function(){if(this.resetOnKeyup&&!this.getValue())this.view.reset();this.checkValue();},keydown:function(event){if(!this.view.isVisible()||this.view.isEmpty()){this.checkValue.bind(this).defer();return;}switch(Event.getKeyCode(event)){case n.TAB:this.handleTab(event);return;case n.UP:this.view.prev();break;case n.DOWN:this.view.next();break;case n.ESC:this.view.reset();break;default:this.checkValue.bind(this).defer();return;}event.kill();},keypress:function(event){if(this.view.getSelection()&&Event.getKeyCode(event)==n.RETURN){this.view.select();event.kill();}},handleTab:function(event){if(this.preventFocusChangeOnTab)if(this.view.getSelection()){event.kill();}else event.preventDefault();this.view.select();},select:function(s){if(s&&this.setValueOnSelect){this.setValue(s.text);this.setHiddenValue(s.uid);this.selectedText=s.text;j.addClass(this.inputWrap,'selected');}},afterSelect:function(){this.keepFocused?this.element.focus():this.element.blur();this.resetOnSelect?this.reset():this.view.reset();},unselect:function(){if(this.setValueOnSelect){this.selectedText=null;j.removeClass(this.inputWrap,'selected');}this.setHiddenValue();this.inform('unselect',this);},setEnabled:function(s){var t=s===false;this.element.disabled=t;j.conditionClass(this.root,'uiTypeaheadDisabled',t);},reset:function(){this.unselect();this.setValue();!this.keepFocused&&l.reset(this.element);this.view.reset();this.inform('reset');},getElement:function(){return this.element;},setExclusions:function(s){this._exclusions=s;},getExclusions:function(){return this._exclusions;},setValue:function(s){this.value=this.nextQuery=s||'';l.setValue(this.element,this.value);},setHiddenValue:function(s){this.hiddenInput.value=(s||s===0)?s:'';g.inform('Form/change',{node:this.hiddenInput});},getValue:function(){return l.getValue(this.element);},getHiddenValue:function(){return this.hiddenInput.value||'';},checkValue:function(){var s=this.getValue();if(s==this.value)return;if(this.selectedText&&this.selectedText!=s)this.unselect();var t=Date.now(),u=t-this.time;this.time=t;this.value=this.nextQuery=s;this.performQuery(u);},performQuery:function(s){if(this.selectedText)return;s=s||0;if(this.fetching&&s<this.queryTimeout){this.data.query(this.nextQuery,true,this._exclusions);}else{this.data.query(this.nextQuery,false,this._exclusions);this.nextQuery=null;}}});e.exports=r;});
__d("UntrustedLink",["DOM","event-extensions","URI","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('event-extensions'),i=b('URI'),j=b('UserAgent'),k=b('copyProperties');function l(m,n,o,p){this.dom=m;this.url=m.href;this.hash=n;this.func_get_params=p||function(){return {};};Event.listen(this.dom,'click',this.onclick.bind(this));Event.listen(this.dom,'mousedown',this.onmousedown.bind(this));Event.listen(this.dom,'mouseup',this.onmouseup.bind(this));Event.listen(this.dom,'mouseout',this.onmouseout.bind(this));this.onmousedown(h.$E(o));}l.bootstrap=function(m,n,o,p){if(m.__untrusted)return;m.__untrusted=true;new l(m,n,o,p);};l.prototype.getRewrittenURI=function(){var m=k({u:this.url,h:this.hash},this.func_get_params(this.dom)),n=new i('/l.php');return n.setQueryData(m).setSubdomain('www').setProtocol('http');};l.prototype.onclick=function(){(function(){this.setHref(this.url);}).bind(this).defer(100);this.setHref(this.getRewrittenURI());};l.prototype.onmousedown=function(m){if(m.button==2)this.setHref(this.getRewrittenURI());};l.prototype.onmouseup=function(){this.setHref(this.getRewrittenURI());};l.prototype.onmouseout=function(){this.setHref(this.url);};l.prototype.setHref=function(m){if(j.ie()<9){var n=g.create('span');g.appendContent(this.dom,n);this.dom.href=m;g.remove(n);}else this.dom.href=m;};e.exports=l;});
__d("UserActivity",["event-extensions","Arbiter","ClickRefUtils","collectDataAttributes"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('ClickRefUtils'),i=b('collectDataAttributes'),j=5000,k=500,l=Date.now(),m=l,n={subscribeOnce:function(p){var q=n.subscribe(function(){n.unsubscribe(q);p();});},subscribe:function(p){return g.subscribe('useractivity/activity',p);},unsubscribe:function(p){p.unsubscribe();},isActive:function(p){return (new Date()-l<(p||n.DEFAULT_IDLE_MS));},getLastInformTime:function(){return m;}};function o(event){l=Date.now();var p=l-m;if(p>k){m=l;g.inform('useractivity/activity',{event:event,idleness:p});}}Event.listen(window,'scroll',o);Event.listen(document.documentElement,{DOMMouseScroll:o,mousewheel:o,keydown:o,mouseover:o,click:o});e.exports=n;});
__d("UIIntentionalStreamMessage",[],function(a,b,c,d,e,f){var g={SET_AUTO_INSERT:'UIIntentionalStream/setAutoInsert',UPDATE_STREAM:'UIIntentionalStreamRefresh/updateStream',REFRESH_STREAM:'UIIntentionalStreamRefresh/refreshStream',UPDATE_AUTOREFRESH_CONFIG:'UIIntentionalStream/updateAutoRefreshConfig',UPDATE_HTML_CONTENT:'UIIntentionalStream/updateHtmlContent',UPDATE_LAST_REFRESH_TIME:'UIIntentionalStream/updateLastRefreshTime',INSERT_STORIES:'UIIntentionalStream/updateLastRefreshTime',UNLOAD:'UIIntentionalStream/unload'};e.exports=g;});
__d("collectSubtreeData",[],function(a,b,c,d,e,f){function g(i,j,k,l,m){if(i.offsetWidth===0&&i.offsetHeight===0)return m;var n={};if(i.getAttribute)for(r=0;r<j.length;r++){t=j[r];var o=i.getAttribute(k[t]);if(o){n[t]={};var p=JSON.parse(o);for(var q in l)if(p[q]!==undefined){n[t][q]=true;if(m[t]===undefined)m[t]={};if(m[t][q]===undefined)m[t][q]=[];if(l[q].length>0)m[t][q].push(l[q]);m[t][q].push('('+p[q]);}}}for(var r=0;r<i.childNodes.length;r++){var s=i.childNodes[r];g(s,j,k,l,m);}for(var t in n)for(var u in n[t]){var v=m[t][u][m[t][u].length-1];if(v.length>0&&v.charAt(0)=='('){m[t][u][m[t][u].length-1]=v.substr(1);}else m[t][u].push(')');}return m;}function h(i,j){var k={};for(var l=0;l<j.length;++l)k[j[l]]='data-'+j[l];var m={tn:"","tn-debug":","},n={};g(i,j,k,m,n);for(var o in n)for(var p in n[o])n[o][p]=n[o][p].join('');return n;}e.exports=h;});
__d("ViewportTracking",["event-extensions","Arbiter","DOM","NavigationMessage","Run","Style","UIIntentionalStreamMessage","Vector","$","clickRefAction","collectSubtreeData","copyProperties","debounce"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('DOM'),i=b('NavigationMessage'),j=b('Run'),k=b('Style'),l=b('UIIntentionalStreamMessage'),m=b('Vector'),n=b('$'),o=b('clickRefAction'),p=b('collectSubtreeData'),q=b('copyProperties'),r=b('debounce'),s='vpv';function t(){}q(t.prototype,{init:function(u){q(this,{readStoryIDs:{},minSizeToBeVisible:200,listeners:[],arbiterSubscriptions:[]});this.getDataFromConfig(u);this.fireTimer();var v=r(this.fireTimer,this.getTimeout(),this);this.listeners.push(Event.listen(window,'scroll',v));this.listeners.push(Event.listen(window,'resize',v));this.arbiterSubscriptions.push(g.subscribe(l.UPDATE_HTML_CONTENT,v));j.onLeave(this.cleanup.bind(this));this.arbiterSubscriptions.push(g.subscribe(i.NAVIGATION_BEGIN,this.cleanup.bind(this)));},cleanup:function(){this.listeners.forEach(function(u){u.remove();});this.listeners=[];this.arbiterSubscriptions.forEach(function(u){u.unsubscribe();});this.arbiterSubscriptions=[];},fireTimer:function(){this.getStoriesInView().forEach(this.markStoryRead.bind(this));},getStoriesInView:function(){var u=this.getAllStories(),v=[],w=false;for(var x=0;x<u.length;x++){var y=u[x],z=this.getStoryID(y);if(this.hasBeenVisible(z))continue;if(this.isVisible(y)){v.push(y);w=true;}else if(w)break;}return v;},hasBeenVisible:function(u){return u in this.readStoryIDs;},isVisible:function(u){var v=m.getViewportDimensions(),w=m.getElementPosition(u,'viewport'),x=m.getElementDimensions(u),y=Math.max(w.y,0),z=Math.min(w.y+x.y,v.y),aa=Math.min(x.y,this.minSizeToBeVisible);return (z-y)>=aa;},markStoryRead:function(u){var v=this.getStoryID(u);if(!v)return;if(!this.hasBeenVisible(v)){this.readStoryIDs[v]=true;var w=this.getDataToLog(u);o(s,u,null,'FORCE',w);}}});e.exports=t;});
__d("XHPTemplate",["event-extensions","DataStore","DOM","HTML","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DataStore'),h=b('DOM'),i=b('HTML'),j=b('copyProperties');function k(m){this._model=m;}j(k.prototype,{render:function(){if(i.isHTML(this._model))this._model=h.setContent(document.createDocumentFragment(),this._model)[0];return this._model.cloneNode(true);},build:function(){return new l(this.render());}});j(k,{getNode:function(m,n){return k.getNodes(m)[n];},getNodes:function(m){var n=g.get(m,'XHPTemplate:nodes');if(!n){n={};var o=h.scry(m,'[data-jsid]');o.push(m);var p=o.length;while(p--){var q=o[p];n[q.getAttribute('data-jsid')]=q;q.removeAttribute('data-jsid');}g.set(m,'XHPTemplate:nodes',n);}return n;}});function l(m){this._root=m;this._populateNodes();}j(l.prototype,{_populateNodes:function(){this._nodes={};this._leaves={};var m=this._root.getElementsByTagName('*');for(var n=0,o=m.length;n<o;n++){var p=m[n],q=p.getAttribute('data-jsid');if(q){p.removeAttribute('data-jsid');this._nodes[q]=p;this._leaves[q]=!p.childNodes.length;}}},getRoot:function(){return this._root;},getNode:function(m){return this._nodes[m];},setNodeProperty:function(m,n,o){this.getNode(m)[n]=o;return this;},setNodeContent:function(m,n){if(!this._leaves[m])throw new Error("Can't setContent on non-leaf node: "+m);h.setContent(this.getNode(m),n);return this;}});e.exports=k;});
__d("coalesce",[],function(a,b,c,d,e,f){function g(){for(var h=0;h<arguments.length;++h)if(arguments[h]!=null)return arguments[h];return null;}e.exports=g;});
__d("endsWith",[],function(a,b,c,d,e,f){function g(h,i){return h.indexOf(i,h.length-i.length)>-1;}e.exports=g;});
__d("mergeObjects",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(){var i={};for(var j=0;j<arguments.length;j++)g(i,arguments[j]);return i;}e.exports=h;});
__d("enforceMaxLength",["event-extensions","function-extensions","DOM","Input","InputSelection"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('DOM'),h=b('Input'),i=b('InputSelection'),j=function(m,n){var o=h.getValue(m),p=o.length,q=p-n;if(q>0){var r,s;try{r=i.get(m);s=r.end;}catch(t){r=null;s=0;}if(s>=q)p=s;var u=p-q;if(u&&(o.charCodeAt(u-1)&64512)===55296)u--;s=Math.min(s,u);h.setValue(m,o.slice(0,u)+o.slice(p));if(r)i.set(m,Math.min(r.start,s),s);}},k=function(event){var m=event.getTarget(),n=m.getAttribute&&parseInt(m.getAttribute('maxlength'),10);if(n>0&&g.isNodeOfType(m,['input','textarea']))j.bind(null,m,n).defer();},l='maxLength' in g.create('input')&&'maxLength' in g.create('textarea');if(!l)Event.listen(document.documentElement,{keydown:k,paste:k});e.exports=j;});
__d("htmlHyperlink",["Env","htmlize","UntrustedLink","URI","URLScraper"],function(a,b,c,d,e,f){var g=b('Env'),h=b('htmlize'),i=b('UntrustedLink'),j=b('URI'),k=b('URLScraper');function l(m,n,o,p){if(typeof m==='undefined'||!m.toString)return '';if(typeof n!=='function')n=h;if(typeof o!=='function')o=h;var m=m.toString(),q=[],r;while((r=k.match(m))){var s=m.indexOf(r);if(s>=0)q.push(n(m.substring(0,s)));var t=o(r),u=r.replace(/"/g,'%22');if(!(/^[a-z][a-z0-9\-+.]+:\/\//i.test(r)))u='http://'+u;q.push('<a target="_blank" rel="nofollow" href="'+u+'"');if(p&&!j(u).isFacebookURI()){a.UntrustedLink=i;q.push(' onmousedown="UntrustedLink.bootstrap(this, \''+g.lhsh+'\', event)"');}q.push('>'+t+'</a>');m=m.substring(s+r.length);}m&&q.push(n(m));return q.join('');}e.exports=l;});
__d("randomInt",[],function(a,b,c,d,e,f){function g(h,i){if(arguments.length===1){i=h;h=0;}var j=this.random||Math.random;return Math.floor(h+j()*(i-h));}e.exports=g;});
__d("reportData",["EagleEye","userAction"],function(a,b,c,d,e,f){var g=b('EagleEye'),h=b('userAction');function i(j,k){k=k||{};var l={ft:(k.ft||{}),gt:(k.gt||{})},m='-',n=a.ArbiterMonitor,o=(!!n)?n.getActFields():[],p=(!n)?'r':'a',q=[Date.now(),h.getCurrentUECount(),m,j,m,m,p,a.URI?a.URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,l,0,0,0,0].concat(o);g.log('act',q);}e.exports=i;});
__d("setIntervalAcrossTransitions",[],function(a,b,c,d,e,f){function g(h,i){return setInterval(h,i,false);}e.exports=g;});
__d("setTimeoutAcrossTransitions",[],function(a,b,c,d,e,f){function g(h,i){return setTimeout(h,i,false);}e.exports=g;});
__d("submitForm",["DOM"],function(a,b,c,d,e,f){var g=b('DOM'),h=function(i){var j=g.scry(i,'input[type="submit"]')[0];if(j){j.click();}else{j=g.create('input',{type:'submit',className:'hidden_elem'});g.appendContent(i,j);j.click();g.remove(j);}};e.exports=h;});
__d("debounceAcrossTransitions",["debounce"],function(a,b,c,d,e,f){var g=b('debounce');function h(i,j,k){return g(i,j,k,true);}e.exports=h;});
__d("MusicButtonStore",[],function(a,b,c,d,e,f){var g={},h={addButton:function(i,j){g[i]=j;return j;},getButton:function(i){return g[i];},getButtons:function(){return g;},removeButton:function(i){g[i]&&g[i].resetLoadingTimers();delete g[i];}};e.exports=h;});
__d("MusicEvents",["Arbiter"],function(a,b,c,d,e,f){var g=b('Arbiter');e.exports=a.MusicEvents=new g();});
__d("MusicProviders",[],function(a,b,c,d,e,f){e.exports=a.MusicProviders={SPOTIFY:'open.spotify.com'};});
__d("MusicConstants",["Arbiter","MusicEvents","MusicProviders"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('MusicEvents'),i=b('MusicProviders'),j={DEBUG:false,LIVE_LISTEN_MIN_SPOTIFY_VERSION:'spotify-0.6.6.0.g5a9eaca5',enableDebug:function(){this.DEBUG=true;},sameURLs:function(k,l){var m=/\/$/;if(k&&l){k=URI(k);l=URI(l);return k.getDomain()==l.getDomain()&&k.getPath()==l.getPath();}return false;},greaterOrEqualToMinimumVersion:function(k,l){var m=/(?:\d+\.)+/,n=k.match(m)[0].split('.').slice(0,-1),o=l.match(m)[0].split('.').slice(0,-1);if(n.length!==o.length)return false;for(var p=0;p<o.length;p++)if(+n[p]<+o[p]){return false;}else if(+n[p]>+o[p])return true;return true;},sanitizeForProviders:function(k){var l={};for(var m in k)if(this.ALLOWED_EXTERNAL_CONTEXT_PARAMS[m])l[m]=k[m];return l;},OP:{RESUME:'RESUME',PAUSE:'PAUSE',PLAY:'PLAY',VERSION:'VERSION'},STATUS_CHANGE_OP:{STATUS:'STATUS',LOGIN:'LOGIN',REINFORM:'REINFORM'},STATUS_CHANGE_EVENT:{playing:'PLAY_STATE_CHANGED',track:'TRACK_CHANGED'},DIAGNOSTIC_EVENT:{ALL_PAUSED:'ALL_PAUSED',ALL_OFFLINE:'ALL_OFFLINE',OFFLINE:'OFFLINE',ONLINE:'ONLINE',SEARCHING:'SEARCHING',HIT:'HIT',MISS:'MISS',RESIGN:'RESIGN',IFRAME_POLLING:'IFRAME_POLLING',RELAUNCH:'RELAUNCH',STATE_CHANGE:'STATE_CHANGE',WRONG_VERSION:'WRONG_VERSION',SERVICE_ERROR:'SERVICE_ERROR',INCORRECT_ONLINE_STATE:'INCORRECT_ONLINE_STATE',LOG_SEND_OP:'LOG_SEND_OP',REQUEUE_OP:'REQUEUE_OP'},ALLOWED_STATUS_PARAMS:{playing:'playing',track:'track',context:'context',client_version:'client_version',start_time:'start_time',expires_in:'expires_in',open_graph_state:'open_graph_state'},ALLOWED_EXTERNAL_CONTEXT_PARAMS:{uri:true,song:true,radio_station:true,album:true,playlist:true,musician:true,song_list:true,offset:true,title:true,request_id:true,listen_with_friends:true,needs_tos:true},LIVE_LISTEN_OP:{NOW_LEADING:'NOW_LEADING',NOW_LISTENING:'NOW_LISTENING',END_SESSION:'END_SESSION',SONG_PLAYING:'SONG_PLAYING',LISTENER_UPDATE:'LISTENER_UPDATE',QUEUE_SESSION:'QUEUE_SESSION',PLAY_ERROR:'PLAY_ERROR',SESSION_UPDATED:'SESSION_UPDATED',QUEUING_SESSION:'QUEUING_SESSION'},MUSIC_BUTTON:{ACTIVATE:'ACTIVATE'},ERROR:{1:'SERVICE_UNAVAILABLE_WITHOUT_PREMIUM',2:'SERVICE_UNAVAILABLE_WITHOUT_PREMIUM_OR_WAIT',3:'SERVICE_UNAVAILABLE_BILLING_ISSUE',4:'SERVICE_UNAVAILABLE_TECHNICAL_ISSUE',5:'AUDIO_AD_PLAYING',99:'SERVICE_TEMPORARILY_UNAVAILABLE',101:'SONG_UNAVAILABLE_WITHOUT_PURCHASE',102:'SONG_UNAVAILABLE_WITHOUT_PREMIUM',103:'SONG_UNAVAILABLE_INDEFINITELY'}};e.exports=a.MusicConstants||j;});
__d("MusicWaterfallLogger",["JSLogger"],function(a,b,c,d,e,f){var g=b('JSLogger'),h=g.create('music_waterfall'),i={click:function(l){j('click',l);},musicLoadedFromClick:function(l){j('music_loaded_from_click',l);},playPause:function(l){j('play_pause',l);}};function j(l,m){h.debug(l+'_debug',m);h.bump(l);h.bump(l+'_'+k(m));}function k(l){return l?l.replace(/\.|-/g,'_'):'';}e.exports=i;});
__d("MusicButton",["Bootloader","copyProperties","CSS","DOM","MusicButtonStore","MusicConstants","MusicEvents","MusicWaterfallLogger","Parent","Tooltip"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('copyProperties'),i=b('CSS'),j=b('DOM'),k=b('MusicButtonStore'),l=b('MusicConstants'),m=b('MusicEvents'),n=b('MusicWaterfallLogger'),o=b('Parent'),p=b('Tooltip'),q=function(r,s,t,u,v,w){this.provider=r;this.buttonElem=s;this.url=t;this.context=u||{};this.mediaType=v;this.setState(this.STATES.OFFLINE);this.tooltip=w||'';m.subscribe(l.MUSIC_BUTTON.ACTIVATE,this.processClick.bind(this));};h(q,{tracksetableTypes:[]});h(q.prototype,{SHOW_LOADING_TIMEOUT:500,HIDE_LOADING_TIMEOUT:4000,RECENTLY_ONLINE_TIMEOUT:6000,STATES:{PLAYING:'music_playing',PAUSED:'music_paused',LOADING:'music_loading',DISABLED:'music_disabled',OFFLINE:'music_offline'},setState:function(r){if(r!==this.STATES.LOADING){this.resetLoadingTimers();this.previousState=this.state||r;}if(r===this.STATES.PLAYING){p.set(this.buttonElem,this.tooltip);}else p.set(this.buttonElem,'');var s=this.buttonElem.parentNode;this.state&&i.removeClass(s,this.state);this.state=r;i.addClass(s,this.state);},isTracksetable:function(r){return q.tracksetableTypes.indexOf(this.mediaType)!==-1;},handleIncomingEvent:function(r,s){clearTimeout(this._showLoadingTimer);if(s&&s.provider&&s.provider!=this.provider)return;switch(r){case l.DIAGNOSTIC_EVENT.ONLINE:case l.STATUS_CHANGE_EVENT.track:case l.STATUS_CHANGE_EVENT.playing:var t=s&&s.track&&s.track.uri,u=s&&s.context&&s.context.uri;if(s&&s.playing&&(l.sameURLs(t,this.url)||l.sameURLs(u,this.url))){this.setState(this.STATES.PLAYING);}else if(this.state===this.STATES.LOADING&&(this.previousState===this.STATES.PAUSED||this.previousState===this.STATES.OFFLINE)){clearTimeout(this._attemptingPlayTimer);this._attemptingPlayTimer=this.setState.bind(this,this.STATES.PAUSED).defer(this.RECENTLY_ONLINE_TIMEOUT,false);}else if(!this._attemptingPlayTimer)this.setState(this.STATES.PAUSED);break;case l.DIAGNOSTIC_EVENT.OFFLINE:this.setState(this.STATES.OFFLINE);break;case l.DIAGNOSTIC_EVENT.ALL_OFFLINE:this.setState(this.STATES.OFFLINE);break;}},processClick:function(r,s){if(s!=this.buttonElem){if(this.state===this.STATES.LOADING)this.previousState&&this.setState(this.previousState);return;}n.click(this.provider);var t=this.isTracksetable()&&o.byClass(this.buttonElem,'music_trackset_container'),u=[];if(t){var v=t.getAttribute('data-trackset-title'),w=this.provider,x=j.scry(t,'.music_button');for(var y=0;y<x.length;y++){var z=k.getButton([x[y].id]);if(z&&z.provider==w&&z.isTracksetable())u.push(z.url);}}if(!a.Music)this.showLoading(true);g.loadModules(['Music'],function(aa){n.musicLoadedFromClick(this.provider);var ba=(t&&u.length>1)?aa.playPauseSongList(this.provider,this.url,u,v,this.context):aa.playPauseSong(this.provider,this.url,this.context);this.showLoading(!ba);}.bind(this));},showLoading:function(r){this.resetLoadingTimers();this._hideLoadingTimer=this._timeout.bind(this,r).defer(this.HIDE_LOADING_TIMEOUT,false);this._showLoadingTimer=this.setState.bind(this,this.STATES.LOADING).defer(this.SHOW_LOADING_TIMEOUT,false);},resetLoadingTimers:function(){clearTimeout(this._hideLoadingTimer);clearTimeout(this._showLoadingTimer);clearTimeout(this._attemptingPlayTimer);this._attemptingPlayTimer=null;},destroy:function(){this.resetLoadingTimers();this.buttonElem=null;},_timeout:function(r){a.Music&&a.Music.reInform([this.provider]);if(!r&&this.state===this.STATES.LOADING)this.setState(this.STATES.PAUSED);}});e.exports=q;});
__d("MusicButtonManager",["DOM","KeyedCallbackManager","Layer","MusicButton","MusicButtonStore","MusicConstants","MusicEvents","Parent","event-extensions","$","copyProperties","ge"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('KeyedCallbackManager'),i=b('Layer'),j=b('MusicButton'),k=b('MusicButtonStore'),l=b('MusicConstants'),m=b('MusicEvents'),n=b('Parent');b('event-extensions');var o=b('$'),p=b('event-extensions').$E,q=b('copyProperties'),r=b('ge'),s=new h(),t=null,u={},v=0;function w(event){var da=p(event).getTarget(),ea=n.byClass(da,'music_button');ea=ea||(!event.getModifiers().any&&x(da));if(!ea)return;return y(ea,event);}function x(da){var ea=n.byClass(da,'music_button_trigger')&&n.byClass(da,'music_button_trigger_group');if(ea){var fa=g.scry(ea,'.music_button');if(fa.length)return fa[0];}return null;}function y(da,event){event&&p(event).stop();m.inform(l.MUSIC_BUTTON.ACTIVATE,da);return false;}function z(da){a.Music&&a.Music.reInform(da);}function aa(da,ea){var fa=k.getButtons();for(var ga in fa)if(fa[ga].noGC||r(ga)){fa[ga].handleIncomingEvent(da,ea);}else k.removeButton(ga);}var ba={init:function(da){if(t)return;t=true;j.tracksetableTypes=da||[];Event.listen(document.body,'click',w);m.subscribe([l.STATUS_CHANGE_EVENT.playing,l.STATUS_CHANGE_EVENT.track,l.DIAGNOSTIC_EVENT.OFFLINE,l.DIAGNOSTIC_EVENT.ALL_OFFLINE,l.DIAGNOSTIC_EVENT.ONLINE],aa);},add:function(da,ea,fa,ga,ha,ia){t||ba.init();var ja=ea.id,ka=k.getButton(ja);if(ka)return ka;ka=k.addButton(ja,new j(da,ea,fa,q({button_id:ja},ga),ha,ia));var la=n.byClass(ea,'uiOverlay');if(la){ka.noGC=true;var ma=i.subscribe('destroy',function(na,oa){if(g.contains(oa.getRoot(),ea)){k.removeButton(ja);i.unsubscribe(ma);}});}if(da&&!u[da])u[da]=function(){var na=Object.keys(u);na.length&&z(na);u={};}.defer();return ka;},addButton:function(da,ea,fa,ga,ha,ia){if(!r(ea))return;var ja=o(ea);return ba.add(da,ja,fa,ga,ha,ia);},asyncAddMusicButton:function(da,ea){da.setAttribute('id','music_button_'+v++);ca(da,ea);},tryAddButtonInDOM:function(da,ea){var fa=r(da);fa&&ca(fa,ea);},tryAddButtonElemInDOM:function(da,ea){da&&ca(da,ea);},addMusicData:function(da,ea,fa,ga,ha,ia){s.setResource(da,{provider:ea,uri:fa,context:ga,media_type:ha,tooltip:ia});}};function ca(da,ea){var fa=g.find(da,'a.button_anchor').getAttribute('href');s.executeOrEnqueue(fa,function(ga){return ba.add(ga.provider,da,ga.uri,ga.context,ga.media_type,ea?ga.tooltip:'');});}e.exports=a.MusicButtonManager||ba;});
__d("legacy:onvisible",["OnVisible"],function(a,b,c,d){a.OnVisible=b('OnVisible');},3);
function FutureSideNav(){FutureSideNav.instance&&FutureSideNav.instance.uninstall();FutureSideNav.instance=this;}FutureSideNav.instance=null;FutureSideNav.getInstance=function(){return FutureSideNav.instance||new FutureSideNav();};copyProperties(FutureSideNav.prototype,{init:function(a,b,c){this.root=a;this.items={};this.sections={};this.editor=null;this.editing=false;this.selected=null;this.loading=null;this.keyParam='sk';this.defaultKey=b;this.uri=URI.getRequestURI();this.ajaxPipe=c;this.ajaxPipeEndpoints={};this.sidecol=true;this._installed=true;this._handlePageTransitions=true;PageTransitions.registerHandler(function(d){return this._handlePageTransitions&&this.handlePageTransition(d);}.bind(this));this._eventHandlers=[];this._arbiterSubscriptions=[Arbiter.subscribe(NavigationMessage.NAVIGATION_COMPLETED,this.navigationComplete.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_FAILED,this.navigationFailed.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_COUNT_UPDATE,this.navigationCountUpdate.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_SELECT,this.navigationSelect.bind(this)),Arbiter.subscribe(ChannelConstants.getArbiterType('nav_update_counts'),this.navigationCountUpdateFromPresence.bind(this))];this._explicitHover=[];this._ensureHover('sideNavItem');this._eventHandlers.push(Event.listen(window,'resize',this._handleResize.bind(this)));this._checkNarrow();this._selectorSubscriptions=[];window.Selector&&this._selectorSubscriptions.push(Selector.subscribe(['open','close'],function(d,e){var f=Parent.byClass(e.selector,'sideNavItem');f&&CSS.conditionClass(f,'editMenuOpened',d==='open');}));onleaveRegister(this.uninstall.bind(this));if(this._pendingSections)this._pendingSections.forEach(function(d){this.initSection.apply(this,d);}.bind(this));},_handleResize:(function(){var a;return function(){a&&clearTimeout(a);a=this._checkNarrow.bind(this).defer(200);};})(),_checkNarrow:function(){CSS.conditionClass(this.root,'uiNarrowSideNav',Vector2.getElementPosition(this.root).x<20);},_ensureHover:function(a){if(ua.ie()<8)Bootloader.loadComponents('explicit-hover',function(){this._explicitHover.push(new ExplicitHover(this.root,a));}.bind(this));},uninstall:function(){if(this._installed){this._installed=false;this._handlePageTransitions=false;this._arbiterSubscriptions.forEach(Arbiter.unsubscribe);this._selectorSubscriptions.forEach(function(a){Selector.unsubscribe(a);});this._eventHandlers.forEach(function(a){a.remove();});this._explicitHover.forEach(function(a){a.uninstall();});}},initSection:function(a,b){if(!this._installed){this._pendingSections=this._pendingSections||[];this._pendingSections.push(arguments);return;}this._initItems(b);this._initSection(a);},addItem:function(a,b){this._initItem(a,b);},_initItems:function(a){var b=function(c,d){var e=this._initItem(c,d);if(c.children)c.children.forEach(function(f){b(f,e);});}.bind(this);$A(a).forEach(function(c){b(c,null);});},_initItem:function(a,b){var c=this.items[a.id]=this._constructItem(a,b);if(c.equals(this.selected)||a.selected)this.setSelected(c);var d=c.getLinkNode();d&&this._eventHandlers.push(Event.listen(d,'click',function(event){return !this.editing;}.bind(this)));return c;},_initSection:function(a){var b=this.sections[a.id]=this._constructSection(a);this._eventHandlers.push(Event.listen(b.node,'click',this.handleSectionClick.bind(this,b)));DOM.scry(b.node,'div.bookmarksMenuButton').forEach(CSS.show);return b;},_constructItem:function(a,b){return new FutureSideNavItem(a,b);},_constructSection:function(a){return new FutureSideNavSection(a);},handleSectionClick:function(a,event){var b=this._getEventTarget(event,'a'),c=this._getItemForNode(b);if(!b){return;}else if(CSS.hasClass(b.parentNode,'uiMenuItem')){this._handleMenuClick(a,c,b.parentNode,event);}else this._handleLinkClick(a,b,event);},_getEventTarget:function(event,a){var b=event.getTarget();if(b.tagName!==a.toUpperCase()){return Parent.byTag(b,a);}else return b;},_handleMenuClick:function(a,b,c,event){if(CSS.hasClass(c,'rearrange'))this.beginEdit(a);},_handleLinkClick:function(a,b,event){if(CSS.hasClass(b,'navEditDone')){this.editing?this.endEdit():this.beginEdit(a);event.kill();}},getItem:function(a){if(this._isCurrentPath(a)){return this._getItemForKey(this._getKey(a.getQueryData())||this.defaultKey);}else return this._getItemForPath(a.getPath());},getNodeForKey:function(a){var b=this._getItemForKey(a);if(b)return b.node;},_isCurrentPath:function(a){return a.getDomain()===this.uri.getDomain()&&a.getPath()===this.uri.getPath();},_getKey:function(a){return a[this.keyParam];},_getItemForNode:function(a){a=Parent.byClass(a,'sideNavItem');return a&&this.items[a.id];},_getItemForKey:function(a){return this._findItem(function(b){return b.matchKey(a);});},_getItemForPath:function(a){return this._findItem(function(b){return b.matchPath(a);});},_findItem:function(a){for(var b in this.items)if(a(this.items[b]))return this.items[b];},removeItem:function(a){if(a&&this.items[a.id]){DOM.remove(a.node);delete this.items[a.id];}},removeItemByKey:function(a){this.removeItem(this._getItemForKey(a));},moveItem:function(a,b,c){var d=DOM.find(a.node,'ul.uiSideNav');(c?DOM.prependContent:DOM.appendContent)(d,b.node);},setLoading:function(a){this.loading&&this.loading.hideLoading();this.loading=a;this.loading&&this.loading.showLoading();},setSelected:function(a){this.setLoading(null);if(this.selected){this.selected.hideSelected();this.selected.getTop().hideChildren();}this.selected=a;if(this.selected){this.selected.showSelected();this.selected.getTop().showChildren();}},handlePageTransition:function(a){var b=this.getItem(a),c=b&&b.endpoint&&this._doPageTransition(b,a);return c;},_doPageTransition:function(a,b){this.setLoading(a);this._sendPageTransition(a.endpoint,copyProperties(this._getTransitionData(a,b),b.getQueryData()));return true;},_sendPageTransition:function(a,b){b.endpoint=a;Arbiter.inform(NavigationMessage.NAVIGATION_BEGIN,{useAjaxPipe:this._useAjaxPipe(a),params:b});},_getTransitionData:function(a,b){var c={};c.sidecol=this.sidecol;c.path=b.getPath();c[this.keyParam]=a.textKey;c.key=a.textKey;return c;},_useAjaxPipe:function(a){return this.ajaxPipe||this.ajaxPipeEndpoints[a];},navigationComplete:function(){this.loading&&this.setSelected(this.loading);},navigationFailed:function(){this.setLoading(null);},navigationSelect:function(a,b){var c=this._getItemForKey(this._getKey(b));if(b.asLoading){this.setLoading(c);}else this.setSelected(c);},navigationCountUpdate:function(a,b){var c=this._getItemForKey(b&&b.key);if(c)if(typeof b.count!=="undefined"){c.setCount(b.count,b.hide);}else if(typeof b.increment!=="undefined")c.incrementCount(b.increment,b.hide);},navigationCountUpdateFromPresence:function(a,b){b=b.obj;if(b)if(!b.class_name||b.class_name&&CSS.hasClass(this.root,b.class_name))if(b.items)for(var c=0;c<b.items.length;c++)this.navigationCountUpdate(a,b.items[c]);},beginEdit:function(a){if(!this.editing){this.editing=true;CSS.addClass(this.root,'editMode');this._updateTrackingData();Bootloader.loadComponents('sortable-side-nav-js',this._initEditor.bind(this,a));}},endEdit:function(){if(this.editing){CSS.removeClass(this.root,'editMode');this.editor.endEdit();this.editor=null;this.editing=false;this._updateTrackingData();}},_updateTrackingData:function(a){var b=this.root.getAttribute('data-gt')||"{}";try{b=JSON.parse(b);if(this.editing){b.editing=true;}else delete b.editing;this.root.setAttribute('data-gt',JSON.stringify(b));}catch(c){}},_initEditor:function(a){this.editor=a.getEditor();this.editor.beginEdit();}});function FutureSideNavSection(a){this.id=a.id;this.node=this.node||$(a.id);this.editEndpoint=a.editEndpoint;}copyProperties(FutureSideNavSection.prototype,{equals:function(a){return a&&a.id===this.id;},getEditor:function(){return new SortableSideNav(DOM.find(this.node,'ul.uiSideNav'),this.editEndpoint);}});function FutureSideNavItem(a,b){this.id=a.id;this.up=b;this.endpoint=a.endpoint;this.type=a.type;this.node=a.node||$(a.id);this.paths=a.path?$A(a.path):[];this.keys=a.key?$A(a.key):[];var c=this._findKeys(this.keys);this.numericKey=c.numeric||this.keys[0];this.textKey=c.text||this.keys[0];this._pathPattern=this._buildRegex(this.paths);this._keyPattern=this._buildRegex(this.keys);this.hideLoading();this.hideSelected();}copyProperties(FutureSideNavItem.prototype,{equals:function(a){return a&&a.id===this.id;},getLinkNode:function(){return (DOM.scry(this.node,'a.item')[0]||DOM.scry(this.node,'a.subitem')[0]);},matchPath:function(a){return this._matchInput(this._pathPattern,a);},matchKey:function(a){return this._matchInput(this._keyPattern,a);},_matchInput:function(a,b){var c=a&&a.exec(b);return c&&c.slice(1);},getTop:function(){return this.isTop()?this:this.up.getTop();},isTop:function(a){return !this.up;},setCount:function(a,b){return this._updateCount(a,true);},incrementCount:function(a,b){return this._updateCount(a,false);},_updateCount:function(a,b,c){var d=DOM.scry(this.node,'span.count')[0],e=d&&DOM.scry(d,'span.countValue')[0];if(e){var f=b?0:parseInt(DOM.getText(e),10),g=Math.max(0,f+a),h=this.isTop()?'hidden':'hiddenSubitem';DOM.setContent(e,g);c&&CSS.conditionClass(this.node,h,!g);CSS.conditionClass(d,'hidden_elem',!g);if(this.isTop()){var i=DOM.scry(this.node,'div.linkWrap')[0];if(i){CSS.conditionClass(i,'noCount',!g);CSS.conditionClass(i,'hasCount',g);}}}Arbiter.inform('NavigationMessage.COUNT_UPDATE_DONE');},showLoading:function(){CSS.addClass(this.node,'loading');},hideLoading:function(){CSS.removeClass(this.node,'loading');},showSelected:function(){CSS.addClass(this.node,'selectedItem');CSS.hasClass(this.node,'hider')&&CSS.addClass(this._getExpanderParent(),'expandedMode');},hideSelected:function(){CSS.removeClass(this.node,'selectedItem');},showChildren:function(){CSS.addClass(this.node,'open');},hideChildren:function(){CSS.removeClass(this.node,'open');},_getExpanderParent:function(){return Parent.byClass(this.node,'expandableSideNav');},_buildRegex:function(a){if(a.length){var b=a.map(function(c){if(typeof c==="string"){return c.replace(/([^a-z0-9_])/ig,'\\$1');}else if(c&&c.regex)return c.regex;});return new RegExp('^(?:'+b.join('|')+')$');}},_findKeys:function(a){var b=/^(app|group|fl)_/,c={};for(var d=0;d<a.length;d++){var e=b.test(a[d]);if(e&&!c.numeric){c.numeric=a[d];}else if(!e&&!c.text)c.text=a[d];if(c.numeric&&c.text)break;}return c;}});
function fbpage_set_fan_status(a,b,c,d,e,f,g){e=e?e:function(j){_fbpage_show_change_status_feedback(a,j.getPayload());};var h={fbpage_id:b,add:c,reload:d};if(g!=null)copyProperties(h,g);var i=new AsyncRequest().setURI('/ajax/pages/fan_status.php').setData(h).setNectarModuleDataSafe(a).setHandler(e);if(f)i.setErrorHandler(f);i.send();return false;}function fbpage_set_favorite_status(a,b,c){var d=function(){_fbpage_show_change_status_feedback(a,this.getUserData());},e={fbpage_id:b,add:c},f=new AsyncRequest().setMethod('POST').setURI('/ajax/pages/favorite_status.php').setData(e);new Dialog().setAsync(f).setCloseHandler(d).show();return false;}function _fbpage_show_change_status_feedback(a,b){if(!b||!a)return;if(b.reload){fbpage_reload_on_fan_status_changed(b.preserve_tab);}else fbpage_redraw_on_fan_status_changed(a,b.feedback);}function fbpage_reload_on_fan_status_changed(a){var b=URI.getRequestURI();if(a){var c=FutureSideNav.getInstance().selected.textKey;if(!b.getQueryData().sk&&c)b.addQueryData({sk:c});}window.location.href=b;}function fbpage_redraw_on_fan_status_changed(a,b){if(!b)return;if(Parent.byClass(a,'fbTimelineEscapeSectionItem'))a=Parent.byClass(a,'fan_status_inactive')||a;var c=DOM.create('span',{className:'fan_status_inactive'},b);a.parentNode.replaceChild(c,a);var d=function(){if(data.can_repeat_action)c.parentNode.replaceChild(a,c);};animation(c).duration(3000).checkpoint().to('backgroundColor','#FFFFFF').duration(1000).ondone(d).go();}function fbpage_toggle_like_on_fan_status_changed(a,b){var c=$('liked_pages_like_action_'+a),d=$('liked_pages_undo_action_'+a);CSS.conditionClass(c,'hidden_elem',b);CSS.conditionClass(d,'hidden_elem',!b);}function fbpage_inform_arbiter_on_change(a,b){if(window.PageLikeButton)if(b){PageLikeButton.informLike(a);PageLikeButton.informLikeSuccess(a);}else PageLikeButton.informUnlike(a);}
__d("PhotoEverstoreLogger",["event-extensions","AsyncRequest","copyProperties","ImageUtils"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('copyProperties'),i=b('ImageUtils'),j={BATCH_WINDOW_MS:500,storedLog:[]};function k(){}h(k,{_log:function(m){j.storedLog.push(m);if(j.storedLog.length==1)setTimeout(l,j.BATCH_WINDOW_MS,false);},logImmediately:function(m){k._log(m);},registerForLogging:function(m){if(i.hasLoaded(m)){k._log(m.src);}else Event.listen(m,'load',function(event){k._log(m.src);});}});function l(){var m=j.storedLog;j.storedLog=[];var n=JSON.stringify(m);new g().setURI('/ajax/photos/logging/everstore_logging.php').setData({loggedUrls:n}).setMethod('POST').setOption('suppressErrorHandlerWarning',true).setOption('suppressErrorAlerts',true).send();}e.exports=k;});
__d("PhotoSessionLog",["AsyncRequest","Run","Vector","copyProperties"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Run'),i=b('Vector'),j=b('copyProperties');function k(){}j(k,{UNKNOWN:0,ESC:1,X:2,OUTSIDE:3,UNLOAD:4,NAVIGATE:5,AGGREGATE:6,LEAVE:7,PERMALINK:0,SNOWLIFT:6,AGGREGATION_COUNT:20,set:null,time:null,views:0,fbidList:[],details:{},width:0,height:0,first:false,last:false,logIds:false,version:null,buttonLikes:0,pagingAction:'',faceTagImpressions:0,cycle:false,endOfRelevant:false,relevantCount:0,initLogging:function(l){this.set=null;this.time=new Date();this.views=0;this.hiResLoads=0;this.fullScreenViews={};this.first=true;this.last=false;this.logIds=false;this.version=l;this.buttonLikes=0;this.pagingAction='';this.faceTagImpressions=0;this.cycle=false;this.endOfRelevant=false;this.relevantCount=0;if(l===k.SNOWLIFT){var m=i.getViewportDimensions();this.width=m.x;this.height=m.y;}},setLogFbids:function(l){this.logIds=l;},setPhotoSet:function(l){this.set=l;},addButtonLike:function(){this.buttonLikes++;},setPagingAction:function(l){this.pagingAction=l;},addFaceTagImpression:function(){this.faceTagImpressions++;},setCycle:function(l){this.cycle=l;},setEndOfRelevant:function(l){this.endOfRelevant=l;},setRelevantCount:function(l){this.relevantCount=l;},setEndMetrics:function(l){this.endMetrics=l;},addPhotoView:function(l,m,n){if(this.logIds&&this.views>=this.AGGREGATION_COUNT)this.logPhotoViews(this.AGGREGATE);this.views++;if(l)this.fbidList.push([l.fbid,l.owner,Date.now()]);if(m)this.hiResLoads++;if(n)this.fullScreenViews[l.fbid]=true;},logEnterFullScreen:function(l){this.fullScreenViews[l]=true;},addDetailData:function(l,m){if(!this.details[l])this.details[l]={t:m.num_tags,l:m.has_location,c:m.has_caption,cm:m.comment_count,lk:m.like_count,w:m.width,h:m.height,ad:'{}',p:this.pagingAction};},updateAdData:function(l,m){if(this.details[l])this.details[l].ad=JSON.stringify(m);},logPhotoViews:function(l){if((!this.views)||(this.version===k.SNOWLIFT&&l==k.LEAVE))return;if(l!=this.AGGREGATE)this.last=true;var m={set:this.set,time:new Date()-this.time,fbids:this.logIds?this.fbidList:[],details:this.logIds?this.details:{},first:this.first,last:this.last,close:l?l:this.UNKNOWN,button_likes:this.buttonLikes,version:this.version,face_imp:this.faceTagImpressions,endmetric:this.endMetrics,cycle:this.cycle,end_relev:this.endOfRelevant,relev_count:this.relevantCount};if(this.version===k.SNOWLIFT){var n=i.getViewportDimensions();m.width=n.x||this.width;m.height=n.y||this.height;if(this.hiResLoads>0)m.hires_loads=this.hiResLoads;if(this.last){var o=Object.keys(this.fullScreenViews).length;if(o>0)m.fullscreen=o;}}new g().setURI('/ajax/photos/logging/session_logging.php').setAllowCrossPageTransition(true).setOption('asynchronous',(l!=k.UNLOAD)).setOption('suppressErrorHandlerWarning',true).setData(m).send();this.views=0;this.hiResLoads=0;this.fbidList=[];this.details={};this.first=false;this.buttonLikes=0;if(this.last){this.set=null;this.logIds=false;this.fullScreenViews={};}}});h.onUnload(function(){k.logPhotoViews(k.UNLOAD);});h.onLeave(function(){k.logPhotoViews(k.LEAVE);});e.exports=k;});
__d("PhotosConst",[],function(a,b,c,d,e,f){var g={VIEWER_PERMALINK:0,VIEWER_SNOWLIFT:6,VIEWER_VAULTBOX:8,BULK_EDITOR:3,FLASH_UPLOADER:4,HTML5_UPLOADER:10,SIZE_NORMAL:'n',PIC_NORMAL_FBX_SIZE:180};e.exports=g;});
__d("PhotosUtils",["copyProperties","Rect","Vector"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('Rect'),i=b('Vector');function j(){}g(j,{getNearestBox:function(k,l){var m=Infinity,n=null;for(var o in k){var p=k[o];if(p.contains(l)){var q=l.distanceTo(p.getCenter());if(q<m){m=q;n=o;}}}return n;},absoluteToNormalizedPosition:function(k,l){var m=i.getElementPosition(k),n=i.getElementDimensions(k),o=l.sub(m).mul(100/n.x,100/n.y);o.domain='pure';return o;},normalizedToAbsolutePosition:function(k,l){var m=i.getElementPosition(k),n=i.getElementDimensions(k),o=l.mul(n.x/100,n.y/100).add(m);o.domain='document';return o;},isFacebox:function(k){return k.match(/^face:/);}});e.exports=j;});
__d("UIPagelet",["AjaxPipeRequest","AsyncRequest","DOM","HTML","ScriptPathState","URI","copyProperties","ge"],function(a,b,c,d,e,f){var g=b('AjaxPipeRequest'),h=b('AsyncRequest'),i=b('DOM'),j=b('HTML'),k=b('ScriptPathState'),l=b('URI'),m=b('copyProperties'),n=b('ge');function o(p,q,r,s){this._id=p||null;this._element=n(p||i.create('div'));this._src=q||null;this._context_data=r||{};this._data=s||{};this._handler=bagofholding;this._request=null;this._use_ajaxpipe=false;this._is_bundle=true;this._allow_cross_page_transition=false;this._append=false;return this;}o.loadFromEndpoint=function(p,q,r,s){s=s||{};var t='/ajax/pagelet/generic.php/';if(s.intern)t='/intern'+t;var u=(t+p).replace(/\/+/g,'/');if(s.subdomain)u=l(u).setSubdomain(s.subdomain);var v=new o(q,u,r).setUseAjaxPipe(s.usePipe).setPageletCacheMiss(s.pageletCacheMiss).setBundleOption(p.substring(0,8)!='/intern/'&&s.bundle!==false).setAppend(s.append).setJSNonBlock(s.jsNonblock).setForceFinish(s.forceFinish).setAutomatic(s.automatic).setDisplayCallback(s.displayCallback).setConstHeight(s.constHeight).setAllowCrossPageTransition(s.crossPage);s.handler&&v.setHandler(s.handler);v.go();return v;};m(o.prototype,{getElement:function(p){p=p||false;if(p)this._element=n(this._id);return this._element;},setHandler:function(p){this._handler=p;return this;},go:function(p,q){if(arguments.length>=2||typeof p=='string'){this._src=p;this._data=q||{};}else if(arguments.length==1)this._data=p;this.refresh();return this;},setAllowCrossPageTransition:function(p){this._allow_cross_page_transition=p;return this;},setBundleOption:function(p){this._is_bundle=p;return this;},refresh:function(p){var q=function(t){this._request=null;if(p&&this._id)this._element=n(this._id);var u=j(t.getPayload());if(this._append){i.appendContent(this._element,u);}else i.setContent(this._element,u);this._handler();}.bind(this);if(this._use_ajaxpipe){k.setIsUIPageletRequest(true);this._request=new g();this._request.setCanvasId(this._id).setAppend(this._append).setConstHeight(this._constHeight).setJSNonBlock(this._jsNonblock).setForceFinish(this._forceFinish).setAutomatic(this._automatic).setPageletCacheMiss(this._pageletCacheMiss).setDisplayCallback(this._displayCallback);}else{var r=this._displayCallback;this._request=new h().setMethod('GET').setReadOnly(true).setOption('bundle',this._is_bundle).setHandler(function(t){if(r){r(q.curry(t));}else q(t);});}var s={};m(s,this._context_data);m(s,this._data);this._request.setURI(this._src).setAllowCrossPageTransition(this._allow_cross_page_transition).setData({data:JSON.stringify(s)}).send();return this;},cancel:function(){if(this._request)this._request.abort();},setUseAjaxPipe:function(p){this._use_ajaxpipe=!!p;return this;},setPageletCacheMiss:function(p){this._pageletCacheMiss=p;return this;},setAppend:function(p){this._append=!!p;return this;},setJSNonBlock:function(p){this._jsNonblock=!!p;return this;},setForceFinish:function(p){this._forceFinish=!!p;return this;},setAutomatic:function(p){this._automatic=!!p;return this;},setDisplayCallback:function(p){this._displayCallback=p;return this;},setConstHeight:function(p){this._constHeight=!!p;return this;}});e.exports=o;});
__d("PhotoStreamCache",["array-extensions","HTML","PhotosConst","PhotoEverstoreLogger","Rect","UIPagelet","URI","Vector","copyProperties","createArrayFrom"],function(a,b,c,d,e,f){b('array-extensions');var g=b('HTML'),h=b('PhotosConst'),i=b('PhotoEverstoreLogger'),j=b('Rect'),k=b('UIPagelet'),l=b('URI'),m=b('Vector'),n=b('copyProperties'),o=b('createArrayFrom');function p(){}n(p,{ERROR:'error',HTML:'html',IMAGE_DATA:'image',EXTRA:'extra',BUFFER_SIZE:3,INIT_BUCKET_SIZE:4,FULL_BUCKET_SIZE:12,ERROR_ID:-1,INIT_PLACEHOLDER:1});n(p.prototype,{init:function(q,r){this.version=q;this.pageletName=r;this.bufferSize=p.BUFFER_SIZE;this.fullBucketSize=p.FULL_BUCKET_SIZE;this.initError=false;this.isActive=true;this.leftLock=false;this.rightLock=false;this.reset();},reset:function(){this.cache={image:{},extra:{},html:{}};this.fbidList=[];this.loaded=false;this.allLoaded=false;this.permalinkMap={};this.position=0;this.totalCount=null;this.firstCursor=null;this.firstCursorIndex=null;},waitForInitData:function(){this.fbidList.push(p.INIT_PLACEHOLDER);},destroy:function(){this.reset();this.isActive=false;},isLoaded:function(){return this.loaded;},canPage:function(){if(!this.isLoaded())return false;if(this.totalCount!==null)return this.totalCount>1;return this.getLength()>1;},errorInCurrent:function(){if(this.initError){return true;}else if(!this.isLoaded())return false;return this.checkErrorAt(this.getCursor());},getLength:function(){return this.fbidList.length;},getPhotoSet:function(){return this.photoSetQuery.set;},getPhotoSetQuery:function(){return this.photoSetQuery;},getCurrentImageData:function(){return this.getImageData(this.getCursor());},getImageData:function(q){return this.getCacheContent(q,p.IMAGE_DATA);},getCurrentHtml:function(){return this.getCacheContent(this.getCursor(),p.HTML);},getCurrentExtraData:function(){return this.getCacheContent(this.getCursor(),p.EXTRA);},getCacheContent:function(q,r){if(!q||q===p.ERROR_ID||q===p.INIT_PLACEHOLDER)return null;return this.cache[r][q];},getCursorPos:function(){return this.position;},getCursor:function(){if(this.position>=0&&this.position<this.getLength())return this.fbidList[this.position];return null;},getCursorForURI:function(q){return this.permalinkMap[q];},calculatePositionForMovement:function(q){var r=this.position+q;if(this.allLoaded){var s=this.getLength();r=(s+r%s)%s;}return r;},isValidMovement:function(q){if(!this.isLoaded()||!this.canPage())return false;var r=this.calculatePositionForMovement(q);return this.getCursor()>0||(r>=0&&r<this.getLength());},moveCursor:function(q){if(!this.isValidMovement(q))return;this.position=this.calculatePositionForMovement(q);if(q!==0)this.loadMoreIfNeccessary(q>0);},checkErrorAt:function(q){if(!this.isLoaded())return false;if(q===p.ERROR_ID)return true;return false;},getRelativeMovement:function(q){for(var r=0;r<this.getLength();r++)if(this.fbidList[r]==q)return r-this.position;return null;},preloadImages:function(q){var r,s,t=this.getLength(),u=this.cache.image,v=p.BUFFER_SIZE;if(t>v*2){r=(this.position+t-v%t)%t;s=(this.position+v)%t;}else{r=0;s=t-1;}while(r!=s){var w=this.fbidList[r];if(u[w]&&u[w].url)if(q&&!u[w].resource){u[w].resource=new Image();u[w].resource.src=u[w].url;if(u[w].everstoreLogThis===true)i.logImmediately(u[w].resource.src);}else if(!q&&!u[w].small){u[w].small=new Image();u[w].small.src=u[w].smallurl||u[w].url;if(u[w].everstoreLogThis===true)i.logImmediately(u[w].small.src);}r=(r+1)%t;}},loadMoreIfNeccessary:function(q){if(this.allLoaded||(q&&this.rightLock)||(!q&&this.leftLock))return;var r=q?1:-1,s=this.position+this.bufferSize*r;if(s<0&&!this.checkErrorAt(this.getEndCursor(false))){this.leftLock=true;this.fetch(this.fullBucketSize,false);}else if(s>this.getLength()&&!this.checkErrorAt(this.getEndCursor(true))){this.rightLock=true;this.fetch(this.fullBucketSize,true);}},getEndCursor:function(q){return q?this.fbidList[this.getLength()-1]:this.fbidList[0];},calculateRelativeIndex:function(q,r,s){if(!this.totalCount)return null;var t=this.fbidList.indexOf(r),u=this.fbidList.indexOf(s);if(t===-1||u===-1)return null;var v=u-t;return (q+v+this.totalCount)%this.totalCount;},calculateDistance:function(q,r){var s=this.fbidList.indexOf(q),t=this.fbidList.indexOf(r);if(s===-1||t===-1)return null;return (t-s+this.getLength())%this.getLength();},fetch:function(q,r){var s=this.getEndCursor(r),t=n({cursor:s,version:this.version,end:this.getEndCursor(!r),fetchSize:r?q:-1*q,relevant_count:this.relevantCount},this.photoSetQuery);if(this.totalCount&&this.firstCursorIndex!==null){t.total=this.totalCount;t.cursorIndex=this.calculateRelativeIndex(this.firstCursorIndex,this.firstCursor,s);}k.loadFromEndpoint(this.pageletName,null,t,{usePipe:true,jsNonblock:true,crossPage:true});},storeToCache:function(q){var r={};if(!this.isActive)return r;if('error' in q){this.processErrorResult(q.error);r.error=true;return r;}if('init' in q){this.processInitResult(q.init);r.init={logids:q.init.logids,fbid:q.init.fbid,loggedin:q.init.loggedin,fromad:q.init.fromad};}if('image' in q){this.processImageResult(q.image);r.image=true;}if('data' in q){this.processDataResult(q.data);r.data=true;}return r;},processInitResult:function(q){if(this.loaded)return;this.loaded=true;this.photoSetQuery=q.query;if(q.bufferSize)this.bufferSize=q.bufferSize;if(q.fullBucketSize)this.fullBucketSize=q.fullBucketSize;if(this.fbidList.length===0){this.fbidList.push(q.fbid);this.rightLock=true;}else{var r=this.fbidList.indexOf(p.INIT_PLACEHOLDER);if(r!=-1)this.fbidList[r]=q.fbid;}this.firstCursor=q.fbid;if('initIndex' in q&&'totalCount' in q){this.firstCursorIndex=q.initIndex;this.totalCount=q.totalCount;}if(this.version==h.VIEWER_PERMALINK)this.fetch(p.INIT_BUCKET_SIZE,true);},processImageResult:function(q){for(var r in q){if(r===this.firstCursor&&q[r].everstoreLogThis)i.logImmediately(q[r].url);this.cache.image[r]=q[r];if(q[r].dimensions)this.cache.image[r].dimensions=m.deserialize(q[r].dimensions);if(q[r].smalldims)this.cache.image[r].smalldims=m.deserialize(q[r].smalldims);this.permalinkMap[l(q[r].info.permalink).getUnqualifiedURI().toString()]=r;}},attachToFbidsList:function(q,r,s){if(this.allLoaded)return;if(r===-1){for(var t=q.length-1;t>=0;t--){this.fbidList.unshift(q[t]);this.position++;}this.leftLock=false;}else{for(var u=0;u<q.length;u++)this.fbidList.push(q[u]);this.rightLock=false;}if(s)this.setAllLoaded();},setAllLoaded:function(){this.allLoaded=true;if(this.getCursor()===null)this.position=this.calculatePositionForMovement(0);},processDataResult:function(q){for(var r in q){if(!this.cache.html[r])this.cache.html[r]={};for(var s in q[r].html){var t=q[r].html[s];if(typeof t==='string')t=g(t).getRootNode();this.cache.html[r][s]=o(t.childNodes);}if(!('extra' in q[r])){this.cache.extra[r]=null;continue;}this.cache.extra[r]={tagRects:{}};if(!Array.isArray(q[r].extra.tagRects))for(var u in q[r].extra.tagRects)if(q[r].extra.tagRects[u])this.cache.extra[r].tagRects[u]=j.deserialize(q[r].extra.tagRects[u]);Object.keys(q[r].extra).forEach(function(v){if(v=='tagRects')return;this.cache.extra[r][v]=q[r].extra[v];}.bind(this));}},processErrorResult:function(q){if(!this.isLoaded()){this.initError=true;return;}var r=q.side,s=[p.ERROR_ID];this.attachToFbidsList(s,r);},setTotalCount:function(q){this.totalCount=q;},setFirstCursorIndex:function(q){this.firstCursorIndex=q;}});e.exports=p;});
__d("ModalLayer",["event-extensions","function-extensions","Arbiter","CSS","DataStore","DOM","DOMQuery","ScrollAwareDOM","Style","URI","UserAgent","Vector","copyProperties","csx","cx","debounce"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('DataStore'),j=b('DOM'),k=b('DOMQuery'),l=b('ScrollAwareDOM'),m=b('Style'),n=b('URI'),o=b('UserAgent'),p=b('Vector'),q=b('copyProperties'),r=b('csx'),s=b('cx'),t=b('debounce'),u=[],v=null,w=null;function x(){if(!w)w=k.scry(document.body,"._li")[0];return w;}function y(da){var ea={position:p.getScrollPosition()},fa=da.offsetTop-ea.position.y;h.addClass(da,"_31e");m.set(da,'top',fa+'px');g.inform('reflow');ea.listener=l.subscribe('scroll',function(ga,ha){if(k.contains(da,ha.target)){var ia=da.offsetTop-ha.delta.y;m.set(da,'top',ia+'px');ea.position=ea.position.add(ha.delta);return false;}});i.set(da,'ModalLayerData',ea);if(o.firefox()<13)z.curry(da).defer();}function z(da){k.scry(da,'div.swfObject').forEach(function(ea){var fa=ea.getAttribute('data-swfid');if(fa&&window[fa]){var ga=window[fa];ga.addParam('autostart','false');ga.addParam('autoplay','false');ga.addParam('play','false');ga.addVariable('video_autoplay','0');ga.addVariable('autoplay','0');ga.addVariable('play','0');var ha=n(ga.getAttribute('swf'));ha.addQueryData({autoplay:'0'});ha.setPath(ha.getPath().replace('autoplay=1','autoplay=0'));ga.setAttribute('swf',ha.toString());ga.write(ea);}});}function aa(da,ea){var fa=i.get(da,'ModalLayerData');if(fa){var ga=function(){h.removeClass(da,"_31e");m.set(da,'top','');if(ea){var ja=k.getDocumentScrollElement();ja.scrollTop=fa.position.y;}g.inform('reflow');fa.listener.unsubscribe();fa.listener=null;i.remove(da,'ModalLayerData');};if(ea&&o.osx()>=10.8&&o.safari()>=536.25&&!o.chrome()){var ha=j.create('div',{className:"_42w"});m.set(ha,'height',da.offsetHeight+'px');j.appendContent(document.body,ha);var ia=k.getDocumentScrollElement();ia.scrollTop=fa.position.y;ea=false;!function(){ga();j.remove(ha);}.defer();}else ga();}if(o.ie()<7)m.set(da,'height','');}function ba(){var da=u[u.length-1],ea=function(fa){var ga=-fa.offsetTop+Math.max(da.offsetHeight,da.scrollHeight);m.set(fa,'height',ga+'px');};u.slice(0,-1).reverse().map(function(fa){return fa.getLayerRoot();}).concat(x()).forEach(ea);}function ca(da){this._layer=da;}q(ca.prototype,{_subscription:null,enable:function(){if(!x())return;this._subscription=this._layer.subscribe(['show','hide'],function(da){da=='show'?this._addModal():this._removeModal();}.bind(this));if(this._layer.isShown())this._addModal();},disable:function(){if(!x())return;this._subscription.unsubscribe();this._subscription=null;if(this._layer.isShown())this._removeModal();},_addModal:function(){h.addClass(this.getLayerRoot(),"_3qw");var da=u[u.length-1],ea=da?da.getLayerRoot():x();y(ea);var fa=k.getDocumentScrollElement();fa.scrollTop=0;if(o.ie()<7){if(!u.length){h.addClass(document.documentElement,"_31d");v=Event.listen(window,'resize',t(ba,100));}ba.defer();}u.push(this);},_removeModal:function(){h.removeClass(this.getLayerRoot(),"_3qw");var da=this===u[u.length-1];u.remove(this);var ea=u[u.length-1];!function(){aa(ea?ea.getLayerRoot():x(),da);if(o.ie()<7){if(!u.length){h.removeClass(document.documentElement,"_31d");v.remove();v=null;}ba.defer();}}.defer(200,false);},getLayerRoot:function(){return this._layer.getRoot();}});e.exports=ca;});
__d("DialogX",["event-extensions","function-extensions","AccessibleLayer","Arbiter","ArbiterMixin","Class","DOM","Layer","LayerButtons","LayerFormHooks","ModalLayer","Style","UserAgent","Vector","copyProperties","cx","debounce","getOverlayZIndex"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('AccessibleLayer'),h=b('Arbiter'),i=b('ArbiterMixin'),j=b('Class'),k=b('DOM'),l=b('Layer'),m=b('LayerButtons'),n=b('LayerFormHooks'),o=b('ModalLayer'),p=b('Style'),q=b('UserAgent'),r=b('Vector'),s=b('copyProperties'),t=b('cx'),u=b('debounce'),v=b('getOverlayZIndex');function w(y,z){this.parent.construct(this,y,z);}j.extend(w,l);s(w,i);s(w.prototype,{_modal:false,_ie:null,_wrapper:null,_configure:function(y,z){this.parent._configure(y,z);if(y.modal){this._modal=true;this.enableBehavior(o);}if(y.autohide)var aa=this.subscribe('show',function(){aa.unsubscribe();this.hide.shield(this).defer(y.autohide);}.bind(this));},_getDefaultBehaviors:function(){return this.parent._getDefaultBehaviors().concat([x,g,m,n]);},_buildWrapper:function(y,z){var aa=k.create('div',{className:"_t"},z),ba;this._ie=q.ie();if(this._ie>6&&this._ie<9){ba=[k.create('div',{className:"_u"}),k.create('div',{className:"_v"}),k.create('div',{className:"_w"}),k.create('div',{className:"_x"}),k.create('div',{className:"_y"}),k.create('div',{className:"_z"}),aa];}else ba=k.create('div',{className:"_1yu"},aa);this._wrapper=k.create('div',{className:"_1yv"},ba);this.setWidth(y.width);return k.create('div',{className:"_10"},this._wrapper);},getContentRoot:function(){return this._wrapper;},updatePosition:function(){var y=r.getViewportDimensions().y-r.getElementDimensions(this._wrapper).y,z;if(y<250){if(y>80){z=y/2;}else z=40;}else z=125;if(!this._modal&&(!this._ie||this._ie<7))if(z<=40){this.enableBehavior(o);}else this.disableBehavior(o);if(this._ie<7){var aa=r.getScrollPosition().y;p.set(this._wrapper,'top',z+aa+'px');}else p.set(this._wrapper,'margin-top',z+'px');if(this._causalElement){var ba=v(this._causalElement,this.getInsertParent());p.set(this.getRoot(),'z-index',ba>200?ba:'');}},setWidth:function(y){y=Math.floor(y);if(this._ie>6&&this._ie<9)y-=20;p.set(this._wrapper,'width',y+'px');}});function x(y){this._layer=y;}s(x.prototype,{_subscription:null,_resize:null,enable:function(){this._subscription=this._layer.subscribe(['show','hide'],function(y){if(y==='show'){this._attach();h.inform('layer_shown',{type:'DialogX'});}else{this._detach();h.inform('layer_hidden',{type:'DialogX'});}}.bind(this));},disable:function(){this._subscription.unsubscribe();this._subscription=null;this._resize&&this._detach();},_attach:function(){this._layer.updatePosition();this._resize=Event.listen(window,'resize',u(this._layer.updatePosition.bind(this._layer)));},_detach:function(){this._resize.remove();this._resize=null;}});e.exports=w;});
__d("AsyncDialog",["AsyncRequest","Bootloader","copyProperties","CSS","cx","DialogX","DOM","Env","Parent","tx","URI"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Bootloader'),i=b('copyProperties'),j=b('CSS'),k=b('cx'),l=b('DialogX'),m=b('DOM'),n=b('Env'),o=b('Parent'),p=b('tx'),q=b('URI'),r=new l({width:465,className:"_q"},m.create('div',{className:"_r"},"Loading...")),s=1,t=[],u=0;function v(){u--;if(!u)r.hide();}function w(y,z){var aa=s++;t[aa]=z;i(y.getData(),{__asyncDialog:aa});var ba=false;u++;r.show();function ca(){if(!ba)v();}y.setInterceptHandler(function(da){ba=true;v();});y.setFinallyHandler(function(da){var ea=da.getPayload();if(ea&&ea.asyncURL)x.send(new g(ea.asyncURL));ca();});y.setAbortHandler(ca);y.send();}var x={send:function(y,z){w(y,z||bagofholding);},bootstrap:function(y,z,aa){if(!y)return;var ba=o.byClass(z,'stat_elem')||z;if(ba&&j.hasClass(ba,'async_saving'))return false;var ca=new q(y).getQueryData();ca.causal_element=z?m.getID(z):null;var da=aa==='dialog',ea=new g().setURI(y).setData(ca).setMethod(da?'GET':'POST').setReadOnly(da).setRelativeTo(z).setStatusElement(ba).setNectarModuleDataSafe(z);if(n.is_desktop){h.loadModules(['FbdDialogProvider'],function(fa){fa.sendDialog(ea,x.send);});return;}x.send(ea);},respond:function(y,z){var aa=t[y];if(aa){aa(z);delete t[y];}},getLoadingDialog:function(){return r;}};e.exports=x;});
__d("PhotoSnowliftAds",["array-extensions","event-extensions","copyProperties","CSS","csx","DataStore","DOM","PhotoSessionLog","UIPagelet","URI","Vector"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('copyProperties'),h=b('CSS'),i=b('csx'),j=b('DataStore'),k=b('DOM'),l=b('PhotoSessionLog'),m=b('UIPagelet'),n=b('URI'),o=b('Vector'),p={DEFAULT_UNITS_REFRESH_RATE:30000,UNITS_REGISTER_DELAY:1000,root:null,availableDimensions:null,loadQuery:null,lastLoadTime:0,minAds:100,units:null,isLogAdData:null,refreshUnitsRate:null,adsStatus:'null',adsEvents:{},resetEvents:function(){this.adsStatus='reset';this.adsEvents={};},addEvent:function(q,r){if(r)this.adsStatus=q;var s=Date.now();this.adsEvents[q+'_'+s]=s;},init:function(q,r,s){this.reset();this.root=q;this.snowlift=r;this.minAds=s.min_ads;this.addEvent('init',true);this.refreshUnitsRate=p.DEFAULT_UNITS_REFRESH_RATE;if(s.refresh_fast)this.refreshUnitsRate=s.refresh_rate;},reset:function(){this.lastLoadTime=0;this.units=[];this.resetEvents();this.addEvent('reset',true);},resize:function(q){this.availableDimensions=q;this.loadQuery=this.snowlift.getLoadQuery();this.processResize();},calculateUnitSizes:function(q,r){var s={};q.forEach(function(t){var u=t.root.firstChild.offsetHeight;t.units.forEach(function(w){if(!h.hasClass(w,'hidden')){var x=this.getHeight(w.firstChild,r);u-=x;}}.bind(this));var v={height:u,visible:false};t.units.forEach(function(w){var x=this.getIsAds(w),y=this.getHeight(w.firstChild,r),z=this.getUnitId(w);s[z]={height:y,visible:false,priority:0,is_ads:x,section_ref:v};}.bind(this));}.bind(this));return s;},calculateVisibleUnits:function(q,r,s){var t=0,u=this.getUnitPriority(r);u.forEach(function(v){if(r.hasOwnProperty(v)){var w=r[v],x=w.height;if(!w.section_ref.visible)x+=w.section_ref.height;w.height_below=s-x;w.visible=w.height_below>=0&&x>0;if(w.visible){w.section_ref.visible=true;s-=x;t++;}}}.bind(this));return r;},displayUnits:function(q,r){q.forEach(function(s){var t=false;s.units.forEach(function(u){var v=this.getUnitId(u),w=r[v],x=w.visible,y=w.height_below,z=w.is_ads;h.conditionClass(u,'hidden',!x);t=t||x;this.calcUnitStats(this.units[z][v],x,y);}.bind(this));h.conditionClass(s.root,'hidden',!t);}.bind(this));},getUnitPriority:function(q){var r=[],s=0,t=0;for(var u in q){var v=q[u];r.push(u);var w=this.minAds+s+t;if(v.is_ads){if(t<this.minAds)w=t;t++;}else s++;v.priority=w;}r=r.sort(function(x,y){var z=q[x],aa=q[y];return z.priority-aa.priority;}.bind(this));return r;},updateUnitsStatus:function(){var q=this.availableDimensions.x,r=this.availableDimensions.y,s=this.calculateUnitSizes(this.sections,q);s=this.calculateVisibleUnits(this.sections,s,r);this.displayUnits(this.sections,s);},calcUnitStats:function(q,r,s){var t=Date.now();if(q.visible)q.totalTime+=t-q.lastShowTime;if(q.trackingCode!==null&&q.totalTime>=this.UNITS_REGISTER_DELAY){var u=q.trackingCode;q.trackingCode=null;this.registerImpression(u,q.registerUrl);}q.visible=r;q.heightBelow=s;q.lastShowTime=t;},prepareResize:function(){var q=function(r){var s=k.create('div',{className:'inner'}),t=k.create('div',{className:'wrapper'},s);k.replace(r,t);k.setContent(s,r);return t;};this.sections=k.scry(this.root,'div.ego_section').map(function(r){return {root:q(r),units:k.scry(r,'div.ego_unit').map(q)};});},processResize:function(){if(this.isLoading||this.lastLoadTime===0||this.availableDimensions===null){this.setLogData();return;}this.updateUnitsStatus();this.setLogData();var q=this.nextRegisterTime();if(q!==Infinity)this.processResize.bind(this).defer(q,true);},setIsLogAdData:function(q){this.isLogAdData=q;this.addEvent('setIsLogAdData',false);this.setLogData();},setLogData:function(){var q=this.snowlift.getImageId();if(this.isLogAdData&&q){var r=o.getElementDimensions(this.snowlift.getImage()),s=o.getElementDimensions(this.snowlift.getRHCHeader()),t=o.getElementDimensions(this.snowlift.getRHCBody()),u=o.getElementDimensions(this.snowlift.getRHCFooter()),v={query_set:this.snowlift.getLoadQuery().set,window_x:window.innerWidth,window_y:window.innerHeight,image_x:r.x,image_y:r.y,header_x:s.x,header_y:s.y,body_x:t.x,body_y:t.y,footer_x:u.x,footer_y:u.y,ads_below_space:this.getAdsBelowSpace(),time:Date.now(),adsStatus:this.adsStatus,adsEvents:this.adsEvents};l.updateAdData(q,v);}},getAdsBelowSpace:function(){var q=[],r=this.units[1];for(var s in r)if(r.hasOwnProperty(s))q.push(r[s].heightBelow);return q;},getIsAds:function(q){var r=k.scry(q,"div._24o");return r.length;},getUnitId:function(q){if(this.getIsAds(q)){return this.getAdId(q);}else return this.getEgoId(q);},getEgoId:function(q){var r=k.find(q,'div.ego_unit');return r.getAttribute('data-ego-fbid');},getAdId:function(q){var r=k.find(q,"div._24o"),s=r.getAttribute('data-ad'),t=JSON.parse(s).adid;return t;},nextRegisterTime:function(){var q=Infinity,r=g(g({},this.units[0]),this.units[1]);for(var s in r)if(r.hasOwnProperty(s)){var t=r[s];if(t.trackingCode!==null&&t.visible)q=Math.min(q,this.UNITS_REGISTER_DELAY-t.totalTime);}return q;},getHeight:function(q,r){var s=j.get(q,'height');if(s&&s.x===r)return s.y;return this.cacheHeight(q,r);},cacheHeight:function(q,r){var s={x:r,y:q.offsetHeight};j.set(q,'height',s);return s.y;},loadAdsAndEgo:function(){this.resetEvents();this.addEvent('adsRequested',true);m.loadFromEndpoint('WebEgoPane',this.root,{pid:34,data:[this.loadQuery.set,true]},{crossPage:true,bundle:false});},unitsLoaded:function(q,r){var s;if(r){s='/ai.php';this.addEvent('adsLoaded',true);}else{s='/ajax/ei.php';this.addEvent('egoLoaded',true);}var t={};for(var u in q)if(q.hasOwnProperty(u))t[u]={trackingCode:q[u],totalTime:0,lastShowTime:0,heightBelow:-10000,visible:false,registerUrl:s};this.units[r]=t;if(r)this.waitForImages(this.imagesLoaded.bind(this));},imagesLoaded:function(){this.prepareResize();this.addEvent('imagesLoaded',true);this.lastLoadTime=Date.now();this.isLoading=false;this.processResize();h.removeClass(this.root,'loading');},loadAdsFromUserActivity:function(){var q=Date.now(),r=this.refreshUnitsRate;if(!this.isLoading&&q-this.lastLoadTime>r){h.addClass(this.root,'loading');this.isLoading=true;this.loadAdsAndEgo();}},registerImpression:function(q,r){var s=k.create('iframe',{src:n(r).addQueryData({aed:q}),width:0,height:0,frameborder:0,scrolling:'no',className:'fbEmuTracking'});s.setAttribute('aria-hidden','true');k.appendContent(this.root,s);},waitForImages:function(q){var r=k.scry(this.root,'img.img'),s=r.length,t=s;if(t===0)q();var u=function(){t--;if(t===0)q.defer();};for(var v=0;v<s;v++){var w=r[v];if(w.complete){u();}else Event.listen(w,{load:u,error:u,abort:u});}}};e.exports=p;});
__d("PhotoViewer",["Bootloader","copyProperties"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('copyProperties');function i(){this.image=null;this.root=null;this.stream=null;}h(i,{bootstrap:function(j,k){g.loadModules(['PhotoSnowlift'],function(l){l.bootstrap(j,k);});}});h(i.prototype,{getEventPrefix:bagof(null),getEventString:function(j){var k=this.getEventPrefix();if(k)return k+'.'+j;return null;},getImage:function(){return this.image;},getPosition:function(){return this.stream?this.stream.getCursor():null;},getRoot:function(){return this.root;},getSourceString:bagof(null),getVersionConst:bagof(null)});e.exports=i;});
__d("PhotoSnowlift",["array-extensions","event-extensions","function-extensions","Amoeba","Arbiter","AsyncDialog","AsyncRequest","Bootloader","Class","CSS","Dialog","DOM","DOMControl","FullScreen","ImageUtils","Keys","LinkController","Locale","PageTransitions","Parent","PhotosConst","PhotoSessionLog","PhotoSnowliftAds","PhotoStreamCache","PhotosUtils","PhotoViewer","Rect","ScrollableArea","Style","Toggler","UIPagelet","URI","UserAgent","Vector","$","computeRelativeURI","copyProperties","createArrayFrom","ge","goURI","tx","csx","userAction"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');b('function-extensions');var g=b('Amoeba'),h=b('Arbiter'),i=b('AsyncDialog'),j=b('AsyncRequest'),k=b('Bootloader'),l=b('Class'),m=b('CSS'),n=b('Dialog'),o=b('DOM'),p=b('DOMControl'),q=b('FullScreen'),r=b('ImageUtils'),s=b('Keys'),t=b('LinkController'),u=b('Locale'),v=b('PageTransitions'),w=b('Parent'),x=b('PhotosConst'),y=b('PhotoSessionLog'),z=b('PhotoSnowliftAds'),aa=b('PhotoStreamCache'),ba=b('PhotosUtils'),ca=b('PhotoViewer'),da=b('Rect'),ea=b('ScrollableArea'),fa=b('Style'),ga=b('Toggler'),ha=b('UIPagelet'),ia=b('URI'),ja=b('UserAgent'),ka=b('Vector'),la=b('$'),ma=b('computeRelativeURI'),na=b('copyProperties'),oa=b('createArrayFrom'),pa=b('ge'),qa=b('goURI'),ra=b('tx'),sa=b('csx'),ta=b('userAction'),ua=b('event-extensions').$E;function va(){this.parent.construct(this);}na(va,{STATE_ERROR:'error',STATE_HTML:'html',STATE_IMAGE_PIXELS:'image_pixels',STATE_IMAGE_DATA:'image',LOADING_TIMEOUT:2000,PAGER_FADE:3000,FULL_SCREEN_PADDING:10,STAGE_HIRES_MAX:{x:2048,y:2048},STAGE_NORMAL_MAX:{x:960,y:960},STAGE_MIN:{x:520,y:520},SIDEBAR_SIZE_MAX:340,SIDEBAR_SIZE_MIN:285,STAGE_CHROME:{x:102,y:42},VIDEO_BOTTOM_BAR_SPACE:40,GOPREV_AREA:120,TIMELINE_STRETCH_WIDTH:843,TIMELINE_STRETCH_MIN:480,MIN_TAG_DISTANCE:83,PADDING_MIN:40,_instance:null,getInstance:function(){if(!va._instance)va._instance=new va();return va._instance;},initWithSpotlight:function(wa,xa){va.getInstance().init(wa,xa);},touch:bagofholding,addPhotoFbids:function(wa,xa,ya,za){va.getInstance().addPhotoFbids(wa,xa,ya,za);},attachFollowFlyout:function(wa){o.insertAfter(la('fbPhotoSnowliftSubscribe'),wa);},attachSubscribeFlyout:function(wa){o.insertAfter(la('fbPhotoSnowliftSubscribe'),wa);},attachTagger:function(wa){va.getInstance().attachTagger(wa);},preload:function(wa,xa){va.getInstance().preload(wa,xa);},bootstrap:function(wa,xa){if(xa.getAttribute('data-vaultbox')){k.loadModules(['VaultBox'],function(ya){ya.bootstrap(wa,xa);});return;}if(wa&&ia(wa).getQueryData().hasOwnProperty('share_id')){k.loadModules(['SpotlightShareViewer'],function(ya){ya.bootstrap(wa,xa);});return;}va.getInstance().bootstrap(wa,xa);},closeRefresh:function(){va.getInstance().closeRefresh();},deletePhoto:function(wa){va.getInstance().deletePhoto(wa);},getImage:function(){return va.getInstance().getImage();},getImageId:function(){return va.getInstance().getImageId();},getLoadQuery:function(){return va.getInstance().getLoadQuery();},getRHCBody:function(){return va.getInstance().getRHCBody();},getRHCFooter:function(){return va.getInstance().getRHCFooter();},getRHCHeader:function(){return va.getInstance().getRHCHeader();},getRoot:function(){return va.getInstance().getRoot();},likePhotoSkipConfirmation:function(wa){va.getInstance().likePhotoSkipConfirmation(wa);},saveTagsFromPayload:function(wa){va.getInstance().saveTagsFromPayload(wa);},saveTagsFromPayloadDelayed:function(wa){va.saveTagsFromPayload.curry(wa).defer(2000);},handleServerError:function(wa,xa){va.getInstance().handleServerError(wa,xa);},storeFromData:function(wa){va.getInstance().storeFromData(wa);},swapData:function(){va.getInstance().swapData();},touchMarkup:bagofholding,updateTotalCount:function(wa,xa,ya){va.getInstance().updateTotalCount(wa,xa,ya);}});l.extend(va,ca);na(va.prototype,{switchTimer:null,imageRefreshTimer:null,imageLoadingTimer:null,lastPage:0,currentMinSize:null,currentImageSize:null,resetUriStack:true,thumbSrc:null,shouldStretch:false,stageMax:va.STAGE_NORMAL_MAX,stageChrome:va.STAGE_CHROME,stagePagerPrev:null,ua:null,PhotoTagger:null,showHover:false,skipLikePhotoConfirmation:false,isShowingLikePhotoConfirmation:false,preload:function(wa,xa){k.loadModules(['PhotoTagger','fb-photos-snowlift-css','Live','PhotoTagApproval','PhotoTags','TagTokenizer','fb-photos-snowlift-fullscreen-css'],function(za){this.PhotoTagger=za;}.bind(this));var ya=this.getImageSrc(ia(wa).getQueryData());if(ya)(new Image()).src=ya;},bootstrap:function(wa,xa){this.preload(wa,xa);z.reset();this.resetUriStack=true;if(this.isOpen)if(this.openExplicitly){this.closeCleanup();this.resetUriStack=false;}else return;this.ua=ta('snowlift',xa).uai('open');this.returningToStart=false;this.loading&&m.removeClass(this.loading,'loading');if(xa){m.addClass((this.loading=xa),'loading');this.getThumbAndSize(xa);}else this.loading=null;h.inform('PhotoSnowlift.GO',wa,h.BEHAVIOR_STATE);this.loadFrameIfUninitialized();},getCurrentImageServerSizeDimensions:function(){return this.stream.getCurrentImageData().dimensions;},getEventPrefix:function(){return 'PhotoSnowlift';},getRoot:function(){return this.root;},getSourceString:function(){return 'snowlift';},getVersionConst:function(){return x.VIEWER_SNOWLIFT;},getImage:function(){return this.image;},getImageId:function(){return this.stream.getCursor();},getRHCHeader:function(){return this.rhcHeader;},getRHCBody:function(){return this.ufiForm;},getRHCFooter:function(){return this.rhcFooter;},getLoadQuery:function(){return this.loadQuery;},getCurrentPhotoInfo:function(){var wa=this.stream.getCurrentImageData();if(wa)return wa.info;return null;},getOwnerId:function(){var wa=this.stream.getCurrentImageData();if(wa)return wa.info.owner;return null;},getThumbAndSize:function(wa){this.currentImageSize=null;this.thumbSrc=null;var xa=ia(wa.getAttribute('ajaxify')).getQueryData();if(!xa.size)return;var ya=ka.deserialize(xa.size);if(!ya.x||!ya.y)return;this.currentImageSize=ya;if(!m.hasClass(wa,'uiMediaThumb')&&!m.hasClass(wa,'uiPhotoThumb')&&!m.hasClass(wa,'uiScaledThumb'))return;if(wa.getAttribute('data-cropped'))return;var za=o.scry(wa,'img')[0],ab=o.scry(wa,'i')[0],bb=w.byAttribute(wa,'data-size');this.shouldStretch=bb&&this.currentImageSize&&za&&bb.getAttribute('data-size')==="2"&&this.currentImageSize.x>this.currentImageSize.y&&this.currentImageSize.x<=va.TIMELINE_STRETCH_WIDTH&&za.offsetWidth===va.TIMELINE_STRETCH_WIDTH;var cb;if(za){cb=za.src;}else if(ab){cb=fa.get(ab,'backgroundImage').replace(/.*url\("?([^"]*)"?\).*/,'$1');}else return;this.thumbSrc=cb;},loadFrameIfUninitialized:function(){if(this.root)return;new j('/ajax/photos/snowlift/init.php').setAllowCrossPageTransition(true).setMethod('GET').setReadOnly(true).send();},init:function(wa,xa){this.init=bagofholding;this.showHover=xa.pivot_hover;y.setEndMetrics(xa.pivot_end_metric);this.showEndPivot=xa.pivot_end;this.enableSnowliftProfilePicCropper=xa.snowlift_profile_pic_cropper;this.fullscreen=q.isSupported();this.showOGVideos=xa.og_videos;this.stageMax=va.STAGE_HIRES_MAX;this.spotlight=wa;this.spotlight.subscribe('blur',function(){this.closingAction=y.OUTSIDE;}.bind(this));this.spotlight.subscribe('hide',this.closeHandler.shield(this));this.spotlight.subscribe('key',this.keyHandler.bind(this));this.initializeNodes(this.spotlight.getRoot());z.init(this.sideAdUnit,this,xa);if(!this.subscription){t.registerHandler(this.handleNavigateAway.bind(this));this.subscription=h.subscribe('PhotoSnowlift.GO',function(ya,za){this.openExplicitly=true;this.loading&&m.removeClass(this.loading,'loading');this.open(za);}.bind(this));}this.transitionHandlerRegistered=false;this.returningToStart=false;v.registerHandler(this.openHandler.bind(this));this.openHandlerRegistered=true;h.subscribe('PhotoTagApproval.HILITE_TAG',this.onHiliteTag.bind(this));h.subscribe('PhotoTagApproval.UPDATE_TAG_BOX',this.onUpdateTagBox.bind(this));if(this.fullscreen)q.subscribe('changed',this.onFullScreenChange.bind(this));},onFullScreenChange:function(){var wa=q.isFullScreen();m.conditionClass(document.body,'fbPhotoSnowliftFullScreenMode',wa);if(wa){if(!m.hasClass(this.root,'fbPhotoSnowliftEditMode'))this.collapseRHC();var xa=this.stream.getCurrentImageData();if(xa&&xa.url&&this.image.src!==xa.url&&this.shouldShowHiRes(xa))this.switchImage(xa.url);this.adjustForResize();}else{this.uncollapseRHC();if(ja.chrome()&&!m.hasClass(this.root,'fbPhotoSnowliftEditMode'))this.page(0,false);}ga.hide();if(this.cropper)this.cropper.resetPhoto();},initializeNodes:function(wa){this.root=wa;this.container=o.find(wa,'div.fbPhotoSnowliftContainer');g.instrument(this.container,'snowlift');this.snowliftPopup=o.find(this.container,'div.fbPhotoSnowliftPopup');this.rhc=o.find(this.snowliftPopup,'div.rhc');this.rhcHeader=o.find(this.rhc,'div.rhcHeader');this.rhcFooter=o.find(this.rhc,'div.rhcFooter');this.ufiForm=o.find(this.rhc,'form.fbPhotosSnowliftFeedbackForm');this.ufiInputContainer=o.find(this.rhc,'div.fbPhotosSnowboxFeedbackInput');this.scroller=o.find(this.ufiForm,'div.rhcScroller');this.scrollerBody=o.find(this.scroller,'div.uiScrollableAreaBody');this.stageWrapper=o.find(this.snowliftPopup,'div.stageWrapper');this.overlay=o.find(this.snowliftPopup,'div.snowliftOverlay');this.errorBox=o.find(this.stageWrapper,'div.stageError');this.image=o.find(this.stageWrapper,'img.spotlight');this.stage=o.find(this.stageWrapper,'div.stage');this.videoStage=o.find(this.stageWrapper,'div.videoStage');this.prevPager=o.find(this.snowliftPopup,'a.snowliftPager.prev');g.instrument(this.prevPager,"prev_pager");this.nextPager=o.find(this.snowliftPopup,'a.snowliftPager.next');g.instrument(this.nextPager,"next_pager");this.stageActions=o.find(wa,'div.stageActions');this.buttonActions=o.find(this.stageActions,'div.fbPhotosPhotoButtons');this.sideAdUnit=o.find(wa,"._24q");m.conditionClass(this.root,'fullScreenAvailable',this.fullscreen);},initializeScroller:function(){this.initializeScroller=bagofholding;this.scrollableArea=ea.fromNative(this.scroller,{fade:true,persistent:true});var wa=function(event){var xa=ua(event).getTarget();if(o.contains(this.ufiInputContainer,xa)){var ya=p.getInstance(xa);if(ya){this.scrollableArea.scrollToBottom();var za=ya.subscribe('resize',function(){var bb=this.scrollableArea.isScrolledToBottom();this.adjustScroller();bb&&this.scrollableArea.scrollToBottom();}.bind(this)),ab=Event.listen(xa,'blur',function(){ya.unsubscribe(za);ab.remove();});}}}.bind(this);h.subscribe('ufi/comment',function(xa,ya){if(this.ufiForm===ya.form){this.adjustScrollerIfNecessary();this.scrollableArea.scrollToBottom();}}.bind(this));Event.listen(this.rhc,'click',function(event){var xa=event.getTarget();if(w.byTag(xa,'a')||w.byTag(xa,'button')||o.isNodeOfType(xa,'input'))this.adjustScrollerIfNecessary();}.bind(this));h.subscribe(['reflow','CommentUFI.Pager'],function(){if(this.isOpen)this.adjustScroller();}.bind(this));if(this.ufiForm.attachEvent){this.ufiForm.attachEvent('onfocusin',wa);}else this.ufiForm.addEventListener('focus',wa,true);},openHandler:function(wa){if(this.isOpen||wa.getPath()!='/photo.php'||this.returningToStart||wa.getQueryData().closeTheater||wa.getQueryData().permPage||wa.getQueryData().makeprofile){this.openHandlerRegistered=false;return false;}this.open(wa);this._uriStack.push(ia(wa).getQualifiedURI().toString());v.transitionComplete(true);return true;},getImageSrc:function(wa){if(wa.smallsrc){if(!wa.size)return wa.smallsrc;var xa=ka.deserialize(wa.size),ya=this.getStageSize(xa);if(ya.x<=va.STAGE_NORMAL_MAX.x&&ya.y<=va.STAGE_NORMAL_MAX.y)return wa.smallsrc;}return wa.src;},open:function(wa){var xa=ia(wa).getQueryData(),ya=this.getImageSrc(xa);if(ya){delete xa.src;delete xa.smallsrc;}if(this.resetUriStack)this._uriStack=[];if(!this.initialLoad){xa.firstLoad=true;this.initialLoad=true;}this.sessionID=Date.now();this.loadQuery=na(xa,{ssid:this.sessionID});this.isOpen=true;this.pagersShown=false;this.refreshOnClose=false;this.hilitedTag=null;this.loadingStates={image:false,html:false};this.replaceUrl=false;this.stream=new aa();this.stream.init(x.VIEWER_SNOWLIFT,'PhotoViewerPagelet');this.fetchInitialData();this.setLoadingState(va.STATE_HTML,true);this.rhcCollapsed=false;k.loadModules(['fb-photos-snowlift-css'],this._open.bind(this,wa,ya));if(this.showEndPivot)k.loadModules(['PhotoPivot'],function(za){this.pivots=za.getInstance();if(xa.relevant_count)this.pivots.setRelevantCount(xa.relevant_count);}.bind(this));if(this.enableSnowliftProfilePicCropper)k.loadModules(['SnowliftPicCropper'],function(za){this.cropper=za.getInstance(this);this.cropper.init();}.bind(this));k.loadModules(['PhotosButtonTooltips'],function(za){za.init();});},_open:function(wa,xa){this.createLoader(xa);this.spotlight.show();this.ua&&this.ua.add_event('frame');h.inform('layer_shown',{type:'PhotoSnowlift'});h.inform('PhotoSnowlift.OPEN');this.stageHandlers=[Event.listen(window,'resize',this.adjustForResize.bind(this)),Event.listen(this.stageWrapper,'click',this.buttonListener.bind(this)),Event.listen(this.stageWrapper,'mouseleave',function(event){this.unhiliteAllTags();this.hidePagers();}.bind(this)),Event.listen(this.stageWrapper,'mousemove',this.hilitePagerOnMouseMove.bind(this)),Event.listen(this.stageWrapper,'mousemove',this.hiliteTagsOnMouseMove.bind(this)),Event.listen(this.overlay,'mouseenter',this.unhiliteAllTags.bind(this))];this.stageHandlers.push(Event.listen(this.container,'click',(function(event){var ab=event.getTarget();if(w.byClass(ab,'rotateRight')){this.rotate('right');}else if(w.byClass(ab,'rotateLeft')){this.rotate('left');}else if(w.byClass(ab,'closeTheater')){if(q.isFullScreen()){q.toggleFullScreen();return;}this.closingAction=y.X;this.closeHandler();}else if(this.fullscreen)if(w.byClass(ab,'fbPhotoSnowliftFullScreen')){this.toggleFullScreen();}else if(w.byClass(ab,'fbPhotoSnowliftCollapse'))this.toggleCollapse();}).bind(this)));var ya=pa('fbPhotoSnowliftFeedback');if(ya)this.stageHandlers.push(Event.listen(ya,'click',function(event){if(w.byClass(event.getTarget(),'like_link')||w.byClass(event.getTarget(),'UFILikeLink'))this.toggleLikeButton();var ab=w.byClass(event.getTarget(),'uiUfiCollapsedComment');if(ab)m.addClass(ab,'uiUfiCollapsedCommentToggle');}.bind(this)));var za=pa('fbPhotoSnowliftOnProfile');if(za)this.stageHandlers.push(Event.listen(za,'click',function(event){if(w.byClass(event.getTarget(),'fbPhotoRemoveFromProfileLink'))this.refreshOnClose=true;}.bind(this)));if(this.resetUriStack)this.startingURI=ia.getMostRecentURI().addQueryData({closeTheater:1}).getUnqualifiedURI();if(!xa)this.setLoadingState(va.STATE_IMAGE_DATA,true);if(!this.transitionHandlerRegistered){v.registerHandler(this.transitionHandler.bind(this));this.transitionHandlerRegistered=true;}y.initLogging(y.SNOWLIFT);if(this.pivots)y.setRelevantCount(this.pivots.relevantCount);},toggleFullScreen:function(){var wa=q.toggleFullScreen(document.documentElement);if(wa){var xa=this.stream.getCurrentImageData();if(xa&&xa.url&&this.image.src!==xa.url&&this.shouldShowHiRes(xa))(new Image()).src=xa.url;y.logEnterFullScreen(this.stream.getCursor());}},getStream:function(){return this.stream;},fetchInitialData:function(){this.ua&&this.ua.add_event('init_data');this.stream.waitForInitData();ha.loadFromEndpoint('PhotoViewerInitPagelet',null,this.loadQuery,{usePipe:true,jsNonblock:true,crossPage:true});},toggleCollapse:function(){if(this.rhcCollapsed){this.uncollapseRHC();}else this.collapseRHC();},collapseRHC:function(){this.rhcCollapsed=true;m.addClass(this.root,'collapseRHC');this.adjustForResize();},uncollapseRHC:function(){this.rhcCollapsed=false;m.removeClass(this.root,'collapseRHC');this.adjustForResize();},closeHandler:function(){if(!this.isOpen)return;this.closingAction=this.closingAction||y.ESC;if(ia.getMostRecentURI().addQueryData({closeTheater:1}).getUnqualifiedURI().toString()==this.startingURI.toString()){this.close();return;}this.returnToStartingURI(this.refreshOnClose);this.close();},returnToStartingURI:function(wa,xa){if(!wa)if(xa){this.squashNextTransition(qa.curry(xa));}else this.squashNextTransition();this.returningToStart=true;var ya=h.subscribe('page_transition',function(){this.returningToStart=false;ya.unsubscribe();}),za=wa||isNaN(ja.opera()),ab=this._uriStack.length;if(za&&ab<window.history.length){window.history.go(-ab);}else{var bb=this.startingURI,cb=new ia(bb).removeQueryData('closeTheater');if(bb.getQueryData().sk=='approve'&&bb.getPath()=='/profile.php'){cb.removeQueryData('highlight');cb.removeQueryData('notif_t');}qa(cb);}},squashNextTransition:function(wa){this.squashNext=true;v.registerHandler(function xa(){if(this.squashNext){this.squashNext=false;if(wa)wa.defer();v.transitionComplete(true);return true;}return false;}.bind(this),7);},handleNavigateAway:function(wa){var xa=ma(v._most_recent_uri.getQualifiedURI(),wa.getAttribute('href'));if(this.isOpen&&(xa instanceof ia)&&xa.getUnqualifiedURI().toString()!=this.startingURI.toString()&&xa.getPath()!='/photo.php'){if(!this.closingAction)this.closingAction=y.NAVIGATE;this.returnToStartingURI(false,xa);this.close();return false;}return true;},close:function(){if(!this.isOpen)return;this.isOpen=false;if(this.fullscreen)q.disableFullScreen();ta('snowlift').uai('close');this.cropper&&this.cropper.disableCropping();this.spotlight.hide();this.openExplicitly=false;this.closeCleanup.bind(this).defer();},closeCleanup:function(){m.removeClass(this.root,'dataLoading');y.logPhotoViews(this.closingAction);this.destroy();m.hide(this.errorBox);m.hide(this.image);this.currentImageSize=null;this.thumbSrc=null;this.shouldStretch=false;this.resetUriStack=true;m.removeClass(this.stageWrapper,'showVideo');o.empty(this.videoStage);this.uncollapseRHC();this.currentMinSize=null;this.setStagePagersState('reset');this.recacheData();o.empty(this.sideAdUnit);this.stream.destroy();var wa=this.closingAction===y.NAVIGATE;this.closingAction=null;if(!this.openHandlerRegistered){v.registerHandler(this.openHandler.bind(this));this.openHandlerRegistered=true;}h.inform('layer_hidden',{type:'PhotoSnowlift'});h.inform('PhotoSnowlift.CLOSE',wa);this.root.setAttribute('aria-busy','true');},createLoader:function(wa){if(this.currentImageSize===null){this.adjustStageSize(va.STAGE_MIN);}else{var xa=this.getStageSize(this.currentImageSize);xa=new ka(Math.max(xa.x,va.STAGE_MIN.x),Math.max(xa.y,va.STAGE_MIN.y));var ya=this.getImageSizeInStage(this.currentImageSize,xa);if(this.thumbSrc===null){this.adjustStageSize(ya);}else this.useImage(o.create('img',{className:'spotlight',alt:'',src:this.thumbSrc,style:{width:ya.x+'px',height:ya.y+'px'}}),ya,false);}this.setLoadingState(this.STATE_IMAGE_PIXELS,true);if(wa)(function(){var za=new Image();za.onload=a.async_callback(function(){if(!this.isOpen||this.pendingImageUrl!=wa)return;if(!this.stream||!this.stream.errorInCurrent()){this.switchImage(wa,this.currentImageSize);this.ua&&this.ua.add_event('image');this.setLoadingState(va.STATE_IMAGE_DATA,false);}}.bind(this),'photo_theater');za.src=this.pendingImageUrl=wa;}).bind(this).defer();m.hide(this.stageActions);this.setStagePagersState('disabled');},initDataFetched:function(wa){y.setPhotoSet(this.stream.getPhotoSet());y.setLogFbids(wa.logids);var xa=this.stream.getCurrentImageData();y.addPhotoView(xa.info,this.shouldShowHiRes(xa),this.fullscreen&&q.isFullScreen());if(!this.pageHandlers)this.pageHandlers=[Event.listen(this.root,'click',this.pageListener.bind(this)),Event.listen(this.root,'mouseleave',this.mouseLeaveListener.bind(this))];m.show(this.stageActions);this.root.setAttribute('aria-busy','false');this.isLoggedInViewer=wa.loggedin;this.disableAds=!this.isLoggedInViewer||wa.fromad;this.loadAds();},adjustScrollerIfNecessary:function(){clearTimeout(this.scrollerTimeout);this.scrollerTimeout=this.adjustScroller.bind(this).defer();},adjustScroller:function(){clearTimeout(this.scrollerTimeout);this.initializeScroller();this.scrollableArea.resize();var wa=ka.getElementDimensions(this.rhc),xa=wa.y;xa-=ka.getElementDimensions(this.rhcHeader).y;xa-=ka.getElementDimensions(this.ufiInputContainer).y;var ya=ka.getElementDimensions(this.scrollerBody).y;if(ya>=xa){fa.set(this.scroller,'height',xa+'px');m.addClass(this.rhc,'pinnedUfi');xa=0;}else{fa.set(this.scroller,'height','auto');m.removeClass(this.rhc,'pinnedUfi');xa-=ya;}var za=ka.getElementDimensions(this.ufiInputContainer).y;fa.set(this.ufiForm,'padding-bottom',za+'px');z.resize(new ka(wa.x,xa));this.scrollableArea.adjustGripper();},adjustForResize:function(){this.currentMinSize=null;this.adjustStageSize();this.adjustForNewData();},shouldShowHiRes:function(wa){if(!wa||!wa.smallurl)return false;var xa=this.getStageSize(wa.dimensions),ya=this.getImageSizeInStage(wa.dimensions,xa);return (ya.x>va.STAGE_NORMAL_MAX.x||ya.y>va.STAGE_NORMAL_MAX.y);},getImageURL:function(wa){if(wa.video){return null;}else if(wa.smallurl&&!this.shouldShowHiRes(wa))return wa.smallurl;return wa.url;},getImageDimensions:function(wa){if(wa.smalldims&&(!this.shouldShowHiRes(wa)||this.image.src===wa.smallurl))return wa.smalldims;return wa.dimensions;},getStageSize:function(wa,xa){var ya=ka.getViewportDimensions(),za=new ka(wa.x,wa.y);if(xa)za=new ka(Math.max(wa.x,xa.x),Math.max(wa.y,xa.y));var ab,bb;if(this.fullscreen&&q.isFullScreen()){return new ka((this.rhcCollapsed?screen.width:screen.width-va.SIDEBAR_SIZE_MAX),screen.height-va.FULL_SCREEN_PADDING*2);}else{ab=Math.min(za.x,this.stageMax.x,(ya.x-va.SIDEBAR_SIZE_MAX-va.STAGE_CHROME.x));bb=Math.min(za.y,this.stageMax.y,ya.y-va.STAGE_CHROME.y);}if(ab===0&&bb===0)return new ka(0,0);var cb=ab/bb,db=za.x/za.y;if(cb<db)return new ka(ab,Math.ceil(ab/db));return new ka(Math.ceil(bb*db),bb);},getImageSizeInStage:function(wa,xa){var ya=wa.x,za=wa.y;if(ya>=xa.x||za>=xa.y){var ab=xa.x/xa.y,bb=ya/za;if(ab<bb){ya=xa.x;za=Math.ceil(ya/bb);}else if(ab>bb){za=xa.y;ya=Math.ceil(za*bb);}else{ya=xa.x;za=xa.y;}}return new ka(ya,za);},adjustStageSize:function(wa){var xa=this.currentImageSize;if(wa){xa=wa;}else{var ya=this.stream&&this.stream.getCurrentImageData();if(ya)xa=this.getImageDimensions(ya);}if(!xa)return;this.currentImageSize=xa;var za=0;if(this.shouldStretch&&!this.getVideoOnStage()&&xa.x>xa.y&&xa.x<=va.TIMELINE_STRETCH_WIDTH&&xa.x>=va.TIMELINE_STRETCH_MIN){xa.y=Math.round(xa.y*va.TIMELINE_STRETCH_WIDTH/xa.x);xa.x=va.TIMELINE_STRETCH_WIDTH;}else if(this.getVideoOnStage()){za=va.VIDEO_BOTTOM_BAR_SPACE*2;xa.y+=za;}var ab=this.getStageSize(xa,this.currentMinSize);if(!this.currentMinSize)this.currentMinSize=new ka(0,0);this.currentMinSize=new ka(Math.max(ab.x,va.STAGE_MIN.x,this.currentMinSize.x),Math.max(ab.y,va.STAGE_MIN.y,this.currentMinSize.y));var bb=this.getImageSizeInStage(xa,this.currentMinSize),cb=this.currentMinSize.x-bb.x,db=this.currentMinSize.y-bb.y;if(cb>0&&cb<va.PADDING_MIN){this.currentMinSize.x-=cb;}else if(db>0&&db<va.PADDING_MIN)this.currentMinSize.y-=db;var eb=this.currentMinSize.x+va.SIDEBAR_SIZE_MAX;if(this.rhcCollapsed)eb=this.currentMinSize.x;this.snowliftPopup.style.cssText='width:'+eb+'px;'+'height:'+this.currentMinSize.y+'px;';var fb=this.currentMinSize.y-za+'px';if(ja.firefox()||ja.ie()<8){var gb=fa.get(this.stageWrapper,'font-size');if(ja.ie()&&gb.indexOf('px')<0){var hb=o.create('div');hb.style.fontSize=gb;hb.style.height='1em';gb=hb.style.pixelHeight;}fb=((this.currentMinSize.y-za)/parseFloat(gb))+'em';}this.stageWrapper.style.cssText='width:'+this.currentMinSize.x+'px;'+'line-height:'+fb+';';if(ja.ie()<8){fa.set(this.root,'height',ka.getViewportDimensions().y+'px');fa.set(this.container,'min-height',(this.currentMinSize.y+va.STAGE_CHROME.y)+'px');}this.image.style.cssText='width:'+bb.x+'px;'+'height:'+bb.y+'px;';this.adjustScrollerIfNecessary();},adjustForNewData:function(){if(!this.image)return;var wa=o.scry(this.stage,'div.tagsWrapper')[0],xa=ka.getElementDimensions(this.image);if(wa){fa.set(wa,'width',xa.x+'px');fa.set(wa,'height',xa.y+'px');if(ja.ie()<=7){var ya=o.scry(this.root,'div.tagContainer')[0];if(ya)m.conditionClass(wa,'ie7VerticalFix',ka.getElementDimensions(ya).y>xa.y);}}},setLoadingState:function(wa,xa){switch(wa){case va.STATE_IMAGE_PIXELS:m.conditionClass(this.root,'imagePixelsLoading',xa);break;case va.STATE_IMAGE_DATA:this.loadingStates[wa]=xa;m.conditionClass(this.root,'imageLoading',xa);break;case va.STATE_HTML:this.loadingStates[wa]=xa;m.conditionClass(this.root,'dataLoading',xa);this.rhc.setAttribute('aria-busy',xa?'true':'false');break;}},destroy:function(){this.stageHandlers.forEach(function(wa){wa.remove();});if(this.pageHandlers){this.pageHandlers.forEach(function(wa){wa.remove();});this.pageHandlers=null;}},checkState:function(wa){if(wa!=va.STATE_ERROR&&!this.loadingStates[wa])return;switch(wa){case va.STATE_IMAGE_DATA:var xa=this.stream.getCurrentImageData();if(xa){var ya=this.getImageURL(xa);if(ya){this.switchImage(ya,null,true);}else if(xa.video)this.switchVideo(xa.video,true);this.setLoadingState(wa,false);}break;case va.STATE_HTML:if(this.stream.getCurrentHtml()){this.swapData();this.setLoadingState(wa,false);}break;default:if(this.stream.errorInCurrent()){m.hide(this.image);m.show(this.errorBox);}break;}},buttonListener:function(event){var wa=event.getTarget(),xa=Date.now();if(w.byClass(wa,'fbPhotoTagApprovalBox'))return;if(xa-this.lastPage<350)return;if(w.byClass(wa,'fbPhotosPhotoLike')){this.likePhoto();}else if(w.byClass(wa,'tagApproveIgnore'))this.updateTagBox(event,wa);},likePhoto:function(){y.addButtonLike();var wa=la('fbPhotoSnowliftFeedback'),xa=o.scry(wa,'button.like_link')[0];if(!xa)xa=o.scry(wa,'a.UFILikeLink')[0];var ya=xa.getAttribute('href');if(q.isFullScreen())if(ja.chrome())xa.setAttribute('href','javascript:;');xa.click();xa.setAttribute('href',ya);},toggleLikeButton:function(){var wa=o.scry(this.buttonActions,'a.fbPhotosPhotoLike')[0];if(wa){m.toggleClass(wa,'viewerLikesThis');m.removeClass(wa,'viewerAlreadyLikedThis');}},likePhotoWithKey:function(){if(this.isShowingLikePhotoConfirmation)return;if(this.skipLikePhotoConfirmation){this.likePhoto();}else i.send(new j('/photos/confirm_like.php'),function(wa){this.isShowingLikePhotoConfirmation=true;wa.subscribe('confirm',this.onCloseLikePhotoConfirmDialog.bind(this));wa.subscribe('cancel',this.onCloseLikePhotoConfirmDialog.bind(this));}.bind(this));return false;},likePhotoSkipConfirmation:function(wa){this.skipLikePhotoConfirmation=wa;this.likePhoto();},onCloseLikePhotoConfirmDialog:function(){this.isShowingLikePhotoConfirmation=false;},updateTagBox:function(wa,xa){this.unhiliteAllTags();var ya=pa(wa);if(!ya)return;m.addClass(ya,'tagBox');m.addClass(ya,'tagBoxPendingResponse');m.removeClass(ya,'tagBoxPending');m.hide(o.find(ya,'span.tagForm'));if(xa){m.show(o.find(ya,'span.tagApproved'));}else m.show(o.find(ya,'span.tagIgnored'));},rotate:function(wa){var xa=this.stream.getCursor();if(this.getVideoOnStage()){var ya=(wa=='left')?270:90;k.loadModules(['VideoRotate'],function(ab){new ab(xa).motionRotate(ya);});return;}var za=na({fbid:xa,cs_ver:x.VIEWER_SNOWLIFT},this.stream.getPhotoSetQuery());za[wa]=1;this.setLoadingState(va.STATE_IMAGE_DATA,true);this.setLoadingState(this.STATE_IMAGE_PIXELS,true);m.hide(this.image);new j('/ajax/photos/photo/rotate/').setAllowCrossPageTransition(true).setData(za).setErrorHandler(this.rotationError.bind(this,xa)).setFinallyHandler(this.rotationComplete.bind(this,xa)).setMethod('POST').setReadOnly(false).send();},rotationComplete:function(wa,xa){if(wa==this.stream.getCursor()){this.setLoadingState(va.STATE_IMAGE_DATA,false);this.switchImage(this.getImageURL(this.stream.getCurrentImageData()));this.swapData();}},rotationError:function(wa,xa){if(wa==this.stream.getCursor()){this.setLoadingState(va.STATE_IMAGE_DATA,false);this.switchImage(this.getImageURL(this.stream.getCurrentImageData()));k.loadModules(['AsyncResponse'],function(ya){ya.defaultErrorHandler(xa);});}},saveTagsFromPayload:function(wa){this.storeFromData(wa);if('data' in wa&&this.stream.getCursor() in wa.data)this.swapData();},saveEdit:function(){if(!m.hasClass(this.root,'fbPhotoSnowliftEditMode'))return;k.loadModules(['PhotoInlineEditor','Form'],function(wa,xa){var ya=wa.getInstance(this.getViewerConst());ya&&xa.bootstrap(ya.getForm().controller);}.bind(this));},mouseLeaveListener:function(event){this.unhiliteAllTags();this.reHilitePendingTag();},hilitePagerOnMouseMove:function(event){var wa=ka.getEventPosition(event),xa=ka.getElementPosition(this.stage);if(u.isRTL()){var ya=ka.getElementDimensions(this.stage);this.stagePagerPrev=ya.x-(wa.x-xa.x)<va.GOPREV_AREA;}else this.stagePagerPrev=wa.x-xa.x<va.GOPREV_AREA;m.conditionClass(this.prevPager,'hilightPager',this.stagePagerPrev);m.conditionClass(this.nextPager,'hilightPager',!this.stagePagerPrev);var za,ab=event.getTarget();if(!w.byClass(ab,'snowliftOverlay')&&!w.byClass(ab,'bottomBarActions')&&!w.byClass(ab,'snowliftPager'))za=va.PAGER_FADE;this.showPagers(za);},showPagers:function(wa){clearTimeout(this.fadePagerTimer);this.setStagePagersState('active');if(typeof wa!=='undefined')this.fadePagerTimer=this.hidePagers.bind(this).defer(wa);},hidePagers:function(){var wa=o.scry(this.getRoot(),'.fbPhotosPhotoActionsMenu')[0];if(wa)return;clearTimeout(this.fadePagerTimer);this.setStagePagersState('inactive');},getTagger:function(){if(!this.PhotoTagger)return null;var wa=this.PhotoTagger.getInstance(x.VIEWER_SNOWLIFT);if(!wa||!wa.tagHoverFacebox)return null;return wa;},unhiliteAllTags:function(){o.scry(this.stage,'div.tagsWrapper div.hover').forEach(function(xa){m.removeClass(xa,'hover');});this.hilitedTag=null;if(!m.hasClass(this.root,'taggingMode')){var wa=this.getTagger();if(wa){wa.hideTagger();wa.setCurrentFacebox(null);}}},switchHilitedTags:function(wa,xa){if(this.switchTimer!==null){clearTimeout(this.switchTimer);this.switchTimer=null;}this.unhiliteAllTags();var ya=pa(wa);if(ya){this.hilitedTag=wa;if(!m.hasClass(this.root,'taggingMode')&&ba.isFacebox(this.hilitedTag)){var za=this.getTagger();if(za){m.addClass(ya,'hover');var ab=za.getFacebox(wa);za.setCurrentFacebox(ab);if(ab)za.addTagFromFacebox(ab);}}else m.addClass(ya,'hover');if(m.hasClass(ya,'tagBoxPending')&&!m.hasClass(ya,'showPendingTagName')&&xa===true){o.scry(this.stage,'div.tagsWrapper div.showPendingTagName').forEach(function(bb){m.removeClass(bb,'showPendingTagName');});m.addClass(ya,'showPendingTagName');}}},reHilitePendingTag:function(){var wa=pa(this.hilitedTag);if(wa&&m.hasClass(wa,'showPendingTagName'))return;var xa=o.scry(this.stage,'div.tagsWrapper div.showPendingTagName')[0];if(xa)this.switchHilitedTags(xa.id);},hiliteTagsOnMouseMove:function(event){if(!this.stream.getCurrentExtraData()||this.getVideoOnStage())return;if(this.switchTimer!==null)return;var wa=event.getTarget();if(w.byClass(wa,'snowliftOverlay')||w.byClass(wa,'fbPhotoSnowliftTagApproval')||w.byClass(wa,'tagPointer')||w.byClass(wa,'photoTagTypeahead'))return;var xa=w.byClass(wa,'tagBoxPending'),ya=false;if(this.hilitedTag){var za=pa(this.hilitedTag);ya=za&&m.hasClass(za,'tagBoxPending');}var ab=((!this.hilitedTag&&xa)||(!ya&&xa));if(ab){this.switchHilitedTags(xa.id);return;}if(xa&&(xa.id==this.hilitedTag))return;var bb=250,cb=ba.absoluteToNormalizedPosition(this.image,ka.getEventPosition(event));if(this.currentTagHasPrecedence(cb))return;var db=ba.getNearestBox(this.stream.getCurrentExtraData().tagRects,cb);if(!db){if(!ya){this.unhiliteAllTags();this.reHilitePendingTag();}return;}var eb=null;if(ya){var fb={};fb[this.hilitedTag]=this.stream.getCurrentExtraData().tagRects[this.hilitedTag];eb=ba.getNearestBox(fb,cb);}if(eb!==null&&ya)return;if(this.hilitedTag!=db)if(ya){this.switchTimer=this.switchHilitedTags.bind(this,db).defer(bb);}else{if(this.showHover){if(!this.seenTags)this.seenTags=[];if(!this.seenTags[db]){y.addFaceTagImpression();this.seenTags[db]=true;}}this.switchHilitedTags(db);}},currentTagHasPrecedence:function(wa){if(!this.hilitedTag)return false;var xa=this.stream.getCurrentExtraData().tagRects[this.hilitedTag],ya=new da(xa.t+(xa.h()/2),xa.r,xa.b+(ba.isFacebox(this.hilitedTag)?10:0),xa.l,xa.domain);return ya.contains(wa);},getVideoOnStage:function(){var wa=this.stream&&this.stream.getCurrentImageData();return wa&&wa.video;},shouldPageOnAction:function(wa,xa){if(!this.isOpen||this.isShowingLikePhotoConfirmation)return false;var ya=o.isNode(xa)&&(w.byClass(xa,'snowliftPager')||w.byClass(xa,'stagePagers')||w.byClass(xa,'pivotPageColumn')),za=o.isNode(xa)&&w.byClass(xa,'stage'),ab=m.hasClass(xa,'faceBox'),bb=((za&&m.hasClass(this.root,'taggingMode'))||w.byClass(xa,'tagBoxPending')||w.byClass(xa,'tagBoxPendingResponse')||w.byClass(xa,'fbPhotoTagApprovalBox')||w.byClass(xa,'tag')||(this.cropper&&this.cropper.croppingMode));if(bb)return false;return wa==s.LEFT||wa==s.RIGHT||(!m.hasClass(this.root,'taggingMode')&&ab)||ya||za;},keyHandler:function(wa,event){if(event.getModifiers().any)return true;switch(Event.getKeyCode(event)){case s.LEFT:case s.RIGHT:this.pageListener(event);return false;case 76:return this.likePhotoWithKey();}},pageListener:function(event){var wa=Event.getKeyCode(event),xa=event.getTarget();if(!this.shouldPageOnAction(wa,xa))return;var ya=0;if(wa==s.RIGHT){ya=1;y.setPagingAction('key_right');}else if(wa==s.LEFT){ya=-1;y.setPagingAction('key_left');}else if(w.byClass(xa,'next')){ya=1;y.setPagingAction('click_next');}else if(w.byClass(xa,'prev')){ya=-1;y.setPagingAction('click_prev');}else if(!this.stagePagerPrev){ya=1;y.setPagingAction('click_stage');}else{ya=-1;y.setPagingAction('click_stage_back');}if(m.hasClass(this.root,'fbPhotoSnowliftEditMode')||(this.cropper&&this.cropper.croppingMode)){this.warnLeavePage(ya);}else{this.page(ya,ja.chrome()&&q.isFullScreen());ta('snowlift',xa,event).uai(y.pagingAction);}},warnLeavePage:function(wa){new n().setTitle("Are you sure you want to leave this page?").setBody("You have unsaved changes that will be lost if you leave the page.").setButtons([{name:'leave_page',label:"Leave this Page",handler:this.page.bind(this,wa)},{name:'continue_editing',label:"Stay on this Page",className:'inputaux'}]).setModal(true).show();},page:function(wa,xa){if(!this.stream.isValidMovement(wa)){this.showPagers(va.PAGER_FADE);return;}this.lastPage=Date.now();this.unhiliteAllTags();this.seenTags=[];var ya=this.getVideoOnStage();if(ya)this.switchVideo(ya,false);if(this.pivots&&this.pivots.page(wa))return;h.inform('PhotoSnowlift.PAGE');ga.hide();this.recacheData();this.stream.moveCursor(wa);m.hide(this.image);if(this.stream.errorInCurrent()){this.setLoadingState(va.STATE_HTML,true);m.show(this.errorBox);return;}var za=this.stream.getCurrentImageData();if(za){var ab=this.getImageURL(za);if(ab){this.switchImage(ab,null,true);}else if(za.video)this.switchVideo(za.video,true);if(!xa){this.replaceUrl=true;qa(za.info.permalink);}this.setLoadingState(va.STATE_IMAGE_DATA,false);}else{this.setLoadingState(va.STATE_IMAGE_PIXELS,true);this.setLoadingState(va.STATE_IMAGE_DATA,true);}if(this.stream.getCurrentHtml()){this.swapData();}else this.setLoadingState(va.STATE_HTML,true);this.disableAds=!this.isLoggedInViewer;this.loadAds();},logImpressionDetailsForPhoto:function(){var wa=[].concat(o.scry(la('fbPhotoSnowliftTagList'),'input.photoImpressionDetails'),o.scry(la('fbPhotoSnowliftFeedback'),'input.photoImpressionDetails'));if(wa.length===0)return;var xa={};for(var ya=0;ya<wa.length;ya++)xa[wa[ya].name]=wa[ya].value;if(this.getVideoOnStage()){xa.width=0;xa.height=0;}else{var za=this.getImageDimensions(this.stream.getCurrentImageData());xa.width=za.x;xa.height=za.y;}y.addDetailData(this.stream.getCursor(),xa);z.setIsLogAdData(true);},loadAds:function(){if(this.disableAds)return;z.loadAdsFromUserActivity();},transitionHandler:function(wa){if(wa.getQueryData().closeTheater||wa.getQueryData().permPage||wa.getQueryData().makeprofile||this.returningToStart){if(this.isOpen)this.close();this.transitionHandlerRegistered=false;return false;}if(this.replaceUrl){this.replaceUrl=false;this._uriStack.push(wa.getQualifiedURI().toString());v.transitionComplete(true);return true;}var xa=this._uriStack.length;if(xa>=2&&this._uriStack[xa-2]==wa.getQualifiedURI().toString())this._uriStack.pop();var ya=this.stream.getCursorForURI(wa.getUnqualifiedURI().toString());if(ya){var za=this.stream.getRelativeMovement(ya);this.page(za,true);v.transitionComplete(false);return true;}if(this.isOpen){v.transitionComplete(true);this.close();return true;}this.transitionHandlerRegistered=false;return false;},recacheData:function(){if(!this.loadingStates.html){var wa=this.stream.getCurrentHtml();for(var xa in wa){wa[xa]=oa(la(xa).childNodes);o.empty(la(xa));}}},reloadIfTimeout:function(){if(!r.hasLoaded(this.image)){var wa=this.makeNewImage(this.image.src,true);Event.listen(wa,'load',this.useImage.bind(this,wa,null,true));}},useImage:function(wa,xa,ya){if(ya&&r.hasLoaded(this.image))return;o.replace(this.image,wa);this.image=wa;this.adjustStageSize(xa);},makeNewImage:function(wa,xa){if(this.imageLoadingTimer){clearTimeout(this.imageLoadingTimer);this.imageLoadingTimer=null;}else if(!xa)this.imageRefreshTimer=setTimeout(this.reloadIfTimeout.bind(this),va.LOADING_TIMEOUT);var ya=o.create('img',{className:'spotlight',alt:''});ya.setAttribute('aria-describedby','fbPhotosSnowliftCaption');ya.setAttribute('aria-busy','true');Event.listen(ya,'load',a.async_callback(function(){clearTimeout(this.imageRefreshTimer);this.image.setAttribute('aria-busy','false');this.setLoadingState(this.STATE_IMAGE_PIXELS,false);(function(){if(this.isOpen){this.adjustStageSize();this.adjustForNewData();}}).bind(this).defer();}.bind(this),'photo_theater'));ya.src=wa;return ya;},switchImage:function(wa,xa,ya){m.hide(this.image);m.hide(this.errorBox);this.setLoadingState(this.STATE_IMAGE_PIXELS,true);var za=this.stream&&this.stream.getCurrentImageData();if(za)y.addPhotoView(za.info,this.shouldShowHiRes(za),this.fullscreen&&q.isFullScreen());this.useImage(this.makeNewImage(wa,false),xa,false);if(ya)this.stream.preloadImages(this.shouldShowHiRes(za));if(this.cropper&&this.cropper.croppingMode)this.cropper.resetPhoto();},switchVideo:function(wa,xa){var ya='swf_'+wa;if(xa){m.addClass(this.stageWrapper,'showVideo');var za=o.create('div',{className:'videoStageContainer'});o.appendContent(this.videoStage,za);za.id=wa;if(window[ya]&&!pa(ya))window[ya].write(wa);this.adjustStageSizeForVideo.bind(this,ya).defer();}else{window[ya]&&window[ya].addVariable('video_autoplay',0);this.videoLoadTimer&&clearTimeout(this.videoLoadTimer);o.empty(this.videoStage);m.removeClass(this.stageWrapper,'showVideo');}},checkVideoStatus:function(wa){if(this.videoLoadTimer)clearTimeout(this.videoLoadTimer);var xa=this.getVideoOnStage();if(!xa){return;}else{var ya='swf_'+xa;if(wa!==ya)return;this.adjustStageSizeForVideo(wa);}},adjustStageSizeForVideo:function(wa){var xa=pa(wa);if(!xa){this.videoLoadTimer=setTimeout(this.checkVideoStatus.bind(this,wa),200);}else this.adjustStageSize(new ka(xa.width,xa.height));},handleServerError:function(wa,xa){o.setContent(this.errorBox,wa);this.storeFromData(xa);},swapData:function(){var wa,xa=this.stream.getCurrentHtml();if(xa){this.setLoadingState(va.STATE_HTML,false);for(var ya in xa){wa=pa(ya);wa&&o.setContent(wa,xa[ya]);}h.inform('PhotoSnowlift.DATA_CHANGE',this.stream.getCurrentImageData().info,h.BEHAVIOR_STATE);if(this.stream.getCurrentExtraData())h.inform('PhotoSnowlift.EXTRA_DATA_CHANGE',this.stream.getCurrentExtraData(),h.BEHAVIOR_STATE);}this.showPagers(va.PAGER_FADE);this.adjustScroller();this.scrollableArea.showScrollbar(false);this.adjustForNewData();this.logImpressionDetailsForPhoto();},updateTotalCount:function(wa,xa,ya){var za=this.stream.getCurrentHtml();if(za){var ab=la('fbPhotoSnowliftPositionAndCount');o.replace(ab,ya);ab=ya;m.show(ab);var bb='fbPhotoSnowliftPositionAndCount';za[bb]=oa(ab.childNodes);}this.stream.setTotalCount(wa);this.stream.setFirstCursorIndex(xa);},addPhotoFbids:function(wa,xa,ya,za){if(za&&this.sessionID&&za!=this.sessionID)return;var ab=this.stream.getCursor()===null;this.stream.attachToFbidsList(wa,xa,ya);if(ya&&ab)this.page(0,true);if(this.pivots&&ya)this.pivots.setCycleCount(this.stream.calculateDistance(this.stream.getCursor(),this.stream.firstCursor));if(!this.pagersShown&&this.stream.canPage())this.setStagePagersState('ready');},attachTagger:function(wa){o.appendContent(this.stageActions,wa);},storeFromData:function(wa){if(!this.isOpen)return;if(wa.ssid&&this.sessionID&&this.sessionID!=wa.ssid)return;var xa=this.stream.storeToCache(wa);if('error' in xa){this.checkState(va.STATE_ERROR);return;}if('init' in xa){this.initDataFetched(xa.init);if(this.openExplicitly){this.replaceUrl=true;qa(this.stream.getCurrentImageData().info.permalink);}if(this.stream.canPage())this.setStagePagersState('ready');this.ua&&this.ua.add_event('ufi');}if('image' in xa)this.checkState(va.STATE_IMAGE_DATA);if('data' in xa)this.checkState(va.STATE_HTML);},setStagePagersState:function(wa){switch(wa){case 'ready':m.addClass(this.root,'pagingReady');this.pagersShown=true;this.ua&&this.ua.add_event('arrows');return;case 'active':m.addClass(this.root,'pagingActivated');return;case 'inactive':m.removeClass(this.root,'pagingActivated');return;case 'disabled':case 'reset':m.removeClass(this.root,'pagingReady');return;}},deletePhoto:function(wa){this.closeRefresh();},closeRefresh:function(){this.refreshOnClose=true;this.closeHandler();},onHiliteTag:function(wa,xa){if(xa.version!=x.VIEWER_SNOWLIFT)return;var ya=xa.tag;if(ya)this.switchHilitedTags(ya,true);},onUpdateTagBox:function(wa,xa){if(xa.version==x.VIEWER_SNOWLIFT)this.updateTagBox(xa.id,xa.approve);}});e.exports=va;});
__d("legacy:AudienceSelector",["AudienceSelector"],function(a,b,c,d){b('AudienceSelector');},3);
__d("legacy:CustomPrivacyOption",["CustomPrivacyOption"],function(a,b,c,d){a.CustomPrivacyOption=b('CustomPrivacyOption');},3);
__d("legacy:Selector",["Selector"],function(a,b,c,d){a.Selector=b('Selector');},3);
var FriendListPrivacyOptions=(function(){var a=false,b=false,c=null,d={},e=function(f){if(is_empty(d))PageTransitions.registerHandler(function(){d={};a=false;b=false;});var g=f.getAttribute('data-name');d[g]=f;Selector.listen(f,'select',function(h){var i=h.option,j=DOM.find(i,'a.itemAnchor'),k=j.getAttribute('data-flid');if(!k)return;var l=j.getAttribute('data-dynamic');if(l&&a){FriendListPrivacyOptions.showSmartListNux(i,k);}else if(!l&&b)FriendListPrivacyOptions.showDumbListNux([k]);});};return {listen:function(f,g,h){var i=ge(f);if(!i)return;var j=Parent.byClass(i,'audienceSelector');if(j){e(j);a=g;b=h;}},showSmartListNux:function(f,g){new AsyncRequest('/ajax/friends/lists/smart_list_publish_nux.php').setData({option_id:f.id,flid:g}).send();a=false;},setContextualDialog:function(f,g){var h=Parent.byClass(g,'audienceSelector');if(h){f.setContext(h);f.show();var i=Arbiter.subscribe('composer/publish',function(){f.hide();});f.subscribe('hide',function(){i.unsubscribe();});}},showDumbListNux:function(f){new AsyncRequest('/ajax/friends/lists/dumb_list_publish_nux.php').setData({flids:f}).send();b=false;},showBothListsNux:function(f,g){c=f;FriendListPrivacyOptions.showDumbListNux(g);},setDialog:function(){if(!c)return;var f=Dialog.getCurrent();if(f)f.setCloseHandler(function(){FriendListPrivacyOptions.showSmartListNux(c);c=null;});}};})();
__d("legacy:privacy-common",["PrivacyConst","PrivacyModel"],function(a,b,c,d){var e=b('PrivacyConst');a.PrivacyModel=b('PrivacyModel');a.PrivacyBaseValue=e.BaseValue;a.PrivacyFriendsValue=e.FriendsValue;},3);
function OnlyMePrivacyOption(){}copyProperties(OnlyMePrivacyOption.prototype,{init:function(a){this._selector=Parent.byClass(a,'composerAudienceSelector');this._plusLabel=DOM.find(a,'.plusLabel');if(!this._selector)return;this._elem=a;this._taggedIDs=[];this._tags=[];this._hasEvent=false;this._recalculateTooltipAndLabel();this._updateSelector();Arbiter.subscribe('Composer/changedtags',function(b,c){var d=this._hasEvent;this._hasEvent=c.eventTag;this._tags=c.withTags.map(function(f){return f.getText();});this._taggedIDs=c.withTags.map(function(f){return f.getValue();});for(var e in c.mention)if(c.mention[e].type=='user'&&c.mention[e].uid!=Env.user){this._tags.push(c.mention[e].text);this._taggedIDs.push(c.mention[e].uid);}else if(c.mention[e].type=='event')this._hasEvent=true;if(this._hasEvent&&d!=this._hasEvent)this._eventTagChanged();if(this._recalculateTooltipAndLabel()&&Selector.isOptionSelected(this._elem)){this._updateSelector();Arbiter.inform('SelectedPrivacyOption/changed',this._getChangedData());}}.bind(this));Selector.listen(this._selector,'change',this._updateSelector.bind(this));},_eventTagChanged:function(){},_getChangedData:function(){return {hasEvent:this._hasEvent,tags:this._taggedIDs,privacy:PrivacyFriendsValue.SELF};},_recalculateTooltipAndLabel:function(){var a=this._tooltip,b=this._label;if(this._taggedIDs.length){this._tooltip="Anyone tagged";this._label="Only Me"+' (+)';}else{this._tooltip="Only you";this._label="Only Me";}CSS.conditionShow(this._plusLabel,this._taggedIDs.length);return (a!=this._tooltip)||(b!=this._label);},_updateSelector:function(){if(Selector.isOptionSelected(this._elem)){Selector.setButtonLabel(this._selector,this._label);Selector.setButtonTooltip(this._selector,this._tooltip);return false;}return true;}});
__d("TypeaheadBestName",["TypeaheadUtil","copyProperties"],function(a,b,c,d,e,f){var g=b('TypeaheadUtil'),h=b('copyProperties');function i(j){this._typeahead=j;}h(i.prototype,{_subscription:null,enable:function(){var j=this._typeahead.getView();this._subscription=j.subscribe('beforeRender',function(k,l){var m=l.value;for(var n=0;n<l.results.length;++n){var o=l.results[n];if(o.alternate_names==null)continue;if(g.isQueryMatch(m,o.default_name)){o.text=o.default_name;return;}for(var p=0;p<o.alternate_names.length;p++)if(g.isQueryMatch(m,o.alternate_names[p])){o.text=o.alternate_names[p];return;}o.text=o.default_name;}});},disable:function(){this._typeahead.getView().unsubscribe(this._subscription);this._subscription=null;}});e.exports=i;});
__d("legacy:BestNameTypeaheadBehavior",["TypeaheadBestName"],function(a,b,c,d){var e=b('TypeaheadBestName');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.buildBestAvailableNames=function(f){f.enableBehavior(e);};},3);
var StreamShareVideo={_endpoints:[],_thumbs:[],registerThumb:function(a,b,c,d){StreamShareVideo._endpoints[a+' '+c]=d;StreamShareVideo._thumbs[a+' '+c]=b;},clickTitle:function(a,b,event){this.expandInlineOrRedirect(a,b,event);},expandInlineOrRedirect:function(a,b,event){if(StreamShareVideo._shouldFollowHref(event))return true;var c=StreamShareVideo._thumbs[a+' '+b],d=ge(c);if(d){CSS.addClass(d,"uiVideoThumbLoading");AsyncRequest.bootstrap(StreamShareVideo._endpoints[a+' '+b],d.parentElement);return false;}return true;},clickTimeline:function(a,b,event){if(StreamShareVideo._shouldFollowHref(event))return true;CSS.addClass(a,"_1xu");CSS.removeClass(a,"_1xv");AsyncRequest.bootstrap(b,a);return false;},_shouldFollowHref:function(event){event=$E(event);if(!event)return false;if(event.getModifiers().any||event.isMiddleClick())return true;return false;}};
function tz_calculate(a){var b=new Date(),c=b.getTimezoneOffset()/30,d=b.getTime()/1000,e=Math.round((a-d)/1800),f=Math.round(c+e)%48;if(f==0){return 0;}else if(f>24){f-=Math.ceil(f/48)*48;}else if(f<-28)f+=Math.ceil(f/-48)*48;return f*30;}function tz_autoset(a,b){if(!a||undefined==b)return;if(window.tz_autoset.calculated)return;window.tz_autoset.calculated=true;var c=-tz_calculate(a);if(c!=b){var d='/ajax/autoset_timezone_ajax.php';new AsyncRequest().setURI(d).setData({gmt_off:c}).setErrorHandler(bagofholding).setTransportErrorHandler(bagofholding).setOption('suppressErrorAlerts',true).send();}}
__d("TypingDetector",["event-extensions","function-extensions","ArbiterMixin","Class","Input","Run","copyProperties","createObjectFrom"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('ArbiterMixin'),h=b('Class'),i=b('Input'),j=b('Run'),k=b('copyProperties'),l=b('createObjectFrom');function m(n){this._input=n;this._ignoreKeys={};}m.INACTIVE=0;m.TYPING=1;m.QUITTING=2;k(m.prototype,g,{_timeout:7000,_currentState:m.INACTIVE,init:function(){this.init=bagofholding;this.reset();Event.listen(this._input,'keyup',this._update.bind(this));j.onUnload(this._onunload.bind(this));},reset:function(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=m.INACTIVE;},setIgnoreKeys:function(n){this._ignoreKeys=l(n);},_onunload:function(){if(this._currentState==m.TYPING)this._transition(m.QUITTING);},_update:function(event){var n=Event.getKeyCode(event),o=this._currentState;if(!this._ignoreKeys[n])if(i.getValue(this._input).trim().length===0){if(o==m.TYPING)this._transition(m.INACTIVE);}else if(o==m.TYPING){this._recordKeystroke();}else if(o==m.INACTIVE){this._transition(m.TYPING);this._recordKeystroke();}},_transition:function(n){this.reset();this._currentState=n;this.inform('change',n);},_recordKeystroke:function(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=this._checkTyping.bind(this).defer(this._timeout);},_checkTyping:function(){var n=this._lastKeystrokeTime+this._timeout,o=Date.now();if(o>n){this._transition(m.INACTIVE);}else{clearTimeout(this._checkTimer);this._checkTimer=this._checkTyping.bind(this).defer(n-o+10);}}});e.exports=m;});
__d("MentionsInputMatchers",[],function(a,b,c,d,e,f){var g=['@','\\uff20','+','\\uff0b'].join(''),h='.,*?$|#{}()\\^\\-\\[\\]\\\\\/!%&\'"~=<>_:;',i='\\b[A-Z][^ A-Z'+h+']',j='([^'+g+h+']|['+h+'][^ '+h+'])',k='(?:^|\\s)(?:['+g+']('+j+'{0,20}))',l='(?:(?:'+i+'+)|'+k+')',m='(?:'+i+'{4,})',n={trigger:new RegExp('['+g+']$'),mainMatcher:new RegExp(k+'$'),autoMatcher:new RegExp(l+'$'),userMatcher:new RegExp(m+'$')};e.exports=n;});
__d("MentionsInput",["event-extensions","function-extensions","Arbiter","ArbiterMixin","Class","CSS","DataStore","DOM","HTML","Input","InputSelection","Parent","htmlize","Style","Typeahead","TypeaheadUtil","UserAgent","copyProperties","MentionsInputMatchers"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('Class'),j=b('CSS'),k=b('DataStore'),l=b('DOM'),m=b('HTML'),n=b('Input'),o=b('InputSelection'),p=b('Parent'),q=b('htmlize'),r=b('Style'),s=b('Typeahead'),t=b('TypeaheadUtil'),u=b('UserAgent'),v=b('copyProperties'),w=b('MentionsInputMatchers');function x(y,z,aa,ba,ca,da){k.set(y,'MentionsInput',this);this._root=y;this._typeahead=z;this._input=aa;var ea=false;try{ea=document.activeElement===this._input;}catch(fa){}if(ea){this.init.bind(this,ba,ca,da).defer();}else var ga=Event.listen(this._input,'focus',function(){this.init.bind(this,ba,ca,da).defer();ga.remove();}.bind(this));}x.getInstance=function(y){var z=p.byClass(y,'uiMentionsInput');return z?k.get(z,'MentionsInput'):null;};v(x.prototype,h,{init:function(y,z,aa){this.init=Function.prototype;this._initialized=true;this._highlighter=l.find(this._root,'.highlighter');this._highlighterInner=this._highlighter.firstChild;this._highlighterContent=l.find(this._root,'.highlighterContent');this._hiddenInput=l.find(this._root,'.mentionsHidden');this._placeholder=this._input.getAttribute('placeholder')||'';this._maxMentions=y.max||6;this._metrics=aa;if(u.firefox()<4){this._input.blur();setTimeout(function(){this._input.focus();}.bind(this));}if(!this._hiddenInput.name){var ba=this._input.name;this._input.name=ba+'_text';this._hiddenInput.name=ba;}this._initEvents();this._initTypeahead();this.reset(z);this.inform('init',null,g.BEHAVIOR_STATE);},reset:function(y){if(!this._initialized)return;this._mentioned={};this._orderedUIDs=[];this._numMentioned=0;this._filterData=null;this._hiddenInput&&(this._hiddenInput.value='');this._highlighterContent&&l.empty(this._highlighterContent);this._highlighterAuxContent&&l.remove(this._highlighterAuxContent);this._highlighterAuxContent=null;n.setPlaceholder(this._input,this._placeholder);r.set(this._typeahead.getElement(),'height','auto');if(y){n.setValue(this._input,y.flattened);for(var z in y.mention_data)this._addToken({uid:z,text:y.mention_data[z],type:'unknown'});}this._updateTypeahead();this._updateWidth();this._update();},getValue:function(){return n.getValue(this._input);},getRawValue:function(){this._update();return n.getValue(this._hiddenInput);},checkValue:function(){var y=this._typeahead.getCore().getValue();if(w.trigger.exec(y)||y==='')this.inform('sessionEnd',{});},getTypeahead:function(){return this._typeahead;},_initEvents:function(){var y=this._update.bind(this);Event.listen(this._input,{input:y,keyup:y,change:y,blur:this._handleBlur.bind(this),focus:this._handleFocus.bind(this)});if(this._metrics){this._metrics._reset();this._metrics.bindSessionStart(this._typeahead,'render',true);this._metrics.bindSessionEnd(this._typeahead.getView(),'select',true);this._metrics.bindSessionEnd(this,'sessionEnd',false);Event.listen(this._input,'keyup',function(event){this.checkValue.bind(this).defer();}.bind(this));}},_initTypeahead:function(){this._typeahead.subscribe('select',function(ca,da){var ea=da.selected;this._addToken({uid:ea.uid,text:ea.text,type:ea.type});this.updateValue();}.bind(this));var y=this._input,z=null,aa=function(){if(z===null){z=n.getSubmitOnEnter(y);n.setSubmitOnEnter(y,false);}},ba=function(){if(z!==null){n.setSubmitOnEnter(y,z);z=null;}};this._typeahead.subscribe('render',aa);this._typeahead.subscribe('reset',ba);this._typeahead.subscribe('highlight',function(ca,da){da.index>=0?aa():ba();});this._typeahead.subscribe('query',function(){this._filterData=null;}.bind(this));this._typeahead.getCore().suffix='';this._handleFocus();},_handleBlur:function(){if(this._filterToken){this._filterToken.remove();this._filterToken=null;}},_handleFocus:function(){if(!this._filterToken)this._filterToken=this._typeahead.getData().addFilter(this._filterResults.bind(this));this._updateWidth();},_filterResults:function(y){if(this._filterData===null){var z=o.get(this._input).start||0;for(var aa=0;aa<this._offsets.length;aa++){var ba=this._offsets[aa];if(z>ba[0]&&z<=ba[1]){this._filterData={caretIsInsideMention:true};return false;}}var ca=this._typeahead.getCore();this._filterData={value:ca.getValue(),rawValue:ca.getRawValue()};}if(this._filterData.caretIsInsideMention)return false;if(w.mainMatcher.test(this._filterData.rawValue))return true;if(y.type!='user')return false;if(w.userMatcher.test(this._filterData.value))return true;return t.isExactMatch(this._filterData.value,this._typeahead.getData().getTextToIndex(y));},_addToken:function(y){var z=y.uid;if(!this._mentioned.hasOwnProperty(z)){this._mentioned[z]=y;this._orderedUIDs.push(z);this._numMentioned++;this._updateTypeahead();}},_removeToken:function(y){if(this._mentioned.hasOwnProperty(y)){delete this._mentioned[y];this._orderedUIDs.remove(y);this._numMentioned--;this._updateTypeahead();}},_reduceToken:function(y,z){var aa=z.split(' '),ba=[];for(var ca=0;ca<aa.length;ca++)if(y.indexOf(aa[ca])!=-1)ba.push(aa[ca]);aa=ba;for(ca=1;ca<aa.length;ca++)for(var da=1;da<aa[ca-1].length+1;da++)if(y.indexOf(aa[ca-1].substr(0,da)+aa[ca])!=-1)aa.splice(ca-1,1);while(y.indexOf(aa.join(' '))==-1)aa.splice(0,1);return aa.join(' ');},_update:function(){var y=this.getValue();if(y==this._value)return;this._updateTokens();this.updateValue();this._updateDirection();},_updateTokens:function(){var y=this.getValue(),z=false;for(var aa=0;aa<this._orderedUIDs.length;++aa){var ba=this._orderedUIDs[aa],ca=this._mentioned[ba],da=ca.text,ea;if(ca.type=='user'&&(ea=this._reduceToken(y,da))!==''){if(ea==da.substring(0,da.lastIndexOf(' '))&&y==this._value.substring(0,this._value.length-1)){y=y.substring(0,y.lastIndexOf(' '));z=true;}ca.text=ea;}else if(!da||y.indexOf(da)==-1||typeof da!=='string')this._removeToken(ba);}this._value=y;if(z)n.setValue(this._input,y);},updateValue:function(){var y=this.getValue(),z=this._orderedUIDs,aa=[],ba,ca,da,ea;for(ea=0;ea<z.length;++ea){ca=this._mentioned[z[ea]].text;y=y.replace(ca,function(fa,ga){aa.push([ga,ga+ca.length]);return ca;});}for(ea=0;ea<z.length;++ea){da=z[ea];ca=this._mentioned[da].text;y=y.replace(ca,'@['+da+':]');}ba=q(y);for(ea=0;ea<z.length;++ea){da=z[ea];ca=this._mentioned[da].text;ba=ba.replace('@['+da+':]','<b>'+q(ca)+'</b>');ca=ca.replace(/[\\\]:]/g,function(fa){return '\\'+fa;});y=y.replace('@['+da+':]','@['+da+':'+ca+']');}if(u.ie()){ba=ba.replace(/ {2}/g,'&nbsp;<wbr />&nbsp;<wbr />');ba=ba.replace(/ (?=[^\/]|\/[^>])/g,'&nbsp;<wbr />');}this._offsets=aa;this._hiddenInput.value=y;l.setContent(this._highlighterContent,m(ba));this._updateHighlighter();this._updateHeight();},_updateDirection:function(){var y=r.get(this._input,'direction');if(y==this._dir)return;this._dir=y;r.set(this._highlighter,'direction',y);if(y=='rtl'){r.set(this._highlighter,'text-align','right');}else r.set(this._highlighter,'text-align','left');},_updateWidth:function(){var y=r.getFloat.curry(this._input),z=this._input.offsetWidth-y('paddingLeft')-y('paddingRight')-y('borderLeftWidth')-y('borderRightWidth');if(u.firefox())z-=2;if(u.ie()<=7){z-=r.getFloat(this._highlighterInner,'paddingLeft');this._highlighter.style.zoom=1;}this._highlighterInner.style.width=Math.max(z,0)+'px';},_updateHeight:function(){if(this._highlighterAuxContent){var y=this._highlighter.offsetHeight,z=this._typeahead.getElement();if(y>z.offsetHeight){r.set(z,'height',y+'px');g.inform('reflow');}}},_updateTypeahead:function(){var y=this._typeahead.getCore(),z=null;if(!this._maxMentions||this._numMentioned<this._maxMentions)z=w.autoMatcher;y.matcher=z;y.setExclusions(this._orderedUIDs);this.inform('update',{mentioned:this._mentioned});},setPlaceholder:function(y){this._placeholder=y;if(!this.hasAuxContent())n.setPlaceholder(this._input,y);},_updateHighlighter:function(){if(this._highlighterContent)j.conditionShow(this._highlighterContent,this._numMentioned>0||this.hasAuxContent());},setAuxContent:function(y){if(this._highlighterContent){if(!this._highlighterAuxContent){this._highlighterAuxContent=l.create('span',{className:'highlighterAuxContent'});l.insertAfter(this._highlighterContent,this._highlighterAuxContent);}l.setContent(this._highlighterAuxContent,y);if(y){n.setPlaceholder(this._input,'');}else n.setPlaceholder(this._input,this._placeholder);this._updateHighlighter();this._updateHeight();}},hasAuxContent:function(){var y=this.getAuxContentRoot();return y&&y.innerHTML.length>0;},getAuxContentRoot:function(){return this._highlighterAuxContent;},addMention:function(y){var z=this.getValue();n.setValue(this._input,z+" "+y.text);this._addToken(y);this._update();},getMentions:function(){return this._mentioned;}});e.exports=x;});
__d("OptimisticUFI",["event-extensions","Arbiter","AsyncRequest","AsyncResponse","CommentPrelude","CSS","DOM","Form","HTML","Input","MentionsInput","Parent","htmlize","XHPTemplate","randomInt"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('AsyncResponse'),j=b('CommentPrelude'),k=b('CSS'),l=b('DOM'),m=b('Form'),n=b('HTML'),o=b('Input'),p=b('MentionsInput'),q=b('Parent'),r=b('htmlize'),s=b('XHPTemplate'),t=b('randomInt'),u={_commentSeqNo:0,init:function(v){this._commentTemplate=v;if(!this._loaded){Event.listen(document.documentElement,'click',this._clickHandler.bind(this),Event.Priority.URGENT);this._loaded=true;}},_clickHandler:function(event){var v=event.getTarget(),w=v.name=='comment'&&v.parentNode&&q.byClass(v,'optimistic_submit');if(!w)return true;var x=v.form,y=l.scry(x,'textarea')[0];if(o.isEmpty(y))return true;j.uncollapse(x);var z,aa,ba=l.scry(v,'^.commentList li.uiUfiAddComment')[0];if(!ba){z=this._commentTemplate.render();aa=s.getNode(z,'text');l.setContent(aa,n(r(y.value.trim())));}var ca=l.scry(x,'ul.commentList')[0];if(!ca)return true;var da;if(ba){da=ba.previousSibling;k.show(da);k.hide(ba);}else{k.show(ca.parentNode);ca.appendChild(z);da=ca.lastChild;}var ea=t(0,4294967295);da.id='optimistic_comment_'+ea+'_'+this._commentSeqNo++;var fa=m.serialize(x);fa.comment_replace=da.id;fa.comment=1;function ga(){new h(m.getAttribute(x,'action')).setData(fa).setRelativeTo(x).setErrorHandler(function(ia){k.addClass(da,'uiUfiCommentFailed');i.defaultErrorHandler(ia);}).setServerDialogCancelHandler(function(){l.remove(da);}).send();}if(!ba)Event.listen(s.getNode(z,'retry_link'),'click',ga);ga();y.value=y.style.height='';y.focus();var ha=p.getInstance(y);ha&&ha.reset();if(ba){l.remove(ba);}else g.inform('ufi/comment',{form:x});return false;}};e.exports=u;});
__d("UFIScrollHighlight",["CSS","ScrollHighlight"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('ScrollHighlight'),i={actOn:function(j){h.actOn(j,'#edeff4');g.removeClass(j,'highlightComment');}};e.exports=i;});
__d("UFIUpdate",["CommentPrelude","CSS","DOM","DOMQuery","HTML","MentionsInput","Parent","ScrollableArea","ScrollAwareDOM"],function(a,b,c,d,e,f){var g=b('CommentPrelude'),h=b('CSS'),i=b('DOM'),j=b('DOMQuery'),k=b('HTML'),l=b('MentionsInput'),m=b('Parent'),n=b('ScrollableArea'),o=b('ScrollAwareDOM'),p={expandFeedback:function(q,r,s){i.scry(q,r).forEach(function(t){g.expand(t,s);});},uncollapseFeedback:function(q){g.uncollapse(m.byTag(i.find(q,'.fbUfi'),'form'));},multiContentReplaceGlobal:function(q,r){this.multiContentReplace(document.documentElement,q,r);},multiContentReplace:function(q,r,s){s=s instanceof k?s.getRootNode():s;i.scry(q,r).forEach(function(t){o.replace(t,s.cloneNode(true));});},refocusCommentBox:function(q,r){var s=i.find(q,'textarea');s.value=s.style.height="";if(r){s.blur();s.focus.defer();}else document.documentElement.onfocusin({target:s});},resetMentionsInput:function(q){var r=l.getInstance(i.find(q,'div.uiMentionsInput'));r&&r.reset();},insertAtBottom:function(q,r,s,t){var u=i.scry(q,'.comment_'+s).length;if(r)u+=i.scry(q,'#'+r).length;if(!u){var v=i.find(q,'.commentList'),w=n.getInstance(v),x=w&&w.isScrolledToBottom();o.appendContent(v,t);x&&w.scrollToBottom(false);}},updateUnsubscribeLink:function(q,r){var s=i.scry(q,'.unsub_link')[0];if(s){i.replace(s,r);}else if(r)i.insertAfter(i.find(q,'.comment_link'),[" \xB7 ",r]);},updateSeenCount:function(q){j.scry(q,'.uiUfiSeenBar').forEach(function(t){h.hide(t);});j.scry(q,'.uiUfiViewSeenCount').forEach(function(t){h.hide(t);});var r=j.scry(q,'.uiUfiLike')[0];if(r&&r.childNodes.length===0)r=null;r=r||j.scry(q,'.uiUfiSeenBar')[0];if(!r)return;var s=j.scry(r,'.uiUfiViewSeenCount')[0];if(!s)return;h.show(s);h.show(r);}};e.exports=p;});
function ufi_add_ft_hidden_node(a){if(a.link_data)return;var b=collect_data_attribs(a,['ft']).ft;if(Object.keys(b).length){var c=DOM.create('input',{type:'hidden',name:'link_data',value:JSON.stringify(b)});a.appendChild(c);}}function ufi_add_all_link_data(){Bootloader.loadComponents('dom-collect',function(){DOM.scry(document.body,'form.commentable_item').forEach(ufi_add_ft_hidden_node);});}function question_add_all_link_data(){Bootloader.loadComponents('dom-collect',function(){DOM.scry(document.body,'form.fbEigenpollForm').forEach(ufi_add_ft_hidden_node);DOM.scry(document.body,'form.fbQuestionPollForm').forEach(ufi_add_ft_hidden_node);});}
__d("legacy:UIPagelet",["UIPagelet"],function(a,b,c,d){a.UIPagelet=b('UIPagelet');},3);
__d("Scrollable",["event-extensions","Parent","UserAgent"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Parent'),h=b('UserAgent'),i=function(event){var k=g.byClass(event.getTarget(),'scrollable');if(!k)return;if((typeof event.axis!=='undefined'&&event.axis===event.HORIZONTAL_AXIS)||(event.wheelDeltaX&&!event.wheelDeltaY))return;var l=event.wheelDelta?event.wheelDelta:-event.detail,m=k.scrollHeight,n=k.clientHeight;if(m>n){var o=k.scrollTop;if((l>0&&o===0)||(l<0&&o>=m-n)){event.prevent();}else if(h.ie()<9)if(k.currentStyle){var p=k.currentStyle.fontSize;if(p.indexOf('px')<0){var q=document.createElement('div');q.style.fontSize=p;q.style.height='1em';p=q.style.pixelHeight;}else p=parseInt(p,10);k.scrollTop=o-Math.round(l/120*p);event.prevent();}}},j=document.documentElement;if(h.firefox()){j.addEventListener('DOMMouseScroll',i,false);}else Event.listen(j,'mousewheel',i);});
__d("TinyViewport",["event-extensions","CSS","DOM","debounce"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DOM'),i=b('debounce'),j=i(function(){var k=document.documentElement,l=h.getDocumentScrollElement(),m=k.clientHeight<400||l.clientWidth<l.scrollWidth;g.conditionClass(k,'tinyViewport',m);g.conditionClass(k,'canHaveFixedElements',!m);});j();Event.listen(window,'resize',j);});
__d("ContextualLayerAsyncRelative",["event-extensions","copyProperties","Parent"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('Parent');function i(j){this._layer=j;}g(i.prototype,{_layerSubscription:null,_listener:null,enable:function(){this._layerSubscription=this._layer.subscribe('show',this._attachListener.bind(this));if(this._layer.isShown())this._attachListener();},disable:function(){this._layerSubscription.unsubscribe();this._layerSubscription=null;if(this._listener){this._listener.remove();this._listener=null;}},_attachListener:function(){this._listener=Event.listen(this._layer.getRoot(),'click',this._onclick.bind(this));},_onclick:function(j){var k=h.byTag(j.getTarget(),'A');if(!k)return;var l=k.getAttribute('ajaxify'),m=k.href,n=l||m;if(k.rel==='async'||k.rel==='async-post'){d(['AsyncRequest'],function(o){o.bootstrap(n,this._layer.getContext(),k.rel==='async-post');}.bind(this));return false;}}});e.exports=i;});
__d("ContextualLayerUpdateOnScroll",["event-extensions","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscriptions:[],enable:function(){this._subscriptions=[this._layer.subscribe('show',this._attachScrollListener.bind(this)),this._layer.subscribe('hide',this._removeScrollListener.bind(this))];},disable:function(){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this.detach();},_attachScrollListener:function(){if(this._listener)return;var i=this._layer.getContextScrollParent();this._listener=Event.listen(i,'scroll',this._layer.updatePosition.bind(this._layer));},_removeScrollListener:function(){this._listener&&this._listener.remove();this._listener=null;}});e.exports=h;});
__d("LayerRemoveOnHide",["function-extensions","DOM","copyProperties"],function(a,b,c,d,e,f){b('function-extensions');var g=b('DOM'),h=b('copyProperties');function i(j){this._layer=j;}h(i.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('hide',g.remove.curry(this._layer.getRoot()));},disable:function(){if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}}});e.exports=i;});
__d("LayerStopBlur",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscriptions:null,_onBlur:null,enable:function(){this._subscriptions=[this._layer.subscribe('show',this._attach.bind(this)),this._layer.subscribe('hide',this._detach.bind(this))];if(this._layer.isShown())this._attach();},disable:function(){this._detach();while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;},_detach:function(){this._onBlur&&this._onBlur.unsubscribe();this._onBlur=null;},_attach:function(){(function(){this._onBlur=this._layer.subscribe('blur',function(){return false;});}).bind(this).defer();}});e.exports=h;});
__d("ContextualDialogArrow",["CSS","DOM","Locale","Style","Vector","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('Locale'),j=b('Style'),k=b('Vector'),l=b('copyProperties'),m=b('cx'),n=15,o=16,p={bottom:"_k8",top:"_k9",right:"_ka",left:"_kb"},q={above:'bottom',below:'top',left:'right',right:'left'};function r(s){this._layer=s;}l(r.prototype,{_subscription:null,_arrow:null,enable:function(){this._subscription=this._layer.subscribe(['adjust','reposition'],this._handle.bind(this));},disable:function(){this._subscription.unsubscribe();this._subscription=null;},_handle:function(s,t){if(s==='adjust'){this._repositionArrow(t);}else this._repositionRoot(t);},_repositionRoot:function(s){var t=this._layer.getRoot();if(!s.isVertical()){var u=parseInt(j.get(t,'top'),10);u-=n;j.set(t,'top',u+'px');}},_repositionArrow:function(s){var t=this._layer._contentWrapper,u=0,v=s.getAlignment(),w=s.getPosition();if(w=='above'||w=='below')if(v=='center'){u=50;}else if(v=='right')u=100;var x=q[w];for(var y in p)g.conditionClass(t,p[y],x===y);if(w=='none')return;if(!this._arrow){this._arrow=this._drawArrow();h.appendContent(t,this._arrow);}g.conditionClass(t,"_kc",this._layer.getFooter());j.set(this._arrow,'top','');j.set(this._arrow,'left','');j.set(this._arrow,'right','');j.set(this._arrow,'margin','');var z=x=='top'||x=='bottom',aa=z?(i.isRTL()?'right':'left'):'top';j.set(this._arrow,aa,u+'%');var ba=0;if(v!='center'){ba=n;if(z){var ca=this._layer.getContext(),da=k.getElementDimensions(ca).x;if(da<o+(n*2))ba=Math.max((da/2)-(o/2),0);}}ba+=o*u/100;if(v!='left')ba*=-1;j.set(this._arrow,'margin-'+aa,ba+'px');},_drawArrow:function(){return h.create('i',{className:"_kd"});}});r.OFFSET=n;r.LENGTH=o;e.exports=r;});
__d("ContextualDialogFitInViewport",["event-extensions","ContextualDialogArrow","ContextualLayerDimensions","Style","Vector","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ContextualDialogArrow'),h=b('ContextualLayerDimensions'),i=b('Style'),j=b('Vector'),k=b('copyProperties'),l=g.OFFSET,m=g.LENGTH,n=l+m;function o(p){this._layer=p;}k(o.prototype,{_scrollListener:null,_subscription:null,_minimumTop:null,enable:function(){this._subscription=this._layer.subscribe(['show','hide','reposition'],function(p,q){if(p=='reposition'){this._calculateMinimumTop(q);}else if(p=='show'){this._attachScroll();this._adjustForScroll();}else this._detachScroll();}.bind(this));if(this._layer.isShown())this._attachScroll();},disable:function(){if(this._layer.isShown())this._detachScroll();this._subscription.unsubscribe();this._subscription=null;},_attachScroll:function(){this._scrollListener=Event.listen(this._layer.getContextScrollParent()||window,'scroll',this._adjustForScroll.bind(this));},_detachScroll:function(){this._scrollListener.remove();this._scrollListener=null;},_getContentHeight:function(){return j.getElementDimensions(this._layer._contentWrapper).y;},_getContextY:function(){return j.getElementPosition(this._layer.getContext()).y;},_calculateMinimumTop:function(p){if(p.isVertical())return;this._minimumTop=(this._getContextY()-(this._getContentHeight()-n)+p.getOffsetY());},_adjustForScroll:function(){var p=this._layer._getOrientation();if(p.isVertical())return;var q=h.getViewportRect(this._layer),r=q.b-this._minimumTop;if(r<0)return;var s=this._getContentHeight(),t=s-(n+l),u=Math.max(0,Math.min(t,t-(r-s)));i.set(this._layer.getContent(),'top',-u+'px');}});e.exports=o;});
__d("ContextualDialog",["AccessibleLayer","Class","ContextualDialogFitInViewport","ContextualLayer","CSS","DOM","LayerButtons","LayerFormHooks","LayerMouseHooks","Style","copyProperties","csx","cx"],function(a,b,c,d,e,f){var g=b('AccessibleLayer'),h=b('Class'),i=b('ContextualDialogFitInViewport'),j=b('ContextualLayer'),k=b('CSS'),l=b('DOM'),m=b('LayerButtons'),n=b('LayerFormHooks'),o=b('LayerMouseHooks'),p=b('Style'),q=b('copyProperties'),r=b('csx'),s=b('cx');function t(u,v){this.parent.construct(this,u,v);}h.extend(t,j);q(t.prototype,{_footer:null,_configure:function(u,v){u.addedBehaviors.push(u.arrowBehavior);var w=l.scry(v,"div._k7");if(w.length)this._footer=w[0];this.parent._configure(u,v);},_getDefaultBehaviors:function(){return this.parent._getDefaultBehaviors().concat([g,i,m,n,o]);},_buildWrapper:function(u,v){k.addClass(v,"_k5");var w=this.parent._buildWrapper(u,v);k.addClass(this._contentWrapper,"_k6");if(u.width)this.setWidth(u.width);return w;},setWidth:function(u){this._width=Math.floor(u);p.set(this._contentWrapper,'width',u+'px');return this;},getFooter:function(){return this._footer;}});q(t,{setContext:function(u,v){u.setContext(v);}});e.exports=t;});
__d("legacy:Toggler",["Toggler"],function(a,b,c,d){a.Toggler=b('Toggler');},3);
__d("legacy:Button",["Button"],function(a,b,c,d){a.Button=b('Button');},3);
__d("ButtonGroup",["function-extensions","copyProperties","createArrayFrom","CSS","DataStore","Parent"],function(a,b,c,d,e,f){b('function-extensions');var g=b('copyProperties'),h=b('createArrayFrom'),i=b('CSS'),j=b('DataStore'),k=b('Parent'),l='firstItem',m='lastItem';function n(s,t){var u=k.byClass(s,t);if(!u)throw new Error('invalid use case');return u;}function o(s){return i.shown(s)&&h(s.childNodes).some(i.shown);}function p(s){var t,u,v;h(s.childNodes).forEach(function(w){v=o(w);i.removeClass(w,l);i.removeClass(w,m);i.conditionShow(w,v);if(v){t=t||w;u=w;}});t&&i.addClass(t,l);u&&i.addClass(u,m);i.conditionShow(s,t);}function q(s,t){var u=n(t,'uiButtonGroupItem');s(u);p(u.parentNode);}function r(s){this._root=n(s,'uiButtonGroup');j.set(this._root,'ButtonGroup',this);p(this._root);}r.getInstance=function(s){var t=n(s,'uiButtonGroup'),u=j.get(t,'ButtonGroup');return u||new r(t);};g(r.prototype,{hideItem:q.curry(i.hide),showItem:q.curry(i.show),toggleItem:q.curry(i.toggle)});e.exports=r;});
__d("legacy:MentionsInput",["MentionsInput"],function(a,b,c,d){a.MentionsInput=b('MentionsInput');},3);
__d("FormDisableOnSubmit",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._form=i;}g(h.prototype,{_subscription:null,_disabled:false,enable:function(){this._subscription=this._form.subscribe(['submit','reset'],this._handle.bind(this));},disable:function(){this._form.unsubscribe(this._subscription);this._subscription=null;},_handle:function(i,j){if(i=='submit'){if(this._disabled)return false;this._disabled=true;return true;}this._disabled=false;}});e.exports=h;});
__d("FormSubmitOnChange",["event-extensions","copyProperties","submitForm"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('submitForm');function i(j){this._form=j;}g(i.prototype,{_listener:null,enable:function(){this._listener=Event.listen(this._form.getRoot(),'change',this._submit.bind(this));},disable:function(){this._listener.remove();this._listener=null;},_submit:function(){h(this._form.getRoot());}});e.exports=i;});
__d("UIForm",["event-extensions","ArbiterMixin","BehaviorsMixin","Class","DOM","Form","FormDisableOnSubmit","FormSubmitOnChange","Run","areObjectsEqual","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('BehaviorsMixin'),i=b('Class'),j=b('DOM'),k=b('Form'),l=b('FormDisableOnSubmit'),m=b('FormSubmitOnChange'),n=b('Run'),o=b('areObjectsEqual'),p=b('copyProperties');function q(r,s,t,u){this._root=r;this.controller=r;this._message=s;n.onAfterLoad(function(){this._originalState=k.serialize(this._root);}.bind(this));this._forceDirty=t;this._submitted=false;Event.listen(this._root,'submit',this._handleSubmit.bind(this));if(u&&u.length)this.enableBehaviors(u);var v=true;n.onBeforeUnload(this.checkUnsaved.bind(this),v);}p(q.prototype,g,h,{getRoot:function(){return this._root;},_handleSubmit:function(){if(this.inform('submit')===false)return false;this._submitted=true;return true;},reset:function(){this.inform('reset');this._submitted=false;},isDirty:function(){if(this._submitted||!j.contains(document.body,this._root))return false;if(this._forceDirty)return true;var r=k.serialize(this._root);return !o(r,this._originalState);},checkUnsaved:function(){if(this.isDirty())return this._message;return null;}});e.exports=a.UIForm||q;});
__d("legacy:ScrollableArea",["ScrollableArea"],function(a,b,c,d){a.ScrollableArea=b('ScrollableArea');},3);
__d("TooltipLink",["Parent","Tooltip"],function(a,b,c,d,e,f){var g=b('Parent'),h=b('Tooltip'),i={setTooltipText:function(j,k){j=g.byTag(j,'a');j&&h.set(j,k);}};e.exports=i;});
__d("legacy:LayerDestroyOnHide",["LayerDestroyOnHide"],function(a,b,c,d){a.LayerDestroyOnHide=b('LayerDestroyOnHide');},3);
__d("legacy:ContextualDialogX",["ContextualDialogX"],function(a,b,c,d){a.ContextualDialogX=b('ContextualDialogX');},3);
__d("legacy:Tooltip",["Tooltip"],function(a,b,c,d){a.Tooltip=b('Tooltip');},3);
__d("ClearableTypeahead",["event-extensions"],function(a,b,c,d,e,f){b('event-extensions');var g={resetOnCloseButtonClick:function(h,i){Event.listen(i,'click',function(){var j=h.getCore();j.reset();j.getElement().focus();});}};e.exports=g;});
__d("TypeaheadAreaCore",["Class","InputSelection","TypeaheadCore","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('InputSelection'),i=b('TypeaheadCore'),j=b('copyProperties');function k(l){this.parent.construct(this,l);this.matcher=new RegExp(this.matcher+'$');this.preventFocusChangeOnTab=true;}g.extend(k,i);j(k.prototype,{prefix:'',suffix:', ',matcher:"\\b[^,]*",click:bagofholding,select:function(l){this.parent.select(l);var m=this.element.value,n=this.prefix+l.text+this.suffix;this.expandBounds(m,n);var o=m.substring(0,this.start),p=m.substring(this.end);this.element.value=o+n+p;h.set(this.element,o.length+n.length);},expandBounds:function(l,m){l=l.toLowerCase().trim();m=m.toLowerCase();var n,o,p,q,r=/\s/;o=l.substring(this.start,this.end);p=m.indexOf(o);n=this.start;while(n>=0&&p>=0){q=l.charAt(n-1);if(!q||r.test(q))this.start=n;o=q+o;p=m.indexOf(o);n--;}o=l.substring(this.start,this.end);p=m.indexOf(o);n=this.end;while(n<=l.length&&p>=0){q=l.charAt(n);if(!q||r.test(q))this.end=n;o=o+q;p=m.indexOf(o);n++;}},getRawValue:function(){var l=h.get(this.element).start||0;return this.parent.getValue().substring(0,l);},getValue:function(){var l=this.matcher&&this.matcher.exec(this.getRawValue());if(!l)return '';var m=l[0],n=l.index+m.length;m=m.replace(/^\s/,'');var o=m.length;m=m.replace(/\s$/,'');var p=o-m.length;this.start=n-o;this.end=n+p;return l[1]||l[0];}});e.exports=k;});
__d("TypeaheadMetrics",["event-extensions","AsyncRequest","copyProperties","Typeahead"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('copyProperties'),i=b('Typeahead');function j(k){this.extraData={};h(this,k);}h(j.prototype,{endPoint:'/ajax/typeahead/record_basic_metrics.php',init:function(k){this.init=bagofholding;this.core=k.getCore();this.view=k.getView();this.data=k.getData();this.stats={};this.sessionActive=false;this._sessionStartEvents=[];this._sessionEndEvents=[];this._reset();this.initEvents();},_reset:function(){this.stats={};this.avgStats={};this.sessionActive=false;this.sid=Math.floor(Date.now()*Math.random());this.data.setQueryData({sid:this.sid});},recordSelect:function(k){var l=k.selected;if(l.uid==null){this.recordStat('selected_id','SELECT_NULL');}else this.recordStat('selected_id',l.uid);this.recordStat('selected_type',l.type);this.recordStat('selected_position',k.index);this.recordStat('selected_with_mouse',k.clicked?1:0);this._sessionEnd();},bindSessionStart:function(k,event,l){if(l)for(var m=0;m<this._sessionStartEvents.length;++m){var n=this._sessionStartEvents[m];n.obj.unsubscribe(n.token);}this._sessionStartEvents.push({obj:k,token:k.subscribe(event,function(o,p){this._sessionStart();}.bind(this))});},bindSessionEnd:function(k,event,l){if(l)for(var m=0;m<this._sessionEndEvents.length;++m){var n=this._sessionEndEvents[m];n.obj.unsubscribe(n.token);}this._sessionEndEvents.push({obj:k,token:k.subscribe(event,function(o,p){this._sessionEnd();}.bind(this))});},initEvents:function(){this.bindSessionStart(this.core,'focus',false);this.bindSessionEnd(this.core,'blur',false);this.view.subscribe('select',function(k,l){this.recordSelect(l);}.bind(this));this.bindSessionEnd(this.view,'select',false);this.view.subscribe('render',function(k,l){this.results=l;}.bind(this));this.data.subscribe('beforeQuery',function(k,l){if(!l.value)return;this.query=l.value;this.recordCountStat('num_queries');}.bind(this));this.data.subscribe('beforeFetch',function(k,l){if(l.fetch_context.bootstrap){this.bootstrapBegin=Date.now();}else l.fetch_context.queryBegin=Date.now();}.bind(this));this.data.subscribe('fetchComplete',function(k,l){if(l.fetch_context.bootstrap){this.recordAvgStat('bootstrap_latency',Date.now()-this.bootstrapBegin);var m={};l.response.payload.entries.forEach(function(n){if(!m[n.type]){m[n.type]=1;}else m[n.type]++;});this.recordStat('bootstrap_response_types',m);this.bootstrapped=true;}else this.recordAvgStat('avg_query_latency',Date.now()-l.fetch_context.queryBegin);}.bind(this));this.data.subscribe('dirty',function(k,l){this.bootstrapped=false;});},_sessionStart:function(){if(this.sessionActive)return;this.sessionActive=true;},_sessionEnd:function(){if(!this.sessionActive)return;this.sessionActive=false;this.submit();this._reset();},recordStat:function(k,l){this.stats[k]=l;},recordCountStat:function(k){var l=this.stats[k];this.stats[k]=l?l+1:1;},recordAvgStat:function(k,l){if(this.avgStats[k]){this.avgStats[k][0]+=l;++this.avgStats[k][1];}else this.avgStats[k]=[l,1];},submit:function(){if(Object.keys(this.stats).length){h(this.stats,this.extraData);if(this.results){var k=(this.results).map(function(n,o){return n.uid;});this.recordStat('candidate_results',JSON.stringify(k));}if(this.query)this.recordStat('query',this.query);if(this.sid)this.recordStat('sid',this.sid);if(this.bootstrapped)this.recordStat('bootstrapped',1);for(var l in this.avgStats){var m=this.avgStats[l];this.stats[l]=m[0]/m[1];}new g().setURI(this.endPoint).setMethod('POST').setData({stats:this.stats}).send();this._reset();}}});j.register=function(k,l,m){if(document.activeElement===k){l.init(m);}else var n=Event.listen(k,'focus',function(){l.init(m);n.remove();});};e.exports=j;});
__d("TypeaheadHoistFriends",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._typeahead=i;}g(h.prototype,{_subscription:null,enable:function(){var i=this._typeahead.getView();this._subscription=i.subscribe('beforeRender',function(j,k){var l=[],m=[];for(var n=0;n<k.results.length;++n){var o=k.results[n];if(o.type=='user'&&o.bootstrapped){m.push(o);}else l.push(o);}k.results=m.concat(l);});},disable:function(){this._typeahead.getView().unsubscribe(this._subscription);this._subscription=null;}});e.exports=h;});
__d("legacy:HoistFriendsTypeaheadBehavior",["TypeaheadHoistFriends"],function(a,b,c,d){var e=b('TypeaheadHoistFriends');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.hoistFriends=function(f){f.enableBehavior(e);};},3);
__d("TypeaheadShowLoadingIndicator",["CSS","copyProperties"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('copyProperties');function i(j){this._typeahead=j;}h(i.prototype,{_subscription:null,enable:function(){this._subscription=this._typeahead.subscribe('loading',function(j,k){g.conditionClass(this._typeahead.getElement(),'typeaheadLoading',k.loading);g.conditionClass(this._typeahead.getView().getElement(),'typeaheadViewLoading',k.loading);}.bind(this));},disable:function(){this._typeahead.unsubscribe(this._subscription);this._subscription=null;}});e.exports=i;});
__d("legacy:ShowLoadingIndicatorTypeaheadBehavior",["TypeaheadShowLoadingIndicator"],function(a,b,c,d){var e=b('TypeaheadShowLoadingIndicator');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.showLoadingIndicator=function(f){f.enableBehavior(e);};},3);
__d("CompactTypeaheadRenderer",["DOM"],function(a,b,c,d,e,f){var g=b('DOM');function h(i,j){var k=[],l=i.photo;if(l){if(l instanceof Array){var m=[g.create('span',{className:'splitpic leftpic'},[g.create('img',{alt:'',src:l[0]})]),g.create('span',{className:'splitpic'+(l[2]?' toppic':'')},[g.create('img',{alt:'',src:l[1]})])];if(l[2])m.push(g.create('span',{className:'splitpic bottompic'},[g.create('img',{alt:'',src:l[2]})]));l=g.create('span',{className:'splitpics clearfix'},m);}else l=g.create('img',{alt:'',src:l});k.push(l);}if(i.text)k.push(g.create('span',{className:'text'},[i.text]));var n=i.subtext,o=i.category;if(n||o){var p=[];n&&p.push(n);n&&o&&p.push(" \u00b7 ");o&&p.push(o);k.push(g.create('span',{className:'subtext'},p));}var q=g.create('li',{className:i.type||''},k);if(i.text)q.setAttribute('aria-label',i.text);return q;}h.className='compact';e.exports=h;});
__d("legacy:CompactTypeaheadRenderer",["CompactTypeaheadRenderer"],function(a,b,c,d){if(!a.TypeaheadRenderers)a.TypeaheadRenderers={};a.TypeaheadRenderers.compact=b('CompactTypeaheadRenderer');},3);